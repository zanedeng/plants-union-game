/*! For license information please see app.js.LICENSE.txt */
(()=>{var t,e,n,r,o={729:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,o,i,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,o),!0;case 5:return l.fn.call(l.context,e,r,o,i),!0;case 6:return l.fn.call(l.context,e,r,o,i,s),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,o);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==e||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==e||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},856:()=>{}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var n=i[t]={exports:{}};return o[t](n,n.exports,s),n.exports}s.m=o,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);s.r(o);var i={};t=t||[null,e({}),e([]),e(e)];for(var a=2&r&&n;"object"==typeof a&&!~t.indexOf(a);a=e(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>n[t]));return i.default=()=>n,s.d(o,i),o},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((e,n)=>(s.f[n](t,e),e)),[])),s.u=t=>"js/"+t+".js",s.miniCssF=t=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},r="plants-union-game:",s.l=(t,e,o,i)=>{if(n[t])n[t].push(e);else{var a,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==r+o){a=f;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.setAttribute("data-webpack",r+o),a.src=t),n[t]=[e];var h=(e,r)=>{a.onerror=a.onload=null,clearTimeout(p);var o=n[t];if(delete n[t],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((t=>t(r))),e)return e(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),c&&document.head.appendChild(a)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!t;)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t+"../"})(),(()=>{var t={143:0};s.f.j=(e,n)=>{var r=s.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(((n,o)=>r=t[e]=[n,o]));n.push(r[2]=o);var i=s.p+s.u(e),a=new Error;s.l(i,(n=>{if(s.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,r[1](a)}}),"chunk-"+e,e)}};var e=(e,n)=>{var r,o,[i,a,c]=n,u=0;if(i.some((e=>0!==t[e]))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);c&&c(s)}for(e&&e(n);u<i.length;u++)o=i[u],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0},n=self.webpackChunkplants_union_game=self.webpackChunkplants_union_game||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),(()=>{"use strict";const t=s(729);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.poolsMap=new WeakMap,this.maxCountMap=new WeakMap}var e,r;return e=t,r=[{key:"create",value:function(t){var e=this.poolsMap.get(t);return e&&e.length?e.pop():new t}},{key:"recycle",value:function(t){var e,n,r=t.constructor;this.poolsMap.has(r)||this.poolsMap.set(r,[]);var o=null!==(e=this.poolsMap.get(r))&&void 0!==e?e:[];if(o.includes(t))throw new Error("该对象已经存在在对象池中！");var i=null!==(n=this.maxCountMap.get(r))&&void 0!==n?n:0;i>0&&o.length>=i||o.push(t)}},{key:"setMaxCount",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e<0&&(e=0),this.poolMaxCountMap.set(t,e)}},{key:"fullFill",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.poolsMap.has(t)||this.poolsMap.set(t,[]);var r,o=null!==(e=this.poolsMap.get(t))&&void 0!==e?e:[];for(n<0&&(n=null!==(r=this.poolMaxCountMap.get(t))&&void 0!==r?r:0);o.length<n;)o.push(new t)}},{key:"release",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(this.poolsMap.has(t)){var r,o=null!==(e=this.poolsMap.get(t))&&void 0!==e?e:[];n<0&&(n=null!==(r=this.poolMaxCountMap.get(t))&&void 0!==r?r:0),0===n?o.length=0:o.length>n&&o.splice(n)}}},{key:"releaseAll",value:function(){this.poolsMap=new WeakMap}}],r&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}(),o=new r;function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}var l=0,f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(h,t);var e,n,r,s,f=(r=h,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=u(r);if(s){var n=u(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function h(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),(t=f.call(this))._hashCode=l++,t}return e=h,(n=[{key:"hashCode",get:function(){return this._hashCode}},{key:"dispose",value:function(){this.onDispose(),o.recycle(this)}},{key:"onDispose",value:function(){}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),h}(t);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==h(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===h(o)?o:String(o)),r)}var o}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var g,m,v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=y(r);if(o){var n=y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,n=[{key:"registerController",value:function(t,e){return new e(t)}},{key:"registerModel",value:function(t){return new t(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"registerView",value:function(t,e){return new t(e)}}],n&&p(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(f);function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function w(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===b(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A={cn:(g={},w(g,101,"角色名称不能为空！"),w(g,102,"角色名称已经存在！"),w(g,103,"您已经创建了角色，不能重复创建！"),w(g,501,"玩家等级到达{{level}}级才可以进入该斗猎场！"),w(g,502,"获取角色信息失败，请检查链Id是否正确！"),g)},E=function(t){var e;return null===(e=A[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cn"])||void 0===e?void 0:e[t]},O="cmd_register_view",P="cmd_remove_view",k="cmd_load_assets",C="type_connect_wallet_success",x="type_loading",S="type_loaded",T="type_system_prompt",j="type_show_background",R="main",B="loading",I="background",N="createRole",L="hall",_="myInfoCard",U="hunt",D="friend",F=(w(m={},R,[{name:"".concat(R),url:"fgui/".concat(R,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(R,"@atlas0"),url:"fgui/".concat(R,"@atlas0.png")}]),w(m,B,[{name:"".concat(B),url:"fgui/".concat(B,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(B,"@atlas0"),url:"fgui/".concat(B,"@atlas0.png")}]),w(m,I,[{name:"".concat(I),url:"fgui/".concat(I,".fui"),options:{xhrType:"arraybuffer"}}]),w(m,N,[{name:"".concat(N),url:"fgui/".concat(N,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(N,"@atlas0"),url:"fgui/".concat(N,"@atlas0.png")}]),w(m,L,[{name:"".concat(L),url:"fgui/".concat(L,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(L,"@atlas0"),url:"fgui/".concat(L,"@atlas0.png")}]),w(m,_,[{name:"".concat(_),url:"fgui/".concat(_,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(_,"@atlas0"),url:"fgui/".concat(_,"@atlas0.png")}]),w(m,U,[{name:"".concat(U),url:"fgui/".concat(U,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(U,"@atlas0"),url:"fgui/".concat(U,"@atlas0.png")}]),w(m,D,[{name:"".concat(D),url:"fgui/".concat(D,".fui"),options:{xhrType:"arraybuffer"}},{name:"".concat(D,"@atlas0"),url:"fgui/".concat(D,"@atlas0.png")}]),m),M=[5];function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===G(o)?o:String(o)),r)}var o}var z=new WeakMap,V=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.retrieveModel(this.constructor))throw new Error("名为[".concat(this.constructor.name,"] 的 Model 实例已经存在!"));this._data={},n&&Object.keys(n).forEach((function(t){e._data[t]=n[t]})),z.set(this.constructor,this),this.onRegister()}var e,n,r;return e=t,n=[{key:"data",get:function(){return this._data}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){this._data=null}},{key:"sendEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;View.notifyViews(t,e,this)}}],r=[{key:"retrieveModel",value:function(t){return z.get(t)}},{key:"removeModel",value:function(t){z.remove(t)}}],n&&H(e.prototype,n),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Q(o)?o:String(o)),r)}var o}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y(t){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Y(t)}var W=new Map,X=new WeakMap,Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(a,t);var e,n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Y(o);if(i){var n=Y(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return q(t)}(this,t)});function a(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),e=s.call(this),X.has(e.constructor))throw new Error("View[".concat(e.constructor.name,"] instance already constructed !"));return e.name="view_".concat(e.hashCode),e.eventList=e.listEventInterests(),e.viewComponent=t,X.set(e.constructor,e.name),W.set(e.name,q(e)),e.onRegister(),e}return e=a,n=[{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){}},{key:"handleEvent",value:function(t){}},{key:"listEventInterests",value:function(){return[]}},{key:"sendEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;arguments.length>2&&void 0!==arguments[2]&&arguments[2]||nt.notifyControllers(t,e,this),a.notifyViews(t,e,this)}},{key:"registerView",value:function(t,e){return new t(e)}},{key:"retrieveView",value:function(t){return a.retrieveView(t)}},{key:"retrieveModel",value:function(t){return V.retrieveModel(t)}}],r=[{key:"retrieveView",value:function(t){return W.get(X.get(t))}},{key:"removeView",value:function(t){var e=X.get(t);if(e){var n=W.get(e);n&&(X.delete(t),W.delete(e),n.onRemove(),n.viewComponent=null,n.eventList=null)}}},{key:"removeViews",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return a.removeView(t)}))}},{key:"notifyViews",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[];W.forEach((function(e){-1!==e.eventList.indexOf(t)&&r.push(e)})),r.forEach((function(r){return r.handleEvent(t,e,n)}))}}],n&&J(e.prototype,n),r&&J(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==$(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===$(o)?o:String(o)),r)}var o}var et=new Map,nt=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),et.has(e))throw new Error("类型名为 [".concat(e,"] 的控制器已经存在!"));this.type=e,et.set(e,this),this.onRegister()}var e,n,r;return e=t,n=[{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){}},{key:"execute",value:function(){}},{key:"sendEvent",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;arguments.length>2&&void 0!==arguments[2]&&arguments[2]||Z.notifyViews(e,n,this),t.notifyControllers(e,n,this)}},{key:"registerView",value:function(t,e){return new t(e)}},{key:"retrieveView",value:function(t){return Z.retrieveView(t)}},{key:"removeView",value:function(t){Z.removeView(t)}},{key:"registerController",value:function(t,e){return new e(t)}},{key:"removeController",value:function(e){t.removeController(e)}},{key:"registerModel",value:function(t){return new t(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"retrieveModel",value:function(t){return V.retrieveModel(t)}},{key:"removeModel",value:function(t){V.removeModel(t)}}],r=[{key:"notifyControllers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=et.get(t);r&&r.execute(e,n)}},{key:"hasController",value:function(t){return et.has(t)}},{key:"removeController",value:function(t){var e=et.get(t);e&&(e.onRemove(),et.delete(t))}}],n&&tt(e.prototype,n),r&&tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===rt(o)?o:String(o)),r)}var o}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},st(t)}Object.prototype.toString;var at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=st(r);if(o){var n=st(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t)throw new Error("参数错误！");if(!t.viewClazz)throw new Error("注册视图管理类不能为空！");if(!t.vcClazz)throw new Error("注册视图类不能为空！");this.retrieveView(t.viewClazz)&&this.removeView(t.viewClazz);var e=function(t,e,n){if(!t)return null;var r,o;if((o=e)&&Array.isArray(o)||(e=[e]),e)switch(e.length){case 0:r=new t;break;case 1:r=new t(e[0]);break;case 2:r=new t(e[0],e[1]);break;case 3:r=new t(e[0],e[1],e[2]);break;case 4:r=new t(e[0],e[1],e[2],e[3]);break;case 5:r=new t(e[0],e[1],e[2],e[3],e[4]);break;case 6:r=new t(e[0],e[1],e[2],e[3],e[4],e[5]);break;case 7:r=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);break;case 8:r=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);break;case 9:r=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);break;case 10:r=new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);break;default:return null}else r=new t;return r}(t.vcClazz,t.vcParameters);t.vcProperties&&Object.keys(t.vcProperties).map((function(n){e[n]&&(e[n]=t.vcProperties[n])})),this.registerView(t.viewClazz,e)}}],n&&ot(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(nt);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==ct(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ct(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===ct(o)?o:String(o)),r)}var o}function lt(t,e){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lt(t,e)}function ft(t){return ft=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ft(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lt(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ft(r);if(o){var n=ft(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t)throw new Error("参数错误！");this.retrieveView(t.viewClazz)&&this.removeView(t.viewClazz)}}],n&&ut(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(nt);function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function dt(t,e){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dt(t,e)}function yt(t){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yt(t)}var gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dt(t,e)}(i,t);var e,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yt(n);if(r){var o=yt(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t)}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}(V);function mt(t){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mt(t)}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==mt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===mt(o)?o:String(o)),r)}var o}function bt(t,e){return bt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bt(t,e)}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}var At=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bt(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wt(r);if(o){var n=wt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"nickname",get:function(){return this.data.nickname||""},set:function(t){this.data.nickname=t}},{key:"avatarId",get:function(){return this.data.avatarId||1},set:function(t){this.data.avatarId!==t&&(this.data.avatarId=t)}},{key:"level",get:function(){return this.data.level||1},set:function(t){this.data.level!==t&&(this.data.level=t)}},{key:"warGridNum",get:function(){return this.data.warGridNum||2},set:function(t){this.data.warGridNum!==t&&(this.data.warGridNum=t)}},{key:"gold",get:function(){return this.data.gold||0},set:function(t){this.data.gold!==t&&(this.data.gold=t)}},{key:"createTime",get:function(){return this.data.createTime||0},set:function(t){this.data.createTime!==t&&(this.data.createTime=t)}}])&&vt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(V);function Et(t){return Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Et(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==Et(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Et(o)?o:String(o)),r)}var o}function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pt(t,e)}function kt(t){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kt(t)}var Ct=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=kt(r);if(o){var n=kt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).data.lang="cn",t}return e=s,(n=[{key:"lang",get:function(){return this.data.lang},set:function(t){this.data.lang!==t&&(this.data.lang=t,this.sendEvent("type_lang_changed"))}}])&&Ot(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(V);function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==xt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===xt(o)?o:String(o)),r)}var o}function Tt(t,e){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tt(t,e)}function jt(t){return jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jt(t)}var Rt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tt(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jt(r);if(o){var n=jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"account",get:function(){return this.data.account},set:function(t){this.data.account!==t&&(this.data.account=t)}},{key:"chainId",get:function(){return this.data.chainId},set:function(t){this.data.chainId!==t&&(this.data.chainId=t)}},{key:"onRegister",value:function(){this.data.account=null,this.data.chainId=M[0]}}])&&St(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(V),Bt="INJECTED";function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==It(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===It(o)?o:String(o)),r)}var o}function Lt(t,e){return Lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lt(t,e)}function _t(t){return _t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_t(t)}function Ut(t){return Number.parseInt(t,16)}function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Ft(){Ft=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(o||[]);return r(s,"_invoke",{value:A(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==e&&n.call(m,i)&&(y=m);var v=d.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Dt(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function A(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Ht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ht(t,e,n){return(e=Kt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vt(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function Qt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){Vt(i,r,o,s,a,"next",t)}function a(t){Vt(i,r,o,s,a,"throw",t)}s(void 0)}))}}function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kt(r.key),r)}}function Kt(t){var e=function(t,e){if("object"!==Dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Dt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Dt(e)?e:String(e)}function qt(t,e){return qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qt(t,e)}function Yt(t){return Yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yt(t)}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qt(t,e)}(u,t);var e,n,r,o,i,a,c=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Yt(i);if(a){var n=Yt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this)).eagerConnection=null,t}return e=u,n=[{key:"activate",value:(o=Qt(Ft().mark((function t(e){var n=this;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.isomorphicInitialize().then(Qt(Ft().mark((function t(){return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.provider){t.next=2;break}throw new Error("MetaMask not installed");case 2:return t.abrupt("return",Promise.all([n.provider.request({method:"eth_chainId"}),n.provider.request({method:"eth_requestAccounts"})]).then((function(t){var r,o,i,s=(i=2,function(t){if(Array.isArray(t))return t}(o=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(o,i)||function(t,e){if(t){if("string"==typeof t)return zt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(t,e):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=s[0],c=s[1],u=Ut(a),l="number"==typeof e?e:null==e?void 0:e.chainId;if(!l||u===l)return n.accounts=c,n.chainId=u,void n.emit("onChange",{chainId:u,accounts:c});var f="0x".concat(l.toString(16));return null===(r=n.provider)||void 0===r?void 0:r.request({method:"wallet_switchEthereumChain",params:[{chainId:f}]}).catch((function(t){var r;if(4902===t.code&&"number"!=typeof e)return null===(r=n.provider)||void 0===r?void 0:r.request({method:"wallet_addEthereumChain",params:[Gt(Gt({},e),{},{chainId:f})]});throw t})).then((function(){return n.activate(l)}))})));case 3:case"end":return t.stop()}}),t)})))).catch((function(t){throw t})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"isomorphicInitialize",value:(r=Qt(Ft().mark((function t(){var e=this;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.eagerConnection){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",this.eagerConnection=s.e(3).then(s.t.bind(s,3,23)).then(function(){var t=Qt(Ft().mark((function t(n){var r,o,i;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.default(e.options);case 2:(r=t.sent)&&(e.provider=r,null!==(o=e.provider.providers)&&void 0!==o&&o.length&&(e.provider=null!==(i=e.provider.providers.find((function(t){return t.isMetaMask})))&&void 0!==i?i:e.provider.providers[0]),e.provider.on("connect",(function(t){var n=t.chainId;e.chainId=n,e.emit("onConnect",{chainId:Ut(n)})})),e.provider.on("disconnect",(function(t){e.chainId=null,e.accounts=null,e.emit("onDisconnect")})),e.provider.on("chainChanged",(function(t){e.emit("onChange",{chainId:Ut(t)})})),e.provider.on("accountsChanged",(function(t){0===t.length?e.accounts=null:e.accounts=t,e.emit("onChange",{accounts:t})})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}],n&&Jt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),u}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lt(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_t(r);if(o){var n=_t(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),t=i.call(this),(this instanceof s?this.constructor:void 0)===s)throw new TypeError("Cannot instantiate AbstractConnector directly.");return t.provider=null,t.accounts=null,t.chainId=null,t}return e=s,(n=[{key:"activate",value:function(){throw new Error("Abstract method must be implemented.")}}])&&Nt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(t));const Xt="6.6.5";function Zt(t,e,n){const r=e.split("|").map((t=>t.trim()));for(let n=0;n<r.length;n++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const o=new Error(`invalid value for type ${e}`);throw o.code="INVALID_ARGUMENT",o.argument=`value.${n}`,o.value=t,o}async function $t(t){const e=Object.keys(t);return(await Promise.all(e.map((e=>Promise.resolve(t[e]))))).reduce(((t,n,r)=>(t[e[r]]=n,t)),{})}function te(t,e,n){for(let r in e){let o=e[r];const i=n?n[r]:null;i&&Zt(o,i,r),Object.defineProperty(t,r,{enumerable:!0,value:o,writable:!1})}}function ee(t){if(null==t)return"null";if(Array.isArray(t))return"[ "+t.map(ee).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let r=0;r<t.length;r++)n+=e[t[r]>>4],n+=e[15&t[r]];return n}if("object"==typeof t&&"function"==typeof t.toJSON)return ee(t.toJSON());switch(typeof t){case"boolean":case"symbol":case"number":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map((e=>`${ee(e)}: ${ee(t[e])}`)).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ne(t,e){return t&&t.code===e}function re(t){return ne(t,"CALL_EXCEPTION")}function oe(t,e,n){{const r=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${ee(n)}`);for(const t in n){const e=n[t];r.push(t+"="+ee(e))}}r.push(`code=${e}`),r.push(`version=${Xt}`),r.length&&(t+=" ("+r.join(", ")+")")}let r;switch(e){case"INVALID_ARGUMENT":r=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(t);break;default:r=new Error(t)}return te(r,{code:e}),n&&Object.assign(r,n),r}function ie(t,e,n,r){if(!t)throw oe(e,n,r)}function se(t,e,n,r){ie(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function ae(t,e,n){null==n&&(n=""),n&&(n=": "+n),ie(t>=e,"missing arguemnt"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ie(t<=e,"too many arguemnts"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}const ce=["NFD","NFC","NFKD","NFKC"].reduce(((t,e)=>{try{if("test"!=="test".normalize(e))throw new Error("bad");if("NFD"===e){if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken")}t.push(e)}catch(t){}return t}),[]);function ue(t,e,n){if(null==n&&(n=""),t!==e){let t=n,e="new";n&&(t+=".",e+=" "+n),ie(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}function le(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const e=new Uint8Array((t.length-2)/2);let n=2;for(let r=0;r<e.length;r++)e[r]=parseInt(t.substring(n,n+2),16),n+=2;return e}se(!1,"invalid BytesLike value",e||"value",t)}function fe(t,e){return le(t,e,!1)}function he(t,e){return le(t,e,!0)}function pe(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||"number"==typeof e&&t.length!==2+2*e||!0===e&&t.length%2!=0)}const de="0123456789abcdef";function ye(t){const e=fe(t);let n="0x";for(let t=0;t<e.length;t++){const r=e[t];n+=de[(240&r)>>4]+de[15&r]}return n}function ge(t){return"0x"+t.map((t=>ye(t).substring(2))).join("")}function me(t){return pe(t,!0)?(t.length-2)/2:fe(t).length}function ve(t,e,n){const r=fe(t);return null!=n&&n>r.length&&ie(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),ye(r.slice(null==e?0:e,null==n?r.length:n))}function be(t,e,n){const r=fe(t);ie(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const o=new Uint8Array(e);return o.fill(0),n?o.set(r,e-r.length):o.set(r,0),ye(o)}function we(t,e){return be(t,e,!0)}const Ae=BigInt(0),Ee=BigInt(1),Oe=9007199254740991;function Pe(t,e){let n=Ce(t,"value");const r=BigInt(je(e,"width")),o=Ee<<r-Ee;return n<Ae?(n=-n,ie(n<=o,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),(~n&(Ee<<r)-Ee)+Ee):(ie(n<o,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),n)}function ke(t,e){const n=xe(t,"value"),r=BigInt(je(e,"bits"));return n&(Ee<<r)-Ee}function Ce(t,e){switch(typeof t){case"bigint":return t;case"number":return se(Number.isInteger(t),"underflow",e||"value",t),se(t>=-Oe&&t<=Oe,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw new Error("empty string");return"-"===t[0]&&"-"!==t[1]?-BigInt(t.substring(1)):BigInt(t)}catch(n){se(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}se(!1,"invalid BigNumberish value",e||"value",t)}function xe(t,e){const n=Ce(t,e);return ie(n>=Ae,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Se="0123456789abcdef";function Te(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Se[n>>4],e+=Se[15&n];return BigInt(e)}return Ce(t)}function je(t,e){switch(typeof t){case"bigint":return se(t>=-Oe&&t<=Oe,"overflow",e||"value",t),Number(t);case"number":return se(Number.isInteger(t),"underflow",e||"value",t),se(t>=-Oe&&t<=Oe,"overflow",e||"value",t),t;case"string":try{if(""===t)throw new Error("empty string");return je(BigInt(t),e)}catch(n){se(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}se(!1,"invalid numeric value",e||"value",t)}function Re(t,e){let n=xe(t,"value").toString(16);if(null==e)n.length%2&&(n="0"+n);else{const r=je(e,"width");for(ie(2*r>=n.length,`value exceeds width (${r} bits)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});n.length<2*r;)n="0"+n}return"0x"+n}function Be(t){const e=xe(t,"value");if(e===Ae)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let t=0;t<r.length;t++){const e=2*t;r[t]=parseInt(n.substring(e,e+2),16)}return r}function Ie(t){let e=ye(function(t){return pe(t,!0)||t instanceof Uint8Array}(t)?t:Be(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return""===e&&(e="0"),"0x"+e}const Ne=32,Le=new Uint8Array(Ne),_e=["then"],Ue={};function De(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}class Fe extends Array{#t;constructor(...t){const e=t[0];let n=t[1],r=(t[2]||[]).slice(),o=!0;e!==Ue&&(n=t,r=[],o=!1),super(n.length),n.forEach(((t,e)=>{this[e]=t}));const i=r.reduce(((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t)),new Map);if(this.#t=Object.freeze(n.map(((t,e)=>{const n=r[e];return null!=n&&1===i.get(n)?n:null}))),o)return Object.freeze(this),new Proxy(this,{get:(t,e,n)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){const n=je(e,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const r=t[n];return r instanceof Error&&De(`index ${n}`,r),r}if(_e.indexOf(e)>=0)return Reflect.get(t,e,n);const r=t[e];if(r instanceof Function)return function(...e){return r.apply(this===n?t:this,e)};if(!(e in t))return t.getValue.apply(this===n?t:this,[e])}return Reflect.get(t,e,n)}})}toArray(){const t=[];return this.forEach(((e,n)=>{e instanceof Error&&De(`index ${n}`,e),t.push(e)})),t}toObject(){return this.#t.reduce(((t,e,n)=>(ie(null!=e,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),e in t||(t[e]=this.getValue(e)),t)),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);const n=[],r=[];for(let o=t;o<e;o++)n.push(this[o]),r.push(this.#t[o]);return new Fe(Ue,n,r)}filter(t,e){const n=[],r=[];for(let o=0;o<this.length;o++){const i=this[o];i instanceof Error&&De(`index ${o}`,i),t.call(e,i,o,this)&&(n.push(i),r.push(this.#t[o]))}return new Fe(Ue,n,r)}map(t,e){const n=[];for(let r=0;r<this.length;r++){const o=this[r];o instanceof Error&&De(`index ${r}`,o),n.push(t.call(e,o,r,this))}return n}getValue(t){const e=this.#t.indexOf(t);if(-1===e)return;const n=this[e];return n instanceof Error&&De(`property ${JSON.stringify(t)}`,n.error),n}static fromItems(t,e){return new Fe(Ue,t,e)}}function Me(t){let e=Be(t);return ie(e.length<=Ne,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ne,offset:e.length}),e.length!==Ne&&(e=he(ge([Le.slice(e.length%Ne),e]))),e}class Ge{name;type;localName;dynamic;constructor(t,e,n,r){te(this,{name:t,type:e,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){se(!1,t,this.localName,e)}}class He{#e;#n;constructor(){this.#e=[],this.#n=0}get data(){return ge(this.#e)}get length(){return this.#n}#r(t){return this.#e.push(t),this.#n+=t.length,t.length}appendWriter(t){return this.#r(he(t.data))}writeBytes(t){let e=he(t);const n=e.length%Ne;return n&&(e=he(ge([e,Le.slice(n)]))),this.#r(e)}writeValue(t){return this.#r(Me(t))}writeUpdatableValue(){const t=this.#e.length;return this.#e.push(Le),this.#n+=Ne,e=>{this.#e[t]=Me(e)}}}class ze{allowLoose;#e;#o;constructor(t,e){te(this,{allowLoose:!!e}),this.#e=he(t),this.#o=0}get data(){return ye(this.#e)}get dataLength(){return this.#e.length}get consumed(){return this.#o}get bytes(){return new Uint8Array(this.#e)}#i(t,e,n){let r=Math.ceil(e/Ne)*Ne;return this.#o+r>this.#e.length&&(this.allowLoose&&n&&this.#o+e<=this.#e.length?r=e:ie(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:he(this.#e),length:this.#e.length,offset:this.#o+r})),this.#e.slice(this.#o,this.#o+r)}subReader(t){return new ze(this.#e.slice(this.#o+t),this.allowLoose)}readBytes(t,e){let n=this.#i(0,t,!!e);return this.#o+=n.length,n.slice(0,t)}readValue(){return Te(this.readBytes(Ne))}readIndex(){return je(Te(this.readBytes(Ne)))}}function Ve(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Qe(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}const Je={number:Ve,bool:function(t){if("boolean"!=typeof t)throw new Error(`Expected boolean, not ${t}`)},bytes:Qe,hash:function(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Ve(t.outputLen),Ve(t.blockLen)},exists:function(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")},output:function(t,e){Qe(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},Ke=Je,qe=BigInt(2**32-1),Ye=BigInt(32);function We(t,e=!1){return e?{h:Number(t&qe),l:Number(t>>Ye&qe)}:{h:0|Number(t>>Ye&qe),l:0|Number(t&qe)}}const Xe=function(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let o=0;o<t.length;o++){const{h:i,l:s}=We(t[o],e);[n[o],r[o]]=[i,s]}return[n,r]},Ze=(t,e,n)=>t>>>n,$e=(t,e,n)=>t<<32-n|e>>>n,tn=(t,e,n)=>t>>>n|e<<32-n,en=(t,e,n)=>t<<32-n|e>>>n,nn=(t,e,n)=>t<<64-n|e>>>n-32,rn=(t,e,n)=>t>>>n-32|e<<64-n,on=(t,e,n)=>t<<n|e>>>32-n,sn=(t,e,n)=>e<<n|t>>>32-n,an=(t,e,n)=>e<<n-32|t>>>64-n,cn=(t,e,n)=>t<<n-32|e>>>64-n,un=function(t,e,n,r){const o=(e>>>0)+(r>>>0);return{h:t+n+(o/2**32|0)|0,l:0|o}},ln=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),fn=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,hn=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),pn=(t,e,n,r,o)=>e+n+r+o+(t/2**32|0)|0,dn=(t,e,n,r,o,i)=>e+n+r+o+i+(t/2**32|0)|0,yn=(t,e,n,r,o)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(o>>>0),gn=("object"==typeof self&&"crypto"in self&&self.crypto,t=>new DataView(t.buffer,t.byteOffset,t.byteLength)),mn=(t,e)=>t<<32-e|t>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function vn(t){if("string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new TypeError("utf8ToBytes expected string, got "+typeof t);return(new TextEncoder).encode(t)}(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));class bn{clone(){return this._cloneInto()}}function wn(t){const e=e=>t().update(vn(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}const[An,En,On]=[[],[],[]],Pn=BigInt(0),kn=BigInt(1),Cn=BigInt(2),xn=BigInt(7),Sn=BigInt(256),Tn=BigInt(113);for(let t=0,e=kn,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],An.push(2*(5*r+n)),En.push((t+1)*(t+2)/2%64);let o=Pn;for(let t=0;t<7;t++)e=(e<<kn^(e>>xn)*Tn)%Sn,e&Cn&&(o^=kn<<(kn<<BigInt(t))-kn);On.push(o)}const[jn,Rn]=Xe(On,!0),Bn=(t,e,n)=>n>32?an(t,e,n):on(t,e,n),In=(t,e,n)=>n>32?cn(t,e,n):sn(t,e,n);class Nn extends bn{constructor(t,e,n,r=!1,o=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=r,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ke.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let e=0;e<10;e++)n[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){const r=(e+8)%10,o=(e+2)%10,i=n[o],s=n[o+1],a=Bn(i,s,1)^n[r],c=In(i,s,1)^n[r+1];for(let n=0;n<50;n+=10)t[e+n]^=a,t[e+n+1]^=c}let e=t[2],o=t[3];for(let n=0;n<24;n++){const r=En[n],i=Bn(e,o,r),s=In(e,o,r),a=An[n];e=t[a],o=t[a+1],t[a]=i,t[a+1]=s}for(let e=0;e<50;e+=10){for(let r=0;r<10;r++)n[r]=t[e+r];for(let r=0;r<10;r++)t[e+r]^=~n[(r+2)%10]&n[(r+4)%10]}t[0]^=jn[r],t[1]^=Rn[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){Ke.exists(this);const{blockLen:e,state:n}=this,r=(t=vn(t)).length;for(let o=0;o<r;){const i=Math.min(e-this.pos,r-o);for(let e=0;e<i;e++)n[this.pos++]^=t[o++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:r}=this;t[n]^=e,0!=(128&e)&&n===r-1&&this.keccak(),t[r-1]^=128,this.keccak()}writeInto(t){Ke.exists(this,!1),Ke.bytes(t),this.finish();const e=this.state,{blockLen:n}=this;for(let r=0,o=t.length;r<o;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,o-r);t.set(e.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Ke.number(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Ke.output(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:r,rounds:o,enableXOF:i}=this;return t||(t=new Nn(e,n,r,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=n,t.outputLen=r,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Ln=(t,e,n)=>wn((()=>new Nn(e,t,n))),_n=(Ln(6,144,28),Ln(6,136,32),Ln(6,104,48),Ln(6,72,64),Ln(1,144,28),Ln(1,136,32)),Un=(Ln(1,104,48),Ln(1,72,64),(t,e,n)=>function(t){const e=(e,n)=>t(n).update(vn(e)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=e=>t(e),e}(((r={})=>new Nn(e,t,void 0===r.dkLen?n:r.dkLen,!0))));Un(31,168,16),Un(31,136,32);let Dn=!1;const Fn=function(t){return _n(t)};let Mn=Fn;function Gn(t){const e=fe(t,"data");return ye(Mn(e))}Gn._=Fn,Gn.lock=function(){Dn=!0},Gn.register=function(t){if(Dn)throw new TypeError("keccak256 is locked");Mn=t},Object.freeze(Gn);const Hn=BigInt(0),zn=BigInt(36);function Vn(t){const e=(t=t.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let t=0;t<40;t++)n[t]=e[t].charCodeAt(0);const r=fe(Gn(n));for(let t=0;t<40;t+=2)r[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&r[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const Qn={};for(let t=0;t<10;t++)Qn[String(t)]=String(t);for(let t=0;t<26;t++)Qn[String.fromCharCode(65+t)]=String(10+t);const Jn=15;const Kn=function(){const t={};for(let e=0;e<36;e++)t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e);return t}();function qn(t){if(se("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Vn(t);return se(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){se(t.substring(2,4)===function(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((t=>Qn[t])).join("");for(;e.length>=Jn;){let t=e.substring(0,Jn);e=parseInt(t,10)%97+e.substring(t.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}(t),"bad icap checksum","address",t);let e=function(t){t=t.toLowerCase();let e=Hn;for(let n=0;n<t.length;n++)e=e*zn+Kn[t[n]];return e}(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Vn("0x"+e)}se(!1,"invalid address","address",t)}const Yn={};function Wn(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new $n(Yn,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function Xn(t,e){return new $n(Yn,`bytes${e||""}`,t,{size:e})}const Zn=Symbol.for("_ethers_typed");class $n{type;value;#s;_typedSymbol;constructor(t,e,n,r){null==r&&(r=null),ue(Yn,t,"Typed"),te(this,{_typedSymbol:Zn,type:e,value:n}),this.#s=r,this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?`tuple(${this.value.map((t=>t.format())).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#s}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#s?-1:!1===this.#s?this.value.length:null}static from(t,e){return new $n(Yn,t,e)}static uint8(t){return Wn(t,8)}static uint16(t){return Wn(t,16)}static uint24(t){return Wn(t,24)}static uint32(t){return Wn(t,32)}static uint40(t){return Wn(t,40)}static uint48(t){return Wn(t,48)}static uint56(t){return Wn(t,56)}static uint64(t){return Wn(t,64)}static uint72(t){return Wn(t,72)}static uint80(t){return Wn(t,80)}static uint88(t){return Wn(t,88)}static uint96(t){return Wn(t,96)}static uint104(t){return Wn(t,104)}static uint112(t){return Wn(t,112)}static uint120(t){return Wn(t,120)}static uint128(t){return Wn(t,128)}static uint136(t){return Wn(t,136)}static uint144(t){return Wn(t,144)}static uint152(t){return Wn(t,152)}static uint160(t){return Wn(t,160)}static uint168(t){return Wn(t,168)}static uint176(t){return Wn(t,176)}static uint184(t){return Wn(t,184)}static uint192(t){return Wn(t,192)}static uint200(t){return Wn(t,200)}static uint208(t){return Wn(t,208)}static uint216(t){return Wn(t,216)}static uint224(t){return Wn(t,224)}static uint232(t){return Wn(t,232)}static uint240(t){return Wn(t,240)}static uint248(t){return Wn(t,248)}static uint256(t){return Wn(t,256)}static uint(t){return Wn(t,256)}static int8(t){return Wn(t,-8)}static int16(t){return Wn(t,-16)}static int24(t){return Wn(t,-24)}static int32(t){return Wn(t,-32)}static int40(t){return Wn(t,-40)}static int48(t){return Wn(t,-48)}static int56(t){return Wn(t,-56)}static int64(t){return Wn(t,-64)}static int72(t){return Wn(t,-72)}static int80(t){return Wn(t,-80)}static int88(t){return Wn(t,-88)}static int96(t){return Wn(t,-96)}static int104(t){return Wn(t,-104)}static int112(t){return Wn(t,-112)}static int120(t){return Wn(t,-120)}static int128(t){return Wn(t,-128)}static int136(t){return Wn(t,-136)}static int144(t){return Wn(t,-144)}static int152(t){return Wn(t,-152)}static int160(t){return Wn(t,-160)}static int168(t){return Wn(t,-168)}static int176(t){return Wn(t,-176)}static int184(t){return Wn(t,-184)}static int192(t){return Wn(t,-192)}static int200(t){return Wn(t,-200)}static int208(t){return Wn(t,-208)}static int216(t){return Wn(t,-216)}static int224(t){return Wn(t,-224)}static int232(t){return Wn(t,-232)}static int240(t){return Wn(t,-240)}static int248(t){return Wn(t,-248)}static int256(t){return Wn(t,-256)}static int(t){return Wn(t,-256)}static bytes1(t){return Xn(t,1)}static bytes2(t){return Xn(t,2)}static bytes3(t){return Xn(t,3)}static bytes4(t){return Xn(t,4)}static bytes5(t){return Xn(t,5)}static bytes6(t){return Xn(t,6)}static bytes7(t){return Xn(t,7)}static bytes8(t){return Xn(t,8)}static bytes9(t){return Xn(t,9)}static bytes10(t){return Xn(t,10)}static bytes11(t){return Xn(t,11)}static bytes12(t){return Xn(t,12)}static bytes13(t){return Xn(t,13)}static bytes14(t){return Xn(t,14)}static bytes15(t){return Xn(t,15)}static bytes16(t){return Xn(t,16)}static bytes17(t){return Xn(t,17)}static bytes18(t){return Xn(t,18)}static bytes19(t){return Xn(t,19)}static bytes20(t){return Xn(t,20)}static bytes21(t){return Xn(t,21)}static bytes22(t){return Xn(t,22)}static bytes23(t){return Xn(t,23)}static bytes24(t){return Xn(t,24)}static bytes25(t){return Xn(t,25)}static bytes26(t){return Xn(t,26)}static bytes27(t){return Xn(t,27)}static bytes28(t){return Xn(t,28)}static bytes29(t){return Xn(t,29)}static bytes30(t){return Xn(t,30)}static bytes31(t){return Xn(t,31)}static bytes32(t){return Xn(t,32)}static address(t){return new $n(Yn,"address",t)}static bool(t){return new $n(Yn,"bool",!!t)}static bytes(t){return new $n(Yn,"bytes",t)}static string(t){return new $n(Yn,"string",t)}static array(t,e){throw new Error("not implemented yet")}static tuple(t,e){throw new Error("not implemented yet")}static overrides(t){return new $n(Yn,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===Zn}static dereference(t,e){if($n.isTyped(t)){if(t.type!==e)throw new Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class tr extends Ge{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let n=$n.dereference(e,"string");try{n=qn(n)}catch(t){return this._throwError(t.message,e)}return t.writeValue(n)}decode(t){return qn(Re(t.readValue(),20))}}class er extends Ge{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function nr(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&"object"==typeof n){let t={};r=e.map((e=>{const r=e.localName;return ie(r,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:n}),ie(!t[r],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:n}),t[r]=!0,n[r]}))}else se(!1,"invalid tuple value","tuple",n);se(e.length===r.length,"types/value length mismatch","tuple",n);let o=new He,i=new He,s=[];e.forEach(((t,e)=>{let n=r[e];if(t.dynamic){let e=i.length;t.encode(i,n);let r=o.writeUpdatableValue();s.push((t=>{r(t+e)}))}else t.encode(o,n)})),s.forEach((t=>{t(o.length)}));let a=t.appendWriter(o);return a+=t.appendWriter(i),a}function rr(t,e){let n=[],r=[],o=t.subReader(0);return e.forEach((e=>{let i=null;if(e.dynamic){let n=t.readIndex(),r=o.subReader(n);try{i=e.decode(r)}catch(t){if(ne(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(t){if(ne(t,"BUFFER_OVERRUN"))throw t;i=t,i.baseType=e.name,i.name=e.localName,i.type=e.type}if(null==i)throw new Error("investigate");n.push(i),r.push(e.localName||null)})),Fe.fromItems(n,r)}class or extends Ge{coder;length;constructor(t,e,n){super("array",t.type+"["+(e>=0?e:"")+"]",n,-1===e||t.dynamic),te(this,{coder:t,length:e})}defaultValue(){const t=this.coder.defaultValue(),e=[];for(let n=0;n<this.length;n++)e.push(t);return e}encode(t,e){const n=$n.dereference(e,"array");Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;-1===r&&(r=n.length,t.writeValue(n.length)),ae(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let t=0;t<n.length;t++)o.push(this.coder);return nr(t,o,n)}decode(t){let e=this.length;-1===e&&(e=t.readIndex(),ie(e*Ne<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:e*Ne,length:t.dataLength}));let n=[];for(let t=0;t<e;t++)n.push(new er(this.coder));return rr(t,n)}}class ir extends Ge{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){const n=$n.dereference(e,"bool");return t.writeValue(n?1:0)}decode(t){return!!t.readValue()}}class sr extends Ge{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=he(e);let n=t.writeValue(e.length);return n+=t.writeBytes(e),n}decode(t){return t.readBytes(t.readIndex(),!0)}}class ar extends sr{constructor(t){super("bytes",t)}decode(t){return ye(super.decode(t))}}class cr extends Ge{size;constructor(t,e){let n="bytes"+String(t);super(n,n,e,!1),te(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let n=he($n.dereference(e,this.type));return n.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(n)}decode(t){return ye(t.readBytes(this.size))}}const ur=new Uint8Array([]);class lr extends Ge{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes(ur)}decode(t){return t.readBytes(0),null}}const fr=BigInt(0),hr=BigInt(1),pr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class dr extends Ge{size;signed;constructor(t,e,n){const r=(e?"int":"uint")+8*t;super(r,r,n,!1),te(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let n=Ce($n.dereference(e,this.type)),r=ke(pr,256);if(this.signed){let t=ke(r,8*this.size-1);(n>t||n<-(t+hr))&&this._throwError("value out-of-bounds",e),n=Pe(n,256)}else(n<fr||n>ke(r,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(n)}decode(t){let e=ke(t.readValue(),8*this.size);return this.signed&&(e=function(t,e){const n=xe(t,"value"),r=BigInt(je(e,"width"));return ie(n>>r===Ae,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Ee?-((~n&(Ee<<r)-Ee)+Ee):n}(e,8*this.size)),e}}function yr(t,e,n,r,o){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let r=e+1;r<n.length&&n[r]>>6==2;r++)t++;return t}return"OVERRUN"===t?n.length-e-1:0}const gr=Object.freeze({error:function(t,e,n,r,o){se(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)},ignore:yr,replace:function(t,e,n,r,o){return"OVERLONG"===t?(se("number"==typeof o,"invalid bad code point for replacement","badCodepoint",o),r.push(o),0):(r.push(65533),yr(t,e,n))}});function mr(t,e){null!=e&&(function(t){ie(ce.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}})}(e),t=t.normalize(e));let n=[];for(let e=0;e<t.length;e++){const r=t.charCodeAt(e);if(r<128)n.push(r);else if(r<2048)n.push(r>>6|192),n.push(63&r|128);else if(55296==(64512&r)){e++;const o=t.charCodeAt(e);se(e<t.length&&56320==(64512&o),"invalid surrogate pair","str",t);const i=65536+((1023&r)<<10)+(1023&o);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(r>>12|224),n.push(r>>6&63|128),n.push(63&r|128)}return new Uint8Array(n)}function vr(t,e){return function(t,e){null==e&&(e=gr.error);const n=fe(t,"bytes"),r=[];let o=0;for(;o<n.length;){const t=n[o++];if(t>>7==0){r.push(t);continue}let i=null,s=null;if(192==(224&t))i=1,s=127;else if(224==(240&t))i=2,s=2047;else{if(240!=(248&t)){o+=e(128==(192&t)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",o-1,n,r);continue}i=3,s=65535}if(o-1+i>=n.length){o+=e("OVERRUN",o-1,n,r);continue}let a=t&(1<<8-i-1)-1;for(let t=0;t<i;t++){let t=n[o];if(128!=(192&t)){o+=e("MISSING_CONTINUE",o,n,r),a=null;break}a=a<<6|63&t,o++}null!==a&&(a>1114111?o+=e("OUT_OF_RANGE",o-1-i,n,r,a):a>=55296&&a<=57343?o+=e("UTF16_SURROGATE",o-1-i,n,r,a):a<=s?o+=e("OVERLONG",o-1-i,n,r,a):r.push(a))}return r}(t,e).map((t=>t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t))))).join("")}class br extends sr{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,mr($n.dereference(e,"string")))}decode(t){return vr(super.decode(t))}}class wr extends Ge{coders;constructor(t,e){let n=!1;const r=[];t.forEach((t=>{t.dynamic&&(n=!0),r.push(t.type)})),super("tuple","tuple("+r.join(",")+")",e,n),te(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach((e=>{t.push(e.defaultValue())}));const e=this.coders.reduce(((t,e)=>{const n=e.localName;return n&&(t[n]||(t[n]=0),t[n]++),t}),{});return this.coders.forEach(((n,r)=>{let o=n.localName;o&&1===e[o]&&("length"===o&&(o="_length"),null==t[o]&&(t[o]=t[r]))})),Object.freeze(t)}encode(t,e){const n=$n.dereference(e,"tuple");return nr(t,this.coders,n)}decode(t){return rr(t,this.coders)}}function Ar(t){return Gn(mr(t))}function Er(t){const e=new Set;return t.forEach((t=>e.add(t))),Object.freeze(e)}const Or="constant external internal payable private public pure view",Pr=Er(Or.split(" ")),kr="constructor error event fallback function receive struct",Cr=Er(kr.split(" ")),xr="calldata memory storage payable indexed",Sr=Er(xr.split(" ")),Tr=Er([kr,xr,"tuple returns",Or].join(" ").split(" ")),jr={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Rr=new RegExp("^(\\s*)"),Br=new RegExp("^([0-9]+)"),Ir=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Nr=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Lr=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class _r{#o;#a;get offset(){return this.#o}get length(){return this.#a.length-this.#o}constructor(t){this.#o=0,this.#a=t.slice()}clone(){return new _r(this.#a)}reset(){this.#o=0}#c(t=0,e=0){return new _r(this.#a.slice(t,e).map((e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t})))))}popKeyword(t){const e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw new Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t)throw new Error(`expected ${t}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=this.#c(this.#o+1,t.match+1);return this.#o=t.match+1,e}popParams(){const t=this.peek();if("OPEN_PAREN"!==t.type)throw new Error("bad start");const e=[];for(;this.#o<t.match-1;){const t=this.peek().linkNext;e.push(this.#c(this.#o+1,t)),this.#o=t}return this.#o=t.match+1,e}peek(){if(this.#o>=this.#a.length)throw new Error("out-of-bounds");return this.#a[this.#o]}peekKeyword(t){const e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;const e=this.peek();return e.type===t?e.text:null}pop(){const t=this.peek();return this.#o++,t}toString(){const t=[];for(let e=this.#o;e<this.#a.length;e++){const n=this.#a[e];t.push(`${n.type}:${n.text}`)}return`<TokenString ${t.join(" ")}>`}}function Ur(t){const e=[],n=e=>{const n=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${n} at ${i}: ${e}`)};let r=[],o=[],i=0;for(;i<t.length;){let s=t.substring(i),a=s.match(Rr);a&&(i+=a[1].length,s=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let u=jr[s[0]]||"";if(u){if(c.type=u,c.text=s[0],i++,"OPEN_PAREN"===u)r.push(e.length-1),o.push(e.length-1);else if("CLOSE_PAREN"==u)0===r.length&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=o.pop(),e[c.linkBack].linkNext=e.length-1;else if("COMMA"===u)c.linkBack=o.pop(),e[c.linkBack].linkNext=e.length-1,o.push(e.length-1);else if("OPEN_BRACKET"===u)c.type="BRACKET";else if("CLOSE_BRACKET"===u){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){const n=e.pop().text;t=n+t,e[e.length-1].value=je(n)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw new Error("missing opening bracket");e[e.length-1].text+=t}}else if(a=s.match(Ir),a){if(c.text=a[1],i+=c.text.length,Tr.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Lr)){c.type="TYPE";continue}c.type="ID"}else{if(a=s.match(Br),!a)throw new Error(`unexpected token ${JSON.stringify(s[0])} at position ${i}`);c.text=a[1],c.type="NUMBER",i+=c.text.length}}return new _r(e.map((t=>Object.freeze(t))))}function Dr(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function Fr(t,e){if(e.peekKeyword(Cr)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Mr(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(null==r||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Gr(t){let e=Mr(t,Pr);return Dr(e,Er("constant payable nonpayable".split(" "))),Dr(e,Er("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Hr(t,e){return t.popParams().map((t=>no.from(t,e)))}function zr(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ce(t.pop().text);throw new Error("invalid gas")}return null}function Vr(t){if(t.length)throw new Error(`unexpected tokens: ${t.toString()}`)}const Qr=new RegExp(/^(.*)\[([0-9]*)\]$/);function Jr(t){const e=t.match(Lr);if(se(e,"invalid type","type",t),"uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){const n=parseInt(e[2]);se(0!==n&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);se(0!==n&&n<=256&&n%8==0,"invalid numeric width","type",t)}return t}const Kr={},qr=Symbol.for("_ethers_internal"),Yr="_ParamTypeInternal",Wr="_ErrorInternal",Xr="_EventInternal",Zr="_ConstructorInternal",$r="_FallbackInternal",to="_FunctionInternal",eo="_StructInternal";class no{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,n,r,o,i,s,a){if(ue(t,Kr,"ParamType"),Object.defineProperty(this,qr,{value:Yr}),i&&(i=Object.freeze(i.slice())),"array"===r){if(null==s||null==a)throw new Error("")}else if(null!=s||null!=a)throw new Error("");if("tuple"===r){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");te(this,{name:e,type:n,baseType:r,indexed:o,components:i,arrayLength:s,arrayChildren:a})}format(t){if(null==t&&(t="sighash"),"json"===t){const e=this.name||void 0;if(this.isArray()){const t=JSON.parse(this.arrayChildren.format("json"));return t.name=e,t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(t)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:e};return"boolean"==typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map((e=>JSON.parse(e.format(t))))),JSON.stringify(n)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?("sighash"!==t&&(e+=this.type),e+="("+this.components.map((e=>e.format(t))).join("full"===t?", ":",")+")"):e+=this.type,"sighash"!==t&&(!0===this.indexed&&(e+=" indexed"),"full"===t&&this.name&&(e+=" "+this.name)),e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return t.map((t=>n.arrayChildren.walk(t,e)))}if(this.isTuple()){if(!Array.isArray(t))throw new Error("invalid tuple value");if(t.length!==this.components.length)throw new Error("array is wrong length");const n=this;return t.map(((t,r)=>n.components[r].walk(t,e)))}return e(this.type,t)}#u(t,e,n,r){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,i=e.slice();return i.forEach(((e,r)=>{o.#u(t,e,n,(t=>{i[r]=t}))})),void r(i)}if(this.isTuple()){const o=this.components;let i;if(Array.isArray(e))i=e.slice();else{if(null==e||"object"!=typeof e)throw new Error("invalid tuple value");i=o.map((t=>{if(!t.name)throw new Error("cannot use object value with unnamed components");if(!(t.name in e))throw new Error(`missing value for component ${t.name}`);return e[t.name]}))}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach(((e,r)=>{o[r].#u(t,e,n,(t=>{i[r]=t}))})),void r(i)}const o=n(this.type,e);o.then?t.push(async function(){r(await o)}()):r(o)}async walkAsync(t,e){const n=[],r=[t];return this.#u(n,t,e,(t=>{r[0]=t})),n.length&&await Promise.all(n),r[0]}static from(t,e){if(no.isParamType(t))return t;if("string"==typeof t)try{return no.from(Ur(t),e)}catch(e){se(!1,"invalid param type","obj",t)}else if(t instanceof _r){let n="",r="",o=null;Mr(t,Er(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(r="tuple",o=t.popParams().map((t=>no.from(t))),n=`tuple(${o.map((t=>t.format())).join(",")})`):(n=Jr(t.popType("TYPE")),r=n);let i=null,s=null;for(;t.length&&t.peekType("BRACKET");){const e=t.pop();i=new no(Kr,"",n,r,null,o,s,i),s=e.value,n+=e.text,r="array",o=null}let a=null;if(Mr(t,Sr).has("indexed")){if(!e)throw new Error("");a=!0}const c=t.peekType("ID")?t.pop().text:"";if(t.length)throw new Error("leftover tokens");return new no(Kr,c,n,r,a,o,s,i)}const n=t.name;se(!n||"string"==typeof n&&n.match(Nr),"invalid name","obj.name",n);let r=t.indexed;null!=r&&(se(e,"parameter cannot be indexed","obj.indexed",t.indexed),r=!!r);let o=t.type,i=o.match(Qr);if(i){const e=parseInt(i[2]||"-1"),s=no.from({type:i[1],components:t.components});return new no(Kr,n||"",o,"array",r,null,e,s)}if("tuple"===o||o.startsWith("tuple(")||o.startsWith("(")){const e=null!=t.components?t.components.map((t=>no.from(t))):null;return new no(Kr,n||"",o,"tuple",r,e,null,null)}return o=Jr(t.type),new no(Kr,n||"",o,o,r,null,null,null)}static isParamType(t){return t&&t[qr]===Yr}}class ro{type;inputs;constructor(t,e,n){ue(t,Kr,"Fragment"),te(this,{type:e,inputs:n=Object.freeze(n.slice())})}static from(t){if("string"==typeof t){try{ro.from(JSON.parse(t))}catch(t){}return ro.from(Ur(t))}if(t instanceof _r)switch(t.peekKeyword(Cr)){case"constructor":return co.from(t);case"error":return so.from(t);case"event":return ao.from(t);case"fallback":case"receive":return uo.from(t);case"function":return lo.from(t);case"struct":return fo.from(t)}else if("object"==typeof t){switch(t.type){case"constructor":return co.from(t);case"error":return so.from(t);case"event":return ao.from(t);case"fallback":case"receive":return uo.from(t);case"function":return lo.from(t);case"struct":return fo.from(t)}ie(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}se(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return co.isFragment(t)}static isError(t){return so.isFragment(t)}static isEvent(t){return ao.isFragment(t)}static isFunction(t){return lo.isFragment(t)}static isStruct(t){return fo.isFragment(t)}}class oo extends ro{name;constructor(t,e,n,r){super(t,e,r),se("string"==typeof n&&n.match(Nr),"invalid identifier","name",n),r=Object.freeze(r.slice()),te(this,{name:n})}}function io(t,e){return"("+e.map((e=>e.format(t))).join("full"===t?", ":",")+")"}class so extends oo{constructor(t,e,n){super(t,"error",e,n),Object.defineProperty(this,qr,{value:Wr})}get selector(){return Ar(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("error"),e.push(this.name+io(t,this.inputs)),e.join(" ")}static from(t){if(so.isFragment(t))return t;if("string"==typeof t)return so.from(Ur(t));if(t instanceof _r){const e=Fr("error",t),n=Hr(t);return Vr(t),new so(Kr,e,n)}return new so(Kr,t.name,t.inputs?t.inputs.map(no.from):[])}static isFragment(t){return t&&t[qr]===Wr}}class ao extends oo{anonymous;constructor(t,e,n,r){super(t,"event",e,n),Object.defineProperty(this,qr,{value:Xr}),te(this,{anonymous:r})}get topicHash(){return Ar(this.format("sighash"))}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("event"),e.push(this.name+io(t,this.inputs)),"sighash"!==t&&this.anonymous&&e.push("anonymous"),e.join(" ")}static getTopicHash(t,e){return e=(e||[]).map((t=>no.from(t))),new ao(Kr,t,e,!1).topicHash}static from(t){if(ao.isFragment(t))return t;if("string"==typeof t)try{return ao.from(Ur(t))}catch(e){se(!1,"invalid event fragment","obj",t)}else if(t instanceof _r){const e=Fr("event",t),n=Hr(t,!0),r=!!Mr(t,Er(["anonymous"])).has("anonymous");return Vr(t),new ao(Kr,e,n,r)}return new ao(Kr,t.name,t.inputs?t.inputs.map((t=>no.from(t,!0))):[],!!t.anonymous)}static isFragment(t){return t&&t[qr]===Xr}}class co extends ro{payable;gas;constructor(t,e,n,r,o){super(t,e,n),Object.defineProperty(this,qr,{value:Zr}),te(this,{payable:r,gas:o})}format(t){if(ie(null!=t&&"sighash"!==t,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===t)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t))))});const e=[`constructor${io(t,this.inputs)}`];return e.push(this.payable?"payable":"nonpayable"),null!=this.gas&&e.push(`@${this.gas.toString()}`),e.join(" ")}static from(t){if(co.isFragment(t))return t;if("string"==typeof t)try{return co.from(Ur(t))}catch(e){se(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof _r){Mr(t,Er(["constructor"]));const e=Hr(t),n=!!Mr(t,Er(["payable"])).has("payable"),r=zr(t);return Vr(t),new co(Kr,"constructor",e,n,r)}return new co(Kr,"constructor",t.inputs?t.inputs.map(no.from):[],!!t.payable,null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[qr]===Zr}}class uo extends ro{payable;constructor(t,e,n){super(t,"fallback",e),Object.defineProperty(this,qr,{value:$r}),te(this,{payable:n})}format(t){const e=0===this.inputs.length?"receive":"fallback";if("json"===t){const t=this.payable?"payable":"nonpayable";return JSON.stringify({type:e,stateMutability:t})}return`${e}()${this.payable?" payable":""}`}static from(t){if(uo.isFragment(t))return t;if("string"==typeof t)try{return uo.from(Ur(t))}catch(e){se(!1,"invalid fallback fragment","obj",t)}else if(t instanceof _r){const e=t.toString();if(se(t.peekKeyword(Er(["fallback","receive"])),"type must be fallback or receive","obj",e),"receive"===t.popKeyword(Er(["fallback","receive"]))){const e=Hr(t);return se(0===e.length,"receive cannot have arguments","obj.inputs",e),Mr(t,Er(["payable"])),Vr(t),new uo(Kr,[],!0)}let n=Hr(t);n.length?se(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map((t=>t.format("minimal"))).join(", ")):n=[no.from("bytes")];const r=Gr(t);if(se("nonpayable"===r||"payable"===r,"fallback cannot be constants","obj.stateMutability",r),Mr(t,Er(["returns"])).has("returns")){const e=Hr(t);se(1===e.length&&"bytes"===e[0].type,"invalid fallback outputs","obj.outputs",e.map((t=>t.format("minimal"))).join(", "))}return Vr(t),new uo(Kr,n,"payable"===r)}if("receive"===t.type)return new uo(Kr,[],!0);if("fallback"===t.type){const e=[no.from("bytes")],n="payable"===t.stateMutability;return new uo(Kr,e,n)}se(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[qr]===$r}}class lo extends oo{constant;outputs;stateMutability;payable;gas;constructor(t,e,n,r,o,i){super(t,"function",e,r),Object.defineProperty(this,qr,{value:to}),te(this,{constant:"view"===n||"pure"===n,gas:i,outputs:o=Object.freeze(o.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return Ar(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map((e=>JSON.parse(e.format(t)))),outputs:this.outputs.map((e=>JSON.parse(e.format(t))))});const e=[];return"sighash"!==t&&e.push("function"),e.push(this.name+io(t,this.inputs)),"sighash"!==t&&("nonpayable"!==this.stateMutability&&e.push(this.stateMutability),this.outputs&&this.outputs.length&&(e.push("returns"),e.push(io(t,this.outputs))),null!=this.gas&&e.push(`@${this.gas.toString()}`)),e.join(" ")}static getSelector(t,e){return e=(e||[]).map((t=>no.from(t))),new lo(Kr,t,"view",e,[],null).selector}static from(t){if(lo.isFragment(t))return t;if("string"==typeof t)try{return lo.from(Ur(t))}catch(e){se(!1,"invalid function fragment","obj",t)}else if(t instanceof _r){const e=Fr("function",t),n=Hr(t),r=Gr(t);let o=[];Mr(t,Er(["returns"])).has("returns")&&(o=Hr(t));const i=zr(t);return Vr(t),new lo(Kr,e,r,n,o,i)}let e=t.stateMutability;return null==e&&(e="payable","boolean"==typeof t.constant?(e="view",t.constant||(e="payable","boolean"!=typeof t.payable||t.payable||(e="nonpayable"))):"boolean"!=typeof t.payable||t.payable||(e="nonpayable")),new lo(Kr,t.name,e,t.inputs?t.inputs.map(no.from):[],t.outputs?t.outputs.map(no.from):[],null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[qr]===to}}class fo extends oo{constructor(t,e,n){super(t,"struct",e,n),Object.defineProperty(this,qr,{value:eo})}format(){throw new Error("@TODO")}static from(t){if("string"==typeof t)try{return fo.from(Ur(t))}catch(e){se(!1,"invalid struct fragment","obj",t)}else if(t instanceof _r){const e=Fr("struct",t),n=Hr(t);return Vr(t),new fo(Kr,e,n)}return new fo(Kr,t.name,t.inputs?t.inputs.map(no.from):[])}static isFragment(t){return t&&t[qr]===eo}}const ho=new Map;ho.set(0,"GENERIC_PANIC"),ho.set(1,"ASSERT_FALSE"),ho.set(17,"OVERFLOW"),ho.set(18,"DIVIDE_BY_ZERO"),ho.set(33,"ENUM_RANGE_ERROR"),ho.set(34,"BAD_STORAGE_DATA"),ho.set(49,"STACK_UNDERFLOW"),ho.set(50,"ARRAY_RANGE_ERROR"),ho.set(65,"OUT_OF_MEMORY"),ho.set(81,"UNINITIALIZED_FUNCTION_CALL");const po=new RegExp(/^bytes([0-9]*)$/),yo=new RegExp(/^(u?int)([0-9]*)$/);let go=null;class mo{#l(t){if(t.isArray())return new or(this.#l(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new wr(t.components.map((t=>this.#l(t))),t.name);switch(t.baseType){case"address":return new tr(t.name);case"bool":return new ir(t.name);case"string":return new br(t.name);case"bytes":return new ar(t.name);case"":return new lr(t.name)}let e=t.type.match(yo);if(e){let n=parseInt(e[2]||"256");return se(0!==n&&n<=256&&n%8==0,"invalid "+e[1]+" bit length","param",t),new dr(n/8,"int"===e[1],t.name)}if(e=t.type.match(po),e){let n=parseInt(e[1]);return se(0!==n&&n<=32,"invalid bytes length","param",t),new cr(n,t.name)}se(!1,"invalid type","type",t.type)}getDefaultValue(t){const e=t.map((t=>this.#l(no.from(t))));return new wr(e,"_").defaultValue()}encode(t,e){ae(e.length,t.length,"types/values length mismatch");const n=t.map((t=>this.#l(no.from(t)))),r=new wr(n,"_"),o=new He;return r.encode(o,e),o.data}decode(t,e,n){const r=t.map((t=>this.#l(no.from(t))));return new wr(r,"_").decode(new ze(e,n))}static defaultAbiCoder(){return null==go&&(go=new mo),go}static getBuiltinCallException(t,e,n){return function(t,e,n,r){let o="missing revert data",i=null,s=null;if(n){o="execution reverted";const t=fe(n);if(n=ye(n),0===t.length)o+=" (no data present; likely require(false) occurred",i="require(false)";else if(t.length%32!=4)o+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===ye(t.slice(0,4)))try{i=r.decode(["string"],t.slice(4))[0],s={signature:"Error(string)",name:"Error",args:[i]},o+=`: ${JSON.stringify(i)}`}catch(t){o+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===ye(t.slice(0,4)))try{const e=Number(r.decode(["uint256"],t.slice(4))[0]);s={signature:"Panic(uint256)",name:"Panic",args:[e]},i=`Panic due to ${ho.get(e)||"UNKNOWN"}(${e})`,o+=`: ${i}`}catch(t){o+=" (could not decode panic code)"}else o+=" (unknown custom error)"}const a={to:e.to?qn(e.to):null,data:e.data||"0x"};return e.from&&(a.from=qn(e.from)),oe(o,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:a,invocation:null,revert:s})}(t,e,n,mo.defaultAbiCoder())}}function vo(t){return t&&"function"==typeof t.getAddress}async function bo(t,e){const n=await e;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(ie("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),se(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),qn(n)}function wo(t,e){return"string"==typeof t?t.match(/^0x[0-9a-f]{40}$/i)?qn(t):(ie(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),bo(t,e.resolveName(t))):vo(t)?bo(t,t.getAddress()):t&&"function"==typeof t.then?bo(t,t):void se(!1,"unsupported addressable value","target",t)}const Ao=new Uint8Array(32);Ao.fill(0);const Eo=BigInt(-1),Oo=BigInt(0),Po=BigInt(1),ko=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Co=Re(Po,32),xo=Re(Oo,32),So={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},To=["name","version","chainId","verifyingContract","salt"];function jo(t){return function(e){return se("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const Ro={name:jo("name"),version:jo("version"),chainId:function(t){const e=Ce(t,"domain.chainId");return se(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Ie(e)},verifyingContract:function(t){try{return qn(t).toLowerCase()}catch(t){}se(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=fe(t,"domain.salt");return se(32===e.length,'invalid domain value "salt"',"domain.salt",t),ye(e)}};function Bo(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=""===e[1],r=parseInt(e[2]||"256");se(r%8==0&&0!==r&&r<=256&&(null==e[2]||e[2]===String(r)),"invalid numeric width","type",t);const o=ke(ko,n?r-1:r),i=n?(o+Po)*Eo:Oo;return function(e){const r=Ce(e,"value");return se(r>=i&&r<=o,`value out-of-bounds for ${t}`,"value",r),Re(n?Pe(r,256):r,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return se(0!==n&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(e){return se(fe(e).length===n,`invalid length for ${t}`,"value",e),function(t){const e=fe(t),n=e.length%32;return n?ge([e,Ao.slice(n)]):ye(e)}(e)}}}switch(t){case"address":return function(t){return we(qn(t),32)};case"bool":return function(t){return t?Co:xo};case"bytes":return function(t){return Gn(t)};case"string":return function(t){return Ar(t)}}return null}function Io(t,e){return`${t}(${e.map((({name:t,type:e})=>e+" "+t)).join(",")})`}class No{primaryType;#f;get types(){return JSON.parse(this.#f)}#h;#p;constructor(t){this.#f=JSON.stringify(t),this.#h=new Map,this.#p=new Map;const e=new Map,n=new Map,r=new Map;Object.keys(t).forEach((t=>{e.set(t,new Set),n.set(t,[]),r.set(t,new Set)}));for(const r in t){const o=new Set;for(const i of t[r]){se(!o.has(i.name),`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(r)}`,"types",t),o.add(i.name);const s=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;se(s!==r,`circular type reference to ${JSON.stringify(s)}`,"types",t),Bo(s)||(se(n.has(s),`unknown type ${JSON.stringify(s)}`,"types",t),n.get(s).push(r),e.get(r).add(s))}}const o=Array.from(n.keys()).filter((t=>0===n.get(t).length));se(0!==o.length,"missing primary type","types",t),se(1===o.length,`ambiguous primary types or unused types: ${o.map((t=>JSON.stringify(t))).join(", ")}`,"types",t),te(this,{primaryType:o[0]}),function o(i,s){se(!s.has(i),`circular type reference to ${JSON.stringify(i)}`,"types",t),s.add(i);for(const t of e.get(i))if(n.has(t)){o(t,s);for(const e of s)r.get(e).add(t)}s.delete(i)}(this.primaryType,new Set);for(const[e,n]of r){const r=Array.from(n);r.sort(),this.#h.set(e,Io(e,t[e])+r.map((e=>Io(e,t[e]))).join(""))}}getEncoder(t){let e=this.#p.get(t);return e||(e=this.#d(t),this.#p.set(t,e)),e}#d(t){{const e=Bo(t);if(e)return e}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const t=e[1],n=this.getEncoder(t);return r=>{se(!e[3]||parseInt(e[3])===r.length,`array length mismatch; expected length ${parseInt(e[3])}`,"value",r);let o=r.map(n);return this.#h.has(t)&&(o=o.map(Gn)),Gn(ge(o))}}const n=this.types[t];if(n){const e=Ar(this.#h.get(t));return t=>{const r=n.map((({name:e,type:n})=>{const r=this.getEncoder(n)(t[e]);return this.#h.has(n)?Gn(r):r}));return r.unshift(e),ge(r)}}se(!1,`unknown type: ${t}`,"type",t)}encodeType(t){const e=this.#h.get(t);return se(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return Gn(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(Bo(t))return n(t,e);const r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r)return se(!r[3]||parseInt(r[3])===e.length,`array length mismatch; expected length ${parseInt(r[3])}`,"value",e),e.map((t=>this._visit(r[1],t,n)));const o=this.types[t];if(o)return o.reduce(((t,{name:r,type:o})=>(t[r]=this._visit(o,e[r],n),t)),{});se(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new No(t)}static getPrimaryType(t){return No.from(t).primaryType}static hashStruct(t,e,n){return No.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(null==t[n])continue;const r=So[n];se(r,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:r})}return e.sort(((t,e)=>To.indexOf(t.name)-To.indexOf(e.name))),No.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return ge(["0x1901",No.hashDomain(t),No.from(e).hash(n)])}static hash(t,e,n){return Gn(No.encode(t,e,n))}static async resolveNames(t,e,n,r){t=Object.assign({},t);for(const e in t)null==t[e]&&delete t[e];const o={};t.verifyingContract&&!pe(t.verifyingContract,20)&&(o[t.verifyingContract]="0x");const i=No.from(e);i.visit(n,((t,e)=>("address"!==t||pe(e,20)||(o[e]="0x"),e)));for(const t in o)o[t]=await r(t);return t.verifyingContract&&o[t.verifyingContract]&&(t.verifyingContract=o[t.verifyingContract]),{domain:t,value:n=i.visit(n,((t,e)=>"address"===t&&o[e]?o[e]:e))}}static getPayload(t,e,n){No.hashDomain(t);const r={},o=[];To.forEach((e=>{const n=t[e];null!=n&&(r[e]=Ro[e](n),o.push({name:e,type:So[e]}))}));const i=No.from(e),s=Object.assign({},e);return se(null==s.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",e),s.EIP712Domain=o,i.encode(n),{types:s,domain:r,primaryType:i.primaryType,message:i.visit(n,((t,e)=>{if(t.match(/^bytes(\d*)/))return ye(fe(e));if(t.match(/^u?int/))return Ce(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return se("string"==typeof e,"invalid string","value",e),e}se(!1,"unsupported type","type",t)}))}}}function Lo(t,e){return{address:qn(t),storageKeys:e.map(((t,e)=>(se(pe(t,32),"invalid slot",`storageKeys[${e}]`,t),t.toLowerCase())))}}function _o(t){if(Array.isArray(t))return t.map(((e,n)=>Array.isArray(e)?(se(2===e.length,"invalid slot set",`value[${n}]`,e),Lo(e[0],e[1])):(se(null!=e&&"object"==typeof e,"invalid address-slot set","value",t),Lo(e.address,e.storageKeys))));se(null!=t&&"object"==typeof t,"invalid access list","value",t);const e=Object.keys(t).map((e=>{const n=t[e].reduce(((t,e)=>(t[e]=!0,t)),{});return Lo(e,Object.keys(n).sort())}));return e.sort(((t,e)=>t.address.localeCompare(e.address))),e}const Uo="0x0000000000000000000000000000000000000000";class Do{fragment;name;signature;topic;args;constructor(t,e,n){const r=t.name,o=t.format();te(this,{fragment:t,name:r,signature:o,topic:e,args:n})}}class Fo{fragment;name;args;signature;selector;value;constructor(t,e,n,r){const o=t.name,i=t.format();te(this,{fragment:t,name:o,args:n,signature:i,selector:e,value:r})}}class Mo{fragment;name;args;signature;selector;constructor(t,e,n){const r=t.name,o=t.format();te(this,{fragment:t,name:r,args:n,signature:o,selector:e})}}class Go{hash;_isIndexed;static isIndexed(t){return!(!t||!t._isIndexed)}constructor(t){te(this,{hash:t,_isIndexed:!0})}}const Ho={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},zo={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&Ho[t.toString()]&&(e=Ho[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class Vo{fragments;deploy;fallback;receive;#y;#g;#m;#v;constructor(t){let e=[];e="string"==typeof t?JSON.parse(t):t,this.#m=new Map,this.#y=new Map,this.#g=new Map;const n=[];for(const t of e)try{n.push(ro.from(t))}catch(t){console.log("EE",t)}te(this,{fragments:Object.freeze(n)});let r=null,o=!1;this.#v=this.getAbiCoder(),this.fragments.forEach(((t,e)=>{let n;switch(t.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void te(this,{deploy:t});case"fallback":return void(0===t.inputs.length?o=!0:(se(!r||t.payable!==r.payable,"conflicting fallback fragments",`fragments[${e}]`,t),r=t,o=r.payable));case"function":n=this.#m;break;case"event":n=this.#g;break;case"error":n=this.#y;break;default:return}const i=t.format();n.has(i)||n.set(i,t)})),this.deploy||te(this,{deploy:co.from("constructor()")}),te(this,{fallback:r,receive:o})}format(t){const e=t?"minimal":"full";return this.fragments.map((t=>t.format(e)))}formatJson(){const t=this.fragments.map((t=>t.format("json")));return JSON.stringify(t.map((t=>JSON.parse(t))))}getAbiCoder(){return mo.defaultAbiCoder()}#b(t,e,n){if(pe(t)){const e=t.toLowerCase();for(const t of this.#m.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const r=[];for(const[e,n]of this.#m)e.split("(")[0]===t&&r.push(n);if(e){const t=e.length>0?e[e.length-1]:null;let n=e.length,o=!0;$n.isTyped(t)&&"overrides"===t.type&&(o=!1,n--);for(let t=r.length-1;t>=0;t--){const e=r[t].inputs.length;e===n||o&&e===n-1||r.splice(t,1)}for(let t=r.length-1;t>=0;t--){const n=r[t].inputs;for(let o=0;o<e.length;o++)if($n.isTyped(e[o])){if(o>=n.length){if("overrides"===e[o].type)continue;r.splice(t,1);break}if(e[o].type!==n[o].baseType){r.splice(t,1);break}}}}if(1===r.length&&e&&e.length!==r[0].inputs.length){const t=e[e.length-1];(null==t||Array.isArray(t)||"object"!=typeof t)&&r.splice(0,1)}return 0===r.length?null:(r.length>1&&n&&se(!1,`ambiguous function description (i.e. matches ${r.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t),r[0])}return this.#m.get(lo.from(t).format())||null}getFunctionName(t){const e=this.#b(t,null,!1);return se(e,"no matching function","key",t),e.name}hasFunction(t){return!!this.#b(t,null,!1)}getFunction(t,e){return this.#b(t,e||null,!0)}forEachFunction(t){const e=Array.from(this.#m.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let n=0;n<e.length;n++){const r=e[n];t(this.#m.get(r),n)}}#w(t,e,n){if(pe(t)){const e=t.toLowerCase();for(const t of this.#g.values())if(e===t.topicHash)return t;return null}if(-1===t.indexOf("(")){const r=[];for(const[e,n]of this.#g)e.split("(")[0]===t&&r.push(n);if(e){for(let t=r.length-1;t>=0;t--)r[t].inputs.length<e.length&&r.splice(t,1);for(let t=r.length-1;t>=0;t--){const n=r[t].inputs;for(let o=0;o<e.length;o++)if($n.isTyped(e[o])&&e[o].type!==n[o].baseType){r.splice(t,1);break}}}return 0===r.length?null:(r.length>1&&n&&se(!1,`ambiguous event description (i.e. matches ${r.map((t=>JSON.stringify(t.format()))).join(", ")})`,"key",t),r[0])}return this.#g.get(ao.from(t).format())||null}getEventName(t){const e=this.#w(t,null,!1);return se(e,"no matching event","key",t),e.name}hasEvent(t){return!!this.#w(t,null,!1)}getEvent(t,e){return this.#w(t,e||null,!0)}forEachEvent(t){const e=Array.from(this.#g.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let n=0;n<e.length;n++){const r=e[n];t(this.#g.get(r),n)}}getError(t,e){if(pe(t)){const e=t.toLowerCase();if(zo[e])return so.from(zo[e].signature);for(const t of this.#y.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){const e=[];for(const[n,r]of this.#y)n.split("(")[0]===t&&e.push(r);return 0===e.length?"Error"===t?so.from("error Error(string)"):"Panic"===t?so.from("error Panic(uint256)"):null:(e.length>1&&se(!1,`ambiguous error description (i.e. ${e.map((t=>JSON.stringify(t.format()))).join(", ")})`,"name",t),e[0])}if("Error(string)"===(t=so.from(t).format()))return so.from("error Error(string)");if("Panic(uint256)"===t)return so.from("error Panic(uint256)");return this.#y.get(t)||null}forEachError(t){const e=Array.from(this.#y.keys());e.sort(((t,e)=>t.localeCompare(e)));for(let n=0;n<e.length;n++){const r=e[n];t(this.#y.get(r),n)}}_decodeParams(t,e){return this.#v.decode(t,e)}_encodeParams(t,e){return this.#v.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);se(e,"unknown error","fragment",t),t=e}return se(ve(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,ve(e,4))}encodeErrorResult(t,e){if("string"==typeof t){const e=this.getError(t);se(e,"unknown error","fragment",t),t=e}return ge([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);se(e,"unknown function","fragment",t),t=e}return se(ve(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,ve(e,4))}encodeFunctionData(t,e){if("string"==typeof t){const e=this.getFunction(t);se(e,"unknown function","fragment",t),t=e}return ge([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);se(e,"unknown function","fragment",t),t=e}let n="invalid length for result data";const r=he(e);if(r.length%32==0)try{return this.#v.decode(t.outputs,r)}catch(t){n="could not decode result data"}ie(!1,n,"BAD_DATA",{value:ye(r),info:{method:t.name,signature:t.format()}})}makeError(t,e){const n=fe(t,"data"),r=mo.getBuiltinCallException("call",e,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const t=ye(n.slice(0,4)),e=this.getError(t);if(e)try{const t=this.#v.decode(e.inputs,n.slice(4));r.revert={name:e.name,signature:e.format(),args:t},r.reason=r.revert.signature,r.message=`execution reverted: ${r.reason}`}catch(t){r.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(e);return o&&(r.invocation={method:o.name,signature:o.signature,args:o.args}),r}encodeFunctionResult(t,e){if("string"==typeof t){const e=this.getFunction(t);se(e,"unknown function","fragment",t),t=e}return ye(this.#v.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if("string"==typeof t){const e=this.getEvent(t);se(e,"unknown event","eventFragment",t),t=e}ie(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});const n=[];t.anonymous||n.push(t.topicHash);const r=(t,e)=>"string"===t.type?Ar(e):"bytes"===t.type?Gn(ye(e)):("bool"===t.type&&"boolean"==typeof e?e=e?"0x01":"0x00":t.type.match(/^u?int/)?e=Re(e):t.type.match(/^bytes/)?e=be(e,32,!1):"address"===t.type&&this.#v.encode(["address"],[e]),we(ye(e),32));for(e.forEach(((e,o)=>{const i=t.inputs[o];i.indexed?null==e?n.push(null):"array"===i.baseType||"tuple"===i.baseType?se(!1,"filtering with tuples or arrays not supported","contract."+i.name,e):Array.isArray(e)?n.push(e.map((t=>r(i,t)))):n.push(r(i,e)):se(null==e,"cannot filter non-indexed parameters; must be null","contract."+i.name,e)}));n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(t,e){if("string"==typeof t){const e=this.getEvent(t);se(e,"unknown event","eventFragment",t),t=e}const n=[],r=[],o=[];return t.anonymous||n.push(t.topicHash),se(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach(((t,i)=>{const s=e[i];if(t.indexed)if("string"===t.type)n.push(Ar(s));else if("bytes"===t.type)n.push(Gn(s));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");n.push(this.#v.encode([t.type],[s]))}else r.push(t),o.push(s)})),{data:this.#v.encode(r,o),topics:n}}decodeEventLog(t,e,n){if("string"==typeof t){const e=this.getEvent(t);se(e,"unknown event","eventFragment",t),t=e}if(null!=n&&!t.anonymous){const e=t.topicHash;se(pe(n[0],32)&&n[0].toLowerCase()===e,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],o=[],i=[];t.inputs.forEach(((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(r.push(no.from({type:"bytes32",name:t.name})),i.push(!0)):(r.push(t),i.push(!1)):(o.push(t),i.push(!1))}));const s=null!=n?this.#v.decode(r,ge(n)):null,a=this.#v.decode(o,e,!0),c=[],u=[];let l=0,f=0;return t.inputs.forEach(((t,e)=>{let n=null;if(t.indexed)if(null==s)n=new Go(null);else if(i[e])n=new Go(s[f++]);else try{n=s[f++]}catch(t){n=t}else try{n=a[l++]}catch(t){n=t}c.push(n),u.push(t.name||null)})),Fe.fromItems(c,u)}parseTransaction(t){const e=fe(t.data,"tx.data"),n=Ce(null!=t.value?t.value:0,"tx.value"),r=this.getFunction(ye(e.slice(0,4)));if(!r)return null;const o=this.#v.decode(r.inputs,e.slice(4));return new Fo(r,r.selector,o,n)}parseCallResult(t){throw new Error("@TODO")}parseLog(t){const e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Do(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){const e=ye(t),n=this.getError(ve(e,0,4));if(!n)return null;const r=this.#v.decode(n.inputs,ve(e,4));return new Mo(n,n.selector,r)}static from(t){return t instanceof Vo?t:"string"==typeof t?new Vo(JSON.parse(t)):"function"==typeof t.format?new Vo(t.format("json")):new Vo(t)}}const Qo=BigInt(0);function Jo(t){return null==t?null:t}function Ko(t){return null==t?null:t.toString()}class qo{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(t,e,n){te(this,{gasPrice:Jo(t),maxFeePerGas:Jo(e),maxPriorityFeePerGas:Jo(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Ko(t),maxFeePerGas:Ko(e),maxPriorityFeePerGas:Ko(n)}}}function Yo(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=ye(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of n)r in t&&null!=t[r]&&(e[r]=Ce(t[r],`request.${r}`));const r="type,nonce".split(/,/);for(const n of r)n in t&&null!=t[n]&&(e[n]=je(t[n],`request.${n}`));return t.accessList&&(e.accessList=_o(t.accessList)),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),e}class Wo{provider;number;hash;timestamp;parentHash;nonce;difficulty;gasLimit;gasUsed;miner;extraData;baseFeePerGas;#A;constructor(t,e){this.#A=t.transactions.map((t=>"string"!=typeof t?new $o(t,e):t)),te(this,{provider:e,hash:Jo(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,miner:t.miner,extraData:t.extraData,baseFeePerGas:Jo(t.baseFeePerGas)})}get transactions(){return this.#A.map((t=>"string"==typeof t?t:t.hash))}get prefetchedTransactions(){const t=this.#A.slice();return 0===t.length?[]:(ie("object"==typeof t[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:r,gasUsed:o,hash:i,miner:s,nonce:a,number:c,parentHash:u,timestamp:l,transactions:f}=this;return{_type:"Block",baseFeePerGas:Ko(t),difficulty:Ko(e),extraData:n,gasLimit:Ko(r),gasUsed:Ko(o),hash:i,miner:s,nonce:a,number:c,parentHash:u,timestamp:l,transactions:f}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#A.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(t){let e;if("number"==typeof t)e=this.#A[t];else{const n=t.toLowerCase();for(const t of this.#A){if("string"==typeof t){if(t!==n)continue;e=t;break}if(t.hash!==n){e=t;break}}}if(null==e)throw new Error("no such tx");return"string"==typeof e?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if("number"==typeof t)return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;se(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:this.hash,number:this.number}}}class Xo{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(t,e){this.provider=e;const n=Object.freeze(t.topics.slice());te(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:r,index:o,removed:i,topics:s,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:r,index:o,removed:i,topics:s,transactionHash:a,transactionIndex:c}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return ie(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return ie(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return ie(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(t=this).transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}};var t}}class Zo{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;cumulativeGasUsed;gasPrice;type;status;root;#E;constructor(t,e){this.#E=Object.freeze(t.logs.map((t=>new Xo(t,e))));let n=Qo;null!=t.effectiveGasPrice?n=t.effectiveGasPrice:null!=t.gasPrice&&(n=t.gasPrice),te(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,gasPrice:n,type:t.type,status:t.status,root:t.root})}get logs(){return this.#E}toJSON(){const{to:t,from:e,contractAddress:n,hash:r,index:o,blockHash:i,blockNumber:s,logsBloom:a,logs:c,status:u,root:l}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:s,contractAddress:n,cumulativeGasUsed:Ko(this.cumulativeGasUsed),from:e,gasPrice:Ko(this.gasPrice),gasUsed:Ko(this.gasUsed),hash:r,index:o,logs:c,logsBloom:a,root:l,status:u,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(null==t)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(null==t)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return ei(this)}reorderedEvent(t){return ie(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),ti(this,t)}}class $o{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;data;value;chainId;signature;accessList;#O;constructor(t,e){this.provider=e,this.blockNumber=null!=t.blockNumber?t.blockNumber:null,this.blockHash=null!=t.blockHash?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=null!=t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=t.maxFeePerGas?t.maxFeePerGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=null!=t.accessList?t.accessList:null,this.#O=-1}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:r,type:o,to:i,from:s,nonce:a,data:c,signature:u,accessList:l}=this;return{_type:"TransactionReceipt",accessList:l,blockNumber:t,blockHash:e,chainId:Ko(this.chainId),data:c,from:s,gasLimit:Ko(this.gasLimit),gasPrice:Ko(this.gasPrice),hash:r,maxFeePerGas:Ko(this.maxFeePerGas),maxPriorityFeePerGas:Ko(this.maxPriorityFeePerGas),nonce:a,signature:u,to:i,index:n,type:o,value:Ko(this.value)}}async getBlock(){let t=this.blockNumber;if(null==t){const e=await this.getTransaction();e&&(t=e.blockNumber)}if(null==t)return null;const e=this.provider.getBlock(t);if(null==e)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:t,blockNumber:e}=await $t({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==t||null==t.blockNumber?0:e-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=null==t?1:t,r=null==e?0:e;let o=this.#O,i=-1,s=-1===o;const a=async()=>{if(s)return null;const{blockNumber:t,nonce:e}=await $t({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(e<this.nonce)return void(o=t);if(s)return null;const r=await this.getTransaction();if(!r||null==r.blockNumber)for(-1===i&&(i=o-3,i<this.#O&&(i=this.#O));i<=t;){if(s)return null;const e=await this.provider.getBlock(i,!0);if(null==e)return;for(const t of e)if(t===this.hash)return;for(let r=0;r<e.length;r++){const i=await e.getTransaction(r);if(i.from===this.from&&i.nonce===this.nonce){if(s)return null;const e=await this.provider.getTransactionReceipt(i.hash);if(null==e)return;if(t-e.blockNumber+1<n)return;let r="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?r="repriced":"0x"===i.data&&i.from===i.to&&i.value===Qo&&(r="cancelled"),ie(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===r||"cancelled"===r,reason:r,replacement:i.replaceableTransaction(o),hash:i.hash,receipt:e})}}i++}},c=await this.provider.getTransactionReceipt(this.hash);if(0===n)return c;if(c){if(await c.confirmations()>=n)return c}else if(await a(),0===n)return null;const u=new Promise(((t,e)=>{const i=[],c=()=>{i.forEach((t=>t()))};if(i.push((()=>{s=!0})),r>0){const t=setTimeout((()=>{c(),e(oe("wait for transaction timeout","TIMEOUT"))}),r);i.push((()=>{clearTimeout(t)}))}const u=async e=>{await e.confirmations()>=n&&(c(),t(e))};if(i.push((()=>{this.provider.off(this.hash,u)})),this.provider.on(this.hash,u),o>=0){const t=async()=>{try{await a()}catch(t){if(ne(t,"TRANSACTION_REPLACED"))return c(),void e(t)}s||this.provider.once("block",t)};i.push((()=>{this.provider.off("block",t)})),this.provider.once("block",t)}}));return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}removedEvent(){return ie(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ei(this)}reorderedEvent(t){return ie(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ie(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ti(this,t)}replaceableTransaction(t){se(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new $o(this,this.provider);return e.#O=t,e}}function ti(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function ei(t){return{orphan:"drop-transaction",tx:t}}class ni{filter;emitter;#P;constructor(t,e,n){this.#P=e,te(this,{emitter:t,filter:n})}async removeListener(){null!=this.#P&&await this.emitter.off(this.filter,this.#P)}}class ri extends Xo{interface;fragment;args;constructor(t,e,n){super(t,t.provider),te(this,{args:e.decodeEventLog(n,t.data,t.topics),fragment:n,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class oi extends Zo{#k;constructor(t,e,n){super(n,e),this.#k=t}get logs(){return super.logs.map((t=>{const e=t.topics.length?this.#k.getEvent(t.topics[0]):null;return e?new ri(t,this.#k,e):t}))}}class ii extends $o{#k;constructor(t,e,n){super(n,e),this.#k=t}async wait(t){const e=await super.wait(t);return null==e?null:new oi(this.#k,this.provider,e)}}class si extends ni{log;constructor(t,e,n,r){super(t,e,n),te(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class ai extends si{constructor(t,e,n,r,o){super(t,e,n,new ri(o,t.interface,r)),te(this,{args:t.interface.decodeEventLog(r,this.log.data,this.log.topics),fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const ci=BigInt(0);function ui(t){return t&&"function"==typeof t.call}function li(t){return t&&"function"==typeof t.estimateGas}function fi(t){return t&&"function"==typeof t.resolveName}function hi(t){return t&&"function"==typeof t.sendTransaction}class pi{#C;fragment;constructor(t,e,n){if(te(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const r=di(t.runner,"resolveName"),o=fi(r)?r:null;this.#C=async function(){const r=await Promise.all(e.inputs.map(((t,e)=>null==n[e]?null:t.walkAsync(n[e],((t,e)=>"address"===t?Array.isArray(e)?Promise.all(e.map((t=>wo(t,o)))):wo(e,o):e)))));return t.interface.encodeFilterTopics(e,r)}()}getTopicFilter(){return this.#C}}function di(t,e){return null==t?null:"function"==typeof t[e]?t:t.provider&&"function"==typeof t.provider[e]?t.provider:null}function yi(t){return null==t?null:t.provider||null}async function gi(t,e){const n=Yo($n.dereference(t,"overrides"));return se(null==n.to||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),se(null==n.data||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=await wo(n.from)),n}function mi(t){const e=async function(e){const n=await gi(e,["data"]);n.to=await t.getAddress();const r=t.interface,o=Ce(n.value||ci,"overrides.value")===ci,i="0x"===(n.data||"0x");return!r.fallback||r.fallback.payable||!r.receive||i||o||se(!1,"cannot send data to receive or send value to non-payable fallback","overrides",e),se(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),se(r.receive||r.fallback&&r.fallback.payable||o,"cannot send value to non-payable fallback","overrides.value",n.value),se(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const r=t.runner;ie(hi(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const o=await r.sendTransaction(await e(n)),i=yi(t.runner);return new ii(t.interface,i,o)},r=async t=>await n(t);return te(r,{_contract:t,estimateGas:async function(n){const r=di(t.runner,"estimateGas");return ie(li(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await e(n))},populateTransaction:e,send:n,staticCall:async function(n){const r=di(t.runner,"call");ie(ui(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const o=await e(n);try{return await r.call(o)}catch(e){if(re(e)&&e.data)throw t.interface.makeError(e.data,o);throw e}}}),r}const vi=Symbol.for("_ethersInternal_contract"),bi=new WeakMap;function wi(t){return bi.get(t[vi])}async function Ai(t,e){let n,r=null;if(Array.isArray(e)){const r=function(e){if(pe(e,32))return e;const n=t.interface.getEvent(e);return se(n,"unknown fragment","name",e),n.topicHash};n=e.map((t=>null==t?null:Array.isArray(t)?t.map(r):r(t)))}else"*"===e?n=[null]:"string"==typeof e?pe(e,32)?n=[e]:(r=t.interface.getEvent(e),se(r,"unknown fragment","event",e),n=[r.topicHash]):(o=e)&&"object"==typeof o&&"getTopicFilter"in o&&"function"==typeof o.getTopicFilter&&o.fragment?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):se(!1,"unknown event name","event",e);var o;return n=n.map((t=>{if(null==t)return null;if(Array.isArray(t)){const e=Array.from(new Set(t.map((t=>t.toLowerCase()))).values());return 1===e.length?e[0]:(e.sort(),e)}return t.toLowerCase()})),{fragment:r,tag:n.map((t=>null==t?"null":Array.isArray(t)?t.join("|"):t)).join("&"),topics:n}}async function Ei(t,e){const{subs:n}=wi(t);return n.get((await Ai(t,e)).tag)||null}async function Oi(t,e,n){const r=yi(t.runner);ie(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:o,tag:i,topics:s}=await Ai(t,n),{addr:a,subs:c}=wi(t);let u=c.get(i);if(!u){const e={address:a||t,topics:s},l=e=>{let r=o;if(null==r)try{r=t.interface.getEvent(e.topics[0])}catch(t){}if(r){const i=r,s=o?t.interface.decodeEventLog(o,e.data,e.topics):[];ki(t,n,s,(r=>new ai(t,r,n,i,e)))}else ki(t,n,[],(r=>new si(t,r,n,e)))};let f=[];u={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(e,l))},stop:async()=>{if(0==f.length)return;let t=f;f=[],await Promise.all(t),r.off(e,l)}},c.set(i,u)}return u}let Pi=Promise.resolve();async function ki(t,e,n,r){try{await Pi}catch(t){}const o=async function(t,e,n,r){await Pi;const o=await Ei(t,e);if(!o)return!1;const i=o.listeners.length;return o.listeners=o.listeners.filter((({listener:e,once:o})=>{const i=Array.from(n);r&&i.push(r(o?null:e));try{e.call(t,...i)}catch(t){}return!o})),0===o.listeners.length&&(o.stop(),wi(t).subs.delete(o.tag)),i>0}(t,e,n,r);return Pi=o,await o}const Ci=["then"];class xi{target;interface;runner;filters;[vi];fallback;constructor(t,e,n,r){se("string"==typeof t||vo(t),"invalid value for Contract target","target",t),null==n&&(n=null);const o=Vo.from(e);let i;te(this,{target:t,runner:n,interface:o}),Object.defineProperty(this,vi,{value:{}});let s=null,a=null;if(r){const t=yi(n);a=new ii(this.interface,t,r)}let c=new Map;if("string"==typeof t)if(pe(t))s=t,i=Promise.resolve(t);else{const e=di(n,"resolveName");if(!fi(e))throw oe("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=e.resolveName(t).then((e=>{if(null==e)throw oe("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return wi(this).addr=e,e}))}else i=t.getAddress().then((t=>{if(null==t)throw new Error("TODO");return wi(this).addr=t,t}));!function(t,e){bi.set(t[vi],e)}(this,{addrPromise:i,addr:s,deployTx:a,subs:c});const u=new Proxy({},{get:(t,e,n)=>{if(Ci.indexOf(e)>=0)return Reflect.get(t,e,n);const r=String(e),o=this.getEvent(r);if(o)return o;throw new Error(`unknown contract event: ${r}`)},has:(t,e)=>Ci.indexOf(e)>=0?Reflect.has(t,e):Reflect.has(t,e)||this.interface.hasEvent(String(e))});return te(this,{filters:u}),te(this,{fallback:o.receive||o.fallback?mi(this):null}),new Proxy(this,{get:(t,e,n)=>{if(e in t||Ci.indexOf(e)>=0||"symbol"==typeof e)return Reflect.get(t,e,n);const r=String(e),o=t.getFunction(r);if(o)return o;throw new Error(`unknown contract method: ${r}`)},has:(t,e)=>e in t||Ci.indexOf(e)>=0||"symbol"==typeof e?Reflect.has(t,e):t.interface.hasFunction(String(e))})}connect(t){return new xi(this.target,this.interface,t)}attach(t){return new xi(t,this.interface,this.runner)}async getAddress(){return await wi(this).addrPromise}async getDeployedCode(){const t=yi(this.runner);ie(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return"0x"===e?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(null!=await this.getDeployedCode())return this;const e=yi(this.runner);return ie(null!=e,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise(((t,n)=>{const r=async()=>{try{if(null!=await this.getDeployedCode())return t(this);e.once("block",r)}catch(t){n(t)}};r()}))}deploymentTransaction(){return wi(this).deployTx}getFunction(t){return"string"!=typeof t&&(t=t.format()),function(t,e){const n=function(...n){const r=t.interface.getFunction(e,n);return ie(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:n}}),r},r=async function(...e){const r=n(...e);let o={};if(r.inputs.length+1===e.length&&(o=await gi(e.pop())),r.inputs.length!==e.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const i=await async function(t,e,n){const r=di(t,"resolveName"),o=fi(r)?r:null;return await Promise.all(e.map(((t,e)=>t.walkAsync(n[e],((t,e)=>(e=$n.dereference(e,t),"address"===t?wo(e,o):e))))))}(t.runner,r.inputs,e);return Object.assign({},o,await $t({to:t.getAddress(),data:t.interface.encodeFunctionData(r,i)}))},o=async function(...t){const e=await s(...t);return 1===e.length?e[0]:e},i=async function(...e){const n=t.runner;ie(hi(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const o=await n.sendTransaction(await r(...e)),i=yi(t.runner);return new ii(t.interface,i,o)},s=async function(...e){const o=di(t.runner,"call");ie(ui(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await r(...e);let s="0x";try{s=await o.call(i)}catch(e){if(re(e)&&e.data)throw t.interface.makeError(e.data,i);throw e}const a=n(...e);return t.interface.decodeFunctionResult(a,s)},a=async(...t)=>n(...t).constant?await o(...t):await i(...t);return te(a,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:async function(...e){const n=di(t.runner,"estimateGas");return ie(li(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await r(...e))},populateTransaction:r,send:i,staticCall:o,staticCallResult:s}),Object.defineProperty(a,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=t.interface.getFunction(e);return ie(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),n}}),a}(this,t)}getEvent(t){return"string"!=typeof t&&(t=t.format()),function(t,e){const n=function(...n){const r=t.interface.getEvent(e,n);return ie(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:n}}),r},r=function(...e){return new pi(t,n(...e),e)};return te(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=t.interface.getEvent(e);return ie(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),n}}),r}(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){null==e&&(e=0),null==n&&(n="latest");const{addr:r,addrPromise:o}=wi(this),i=r||await o,{fragment:s,topics:a}=await Ai(this,t),c={address:i,topics:a,fromBlock:e,toBlock:n},u=yi(this.runner);return ie(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map((t=>{let e=s;if(null==e)try{e=this.interface.getEvent(t.topics[0])}catch(t){}if(e)try{return new ri(t,this.interface,e)}catch(t){}return new Xo(t,u)}))}async on(t,e){const n=await Oi(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await Oi(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await ki(this,t,e,null)}async listenerCount(t){if(t){const e=await Ei(this,t);return e?e.listeners.length:0}const{subs:e}=wi(this);let n=0;for(const{listeners:t}of e.values())n+=t.length;return n}async listeners(t){if(t){const e=await Ei(this,t);return e?e.listeners.map((({listener:t})=>t)):[]}const{subs:e}=wi(this);let n=[];for(const{listeners:t}of e.values())n=n.concat(t.map((({listener:t})=>t)));return n}async off(t,e){const n=await Ei(this,t);if(!n)return this;if(e){const t=n.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&n.listeners.splice(t,1)}return null!=e&&0!==n.listeners.length||(n.stop(),wi(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await Ei(this,t);if(!e)return this;e.stop(),wi(this).subs.delete(e.tag)}else{const{subs:t}=wi(this);for(const{tag:e,stop:n}of t.values())n(),t.delete(e)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){return class extends xi{constructor(e,n=null){super(e,t,n)}}}static from(t,e,n){return null==n&&(n=null),new this(t,e,n)}}class Si extends(function(){return xi}()){}function Ti(t){return function(t){let e=0;return()=>t[e++]}(function(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),o=1,i=[0,1];for(let t=1;t<r;t++)i.push(o+=n());let s=n(),a=e;e+=s;let c=0,u=0;function l(){return 0==c&&(u=u<<8|t[e++],c=8),u>>--c&1}const f=2**31,h=f>>>1,p=f-1;let d=0;for(let t=0;t<31;t++)d=d<<1|l();let y=[],g=0,m=f;for(;;){let t=Math.floor(((d-g+1)*o-1)/m),e=0,n=r;for(;n-e>1;){let r=e+n>>>1;t<i[r]?n=r:e=r}if(0==e)break;y.push(e);let s=g+Math.floor(m*i[e]/o),a=g+Math.floor(m*i[e+1]/o)-1;for(;0==((s^a)&h);)d=d<<1&p|l(),s=s<<1&p,a=a<<1&p|1;for(;s&~a&536870912;)d=d&h|d<<1&p>>>1|l(),s=s<<1^h,a=(a^h)<<1|h|1;g=s,m=1+a-s}let v=r-4;return y.map((e=>{switch(e-v){case 3:return v+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return v+256+(t[a++]<<8|t[a++]);case 1:return v+t[a++];default:return e-1}}))}(function(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((t,n)=>e[t.charCodeAt(0)]=n));let n=t.length,r=new Uint8Array(6*n>>3);for(let o=0,i=0,s=0,a=0;o<n;o++)a=a<<6|e[t.charCodeAt(o)],s+=6,s>=8&&(r[i++]=a>>(s-=8));return r}(t)))}function ji(t){return 1&t?~t>>1:t>>1}function Ri(t,e){let n=Array(t);for(let r=0,o=0;r<t;r++)n[r]=o+=ji(e());return n}function Bi(t,e=0){let n=[];for(;;){let r=t(),o=t();if(!o)break;e+=r;for(let t=0;t<o;t++)n.push(e+t);e+=o+1}return n}function Ii(t){return Li((()=>{let e=Bi(t);if(e.length)return e}))}function Ni(t){let e=[];for(;;){let n=t();if(0==n)break;e.push(Ui(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(Di(n,t))}return e.flat()}function Li(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function _i(t,e,n){let r=Array(t).fill().map((()=>[]));for(let o=0;o<e;o++)Ri(t,n).forEach(((t,e)=>r[e].push(t)));return r}function Ui(t,e){let n=1+e(),r=e(),o=Li(e);return _i(o.length,1+t,e).flatMap(((t,e)=>{let[i,...s]=t;return Array(o[e]).fill().map(((t,e)=>{let o=e*r;return[i+e*n,s.map((t=>t+o))]}))}))}function Di(t,e){return _i(1+e(),1+t,e).map((t=>[t[0],t.slice(1)]))}var Fi=Ti("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");const Mi=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Gi=4;function Hi(t){return`{${function(t){return t.toString(16).toUpperCase().padStart(2,"0")}(t)}}`}function zi(t){let e=t.length;if(e<4096)return String.fromCodePoint(...t);let n=[];for(let r=0;r<e;)n.push(String.fromCodePoint(...t.slice(r,r+=4096)));return n.join("")}var Vi=Ti("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");function Qi(t){return t>>24&255}function Ji(t){return 16777215&t}const Ki=new Map(Ii(Vi).flatMap(((t,e)=>t.map((t=>[t,e+1<<24]))))),qi=new Set(Bi(Vi)),Yi=new Map,Wi=new Map;for(let[t,e]of Ni(Vi)){if(!qi.has(t)&&2==e.length){let[n,r]=e,o=Wi.get(n);o||(o=new Map,Wi.set(n,o)),o.set(r,t)}Yi.set(t,e.reverse())}const Xi=44032,Zi=4352,$i=4449,ts=4519,es=28,ns=21*es,rs=Xi+19*ns,os=Zi+19,is=$i+21,ss=ts+es;function as(t){return t>=Xi&&t<rs}function cs(t,e){if(t>=Zi&&t<os&&e>=$i&&e<is)return Xi+(t-Zi)*ns+(e-$i)*es;if(as(t)&&e>ts&&e<ss&&(t-Xi)%es==0)return t+(e-ts);{let n=Wi.get(t);return n&&(n=n.get(e),n)?n:-1}}function us(t){let e=[],n=[],r=!1;function o(t){let n=Ki.get(t);n&&(r=!0,t|=n),e.push(t)}for(let r of t)for(;;){if(r<128)e.push(r);else if(as(r)){let t=r-Xi,e=t%ns/es|0,n=t%es;o(Zi+(t/ns|0)),o($i+e),n>0&&o(ts+n)}else{let t=Yi.get(r);t?n.push(...t):o(r)}if(!n.length)break;r=n.pop()}if(r&&e.length>1){let t=Qi(e[0]);for(let n=1;n<e.length;n++){let r=Qi(e[n]);if(0==r||t<=r){t=r;continue}let o=n-1;for(;;){let n=e[o+1];if(e[o+1]=e[o],e[o]=n,!o)break;if(t=Qi(e[--o]),t<=r)break}t=Qi(e[n])}}return e}function ls(t){return us(t).map(Ji)}function fs(t){return function(t){let e=[],n=[],r=-1,o=0;for(let i of t){let t=Qi(i),s=Ji(i);if(-1==r)0==t?r=s:e.push(s);else if(o>0&&o>=t)0==t?(e.push(r,...n),n.length=0,r=s):n.push(s),o=t;else{let i=cs(r,s);i>=0?r=i:0==o&&0==t?(e.push(r),r=s):(n.push(s),o=t)}}return r>=0&&e.push(r,...n),e}(us(t))}const hs=65039,ps=".",ds=1,ys=45;function gs(){return new Set(Bi(Fi))}const ms=new Map(Ni(Fi)),vs=gs(),bs=gs(),ws=new Set(Bi(Fi).map((function(t){return this[t]}),[...bs])),As=gs(),Es=(gs(),Ii(Fi));function Os(){return new Set([Bi(Fi).map((t=>Es[t])),Bi(Fi)].flat(2))}const Ps=Fi(),ks=Li((t=>{let e=Li(Fi).map((t=>t+96));if(e.length){let n=t>=Ps;e[0]-=32,e=zi(e),n&&(e=`Restricted[${e}]`);let r=Os(),o=Os(),i=[...r,...o].sort(((t,e)=>t-e));return{N:e,P:r,M:!Fi(),R:n,V:new Set(i)}}})),Cs=gs(),xs=new Map;[...Cs,...gs()].sort(((t,e)=>t-e)).map(((t,e,n)=>{let r=Fi(),o=n[e]=r?n[e-r]:{V:[],M:new Map};o.V.push(t),Cs.has(t)||xs.set(t,o)}));for(let{V:t,M:e}of new Set(xs.values())){let n=[];for(let e of t){let t=ks.filter((t=>t.V.has(e))),r=n.find((({G:e})=>t.some((t=>e.has(t)))));r||(r={G:new Set,V:[]},n.push(r)),r.V.push(e),t.forEach((t=>r.G.add(t)))}let r=n.flatMap((({G:t})=>[...t]));for(let{G:t,V:o}of n){let n=new Set(r.filter((e=>!t.has(e))));for(let t of o)e.set(t,n)}}let Ss=new Set,Ts=new Set;for(let t of ks)for(let e of t.V)(Ss.has(e)?Ts:Ss).add(e);for(let t of Ss)xs.has(t)||Ts.has(t)||xs.set(t,ds);const js=new Set([...Ss,...ls(Ss)]),Rs=Bi(Fi),Bs=function t(e){let n=Li((()=>{let e=Bi(Fi).map((t=>Rs[t]));if(e.length)return t(e)})).sort(((t,e)=>e.Q.size-t.Q.size)),r=Fi(),o=r%3;r=r/3|0;let i=1&r;return r>>=1,{B:n,V:o,F:i,S:1&r,C:2&r,Q:new Set(e)}}([]);class Is extends Array{get is_emoji(){return!0}}function Ns(t,e=Hi){let n=[];var r;r=t[0],bs.has(r)&&n.push("◌");let o=0,i=t.length;for(let r=0;r<i;r++){let i=t[r];Ds(i)&&(n.push(zi(t.slice(o,r))),n.push(e(i)),o=r+1)}return n.push(zi(t.slice(o,i))),n.join("")}function Ls(t){return(Ds(t)?"":`${_s(Ns([t]))} `)+Hi(t)}function _s(t){return`"${t}"‎`}function Us(t){for(let e=t.lastIndexOf(95);e>0;)if(95!==t[--e])throw new Error("underscore allowed only at start")}function Ds(t){return As.has(t)}function Fs(t,e){let n=0;return t.split(ps).map((t=>{let r,o=function(t){let e=[];for(let n=0,r=t.length;n<r;){let r=t.codePointAt(n);n+=r<65536?1:2,e.push(r)}return e}(t),i={input:o,offset:n};n+=o.length+1;try{let t,n=i.tokens=function(t,e){let n=[],r=[];for(t=t.slice().reverse();t.length;){let o=zs(t);if(o)r.length&&(n.push(e(r)),r=[]),n.push(o);else{let e=t.pop();if(js.has(e))r.push(e);else{let t=ms.get(e);if(t)r.push(...t);else if(!vs.has(e))throw Ms(e)}}}return r.length&&n.push(e(r)),n}(o,fs),s=n.length;if(!s)throw new Error("empty label");{let o=n[0],a=s>1||o.is_emoji;if(!a&&o.every((t=>t<128)))r=o,Us(r),function(t){if(t.length>=4&&t[2]==ys&&t[3]==ys)throw new Error("invalid label extension")}(r),t="ASCII";else if(a&&(i.emoji=!0,o=n.flatMap((t=>t.is_emoji?[]:t))),r=n.flatMap((t=>!e&&t.is_emoji?t.filter((t=>t!=hs)):t)),Us(r),o.length){if(bs.has(r[0]))throw Hs("leading combining mark");for(let t=1;t<s;t++){let e=n[t];if(!e.is_emoji&&bs.has(e[0]))throw Hs(`emoji + combining mark: "${zi(n[t-1])} + ${Ns([e[0]])}"`)}!function(t){let e=t[0],n=Mi.get(e);if(n)throw Hs(`leading ${n}`);let r=t.length,o=-1;for(let i=1;i<r;i++){e=t[i];let r=Mi.get(e);if(r){if(o==i)throw Hs(`${n} + ${r}`);o=i+1,n=r}}if(o==r)throw Hs(`trailing ${n}`)}(r);let e=[...new Set(o)],[i]=function(t){let e=ks;for(let n of t){let t=e.filter((t=>t.V.has(n)));if(!t.length)throw e===ks?Ms(n):Gs(e[0],n);if(e=t,1==t.length)break}return e}(e);!function(t,e){let{V:n,M:r}=t;for(let r of e)if(!n.has(r))throw Gs(t,r);if(r){let t=ls(e);for(let e=1,n=t.length;e<n;e++)if(ws.has(t[e])){let r=e+1;for(let o;r<n&&ws.has(o=t[r]);r++)for(let n=e;n<r;n++)if(t[n]==o)throw new Error(`non-spacing marks: repeated ${Ls(o)}`);if(r-e>Gi)throw new Error(`non-spacing marks: too many ${_s(Ns(t.slice(e-1,r)))} (${r-e}/${Gi})`);e=r}}}(i,o),function(t,e){let n,r=[];for(let t of e){let e=xs.get(t);if(e===ds)return;if(e){let r=e.M.get(t);if(n=n?n.filter((t=>r.has(t))):[...r],!n.length)return}else r.push(t)}if(n)for(let e of n)if(r.every((t=>e.V.has(t))))throw new Error(`whole-script confusable: ${t.N}/${e.N}`)}(i,e),t=i.N}else t="Emoji"}i.type=t}catch(t){i.error=t}return i.output=r,i}))}function Ms(t){return new Error(`disallowed character: ${Ls(t)}`)}function Gs(t,e){let n=Ls(e),r=ks.find((t=>t.P.has(e)));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function Hs(t){return new Error(`illegal placement: ${t}`)}function zs(t,e){let n,r,o=Bs,i=[],s=t.length;for(e&&(e.length=0);s;){let a=t[--s];if(o=o.B.find((t=>t.Q.has(a))),!o)break;if(o.S)r=a;else if(o.C&&a===r)break;i.push(a),o.F&&(i.push(hs),s>0&&t[s-1]==hs&&s--),o.V&&(n=Vs(i,o),e&&e.push(...t.slice(s).reverse()),t.length=s)}return n}function Vs(t,e){let n=Is.from(t);return 2==e.V&&n.splice(1,1),n}const Qs=new Uint8Array(32);function Js(t){return se(0!==t.length,"invalid ENS name; empty component","comp",t),t}function Ks(t){const e=mr(function(t){try{return function(t){return(e=Fs(t)).map((({input:t,error:n,output:r})=>{if(n){let r=n.message;throw new Error(1==e.length?r:`Invalid label ${_s(Ns(t))}: ${r}`)}return zi(r)})).join(ps);var e}(t)}catch(e){se(!1,`invalid ENS name (${e.message})`,"name",t)}}(t)),n=[];if(0===t.length)return n;let r=0;for(let t=0;t<e.length;t++)46===e[t]&&(n.push(Js(e.slice(r,t))),r=t+1);return se(r<e.length,"invalid ENS name; empty component","name",t),n.push(Js(e.slice(r))),n}function qs(t){se("string"==typeof t,"invalid ENS name; not a string","name",t);let e=Qs;const n=Ks(t);for(;n.length;)e=Gn(ge([e,Gn(n.pop())]));return ye(e)}Qs.fill(0);const Ys="0x0000000000000000000000000000000000000000000000000000000000000000",Ws=BigInt(0),Xs=BigInt(1),Zs=BigInt(2),$s=BigInt(27),ta=BigInt(28),ea=BigInt(35),na={};function ra(t){return we(Be(t),32)}class oa{#x;#S;#T;#j;get r(){return this.#x}set r(t){se(32===me(t),"invalid r","value",t),this.#x=ye(t)}get s(){return this.#S}set s(t){se(32===me(t),"invalid s","value",t);const e=ye(t);se(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),this.#S=e}get v(){return this.#T}set v(t){const e=je(t,"value");se(27===e||28===e,"invalid v","v",t),this.#T=e}get networkV(){return this.#j}get legacyChainId(){const t=this.networkV;return null==t?null:oa.getChainId(t)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const t=fe(this.s);return this.yParity&&(t[0]|=128),ye(t)}get compactSerialized(){return ge([this.r,this.yParityAndS])}get serialized(){return ge([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,n,r){ue(t,na,"Signature"),this.#x=e,this.#S=n,this.#T=r,this.#j=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new oa(na,this.r,this.s,this.v);return this.networkV&&(t.#j=this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=Ce(t,"v");return e==$s||e==ta?Ws:(se(e>=ea,"invalid EIP-155 v","v",t),(e-ea)/Zs)}static getChainIdV(t,e){return Ce(t)*Zs+BigInt(35+e-27)}static getNormalizedV(t){const e=Ce(t);return e===Ws||e===$s?27:e===Xs||e===ta?28:(se(e>=ea,"invalid v","v",t),e&Xs?27:28)}static from(t){function e(e,n){se(e,n,"signature",t)}if(null==t)return new oa(na,Ys,Ys,27);if("string"==typeof t){const n=fe(t,"signature");if(64===n.length){const t=ye(n.slice(0,32)),e=n.slice(32,64),r=128&e[0]?28:27;return e[0]&=127,new oa(na,t,ye(e),r)}if(65===n.length){const t=ye(n.slice(0,32)),r=n.slice(32,64);e(0==(128&r[0]),"non-canonical s");const o=oa.getNormalizedV(n[64]);return new oa(na,t,ye(r),o)}e(!1,"invalid raw signature length")}if(t instanceof oa)return t.clone();const n=t.r;e(null!=n,"missing r");const r=ra(n),o=function(t,n){if(null!=t)return ra(t);if(null!=n){e(pe(n,32),"invalid yParityAndS");const t=fe(n);return t[0]&=127,ye(t)}e(!1,"missing s")}(t.s,t.yParityAndS);e(0==(128&fe(o)[0]),"non-canonical s");const{networkV:i,v:s}=function(t,n,r){if(null!=t){const e=Ce(t);return{networkV:e>=ea?e:void 0,v:oa.getNormalizedV(e)}}if(null!=n)return e(pe(n,32),"invalid yParityAndS"),{v:128&fe(n)[0]?28:27};if(null!=r){switch(je(r,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),a=new oa(na,r,o,s);return i&&(a.#j=i),e(null==t.yParity||je(t.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),e(null==t.yParityAndS||t.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}var ia=s(856),sa=s.t(ia,2);const aa=BigInt(0),ca=BigInt(1),ua=BigInt(2),la=BigInt(3),fa=BigInt(8),ha=Object.freeze({a:aa,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ca,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),pa=(t,e)=>(t+e/ua)/e,da={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=ha,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ca*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),a=pa(i*t,e),c=pa(-r*t,e);let u=Ha(t-a*n-c*o,e),l=Ha(-a*r-c*i,e);const f=u>s,h=l>s;if(f&&(u=e-u),h&&(l=e-l),u>s||l>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:f,k1:u,k2neg:h,k2:l}}},ya=32,ga=32,ma=ya+1,va=2*ya+1;function ba(t){const{a:e,b:n}=ha,r=Ha(t*t),o=Ha(r*t);return Ha(o+e*t+n)}const wa=ha.a===aa;class Aa extends Error{constructor(t){super(t)}}function Ea(t){if(!(t instanceof Oa))throw new TypeError("JacobianPoint expected")}class Oa{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromAffine(t){if(!(t instanceof Ca))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Ca.ZERO)?Oa.ZERO:new Oa(t.x,t.y,ca)}static toAffineBatch(t){const e=function(t,e=ha.P){const n=new Array(t.length),r=Va(t.reduce(((t,r,o)=>r===aa?t:(n[o]=t,Ha(t*r,e))),ca),e);return t.reduceRight(((t,r,o)=>r===aa?t:(n[o]=Ha(t*n[o],e),Ha(t*r,e))),r),n}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return Oa.toAffineBatch(t).map(Oa.fromAffine)}equals(t){Ea(t);const{x:e,y:n,z:r}=this,{x:o,y:i,z:s}=t,a=Ha(r*r),c=Ha(s*s),u=Ha(e*c),l=Ha(o*a),f=Ha(Ha(n*s)*c),h=Ha(Ha(i*r)*a);return u===l&&f===h}negate(){return new Oa(this.x,Ha(-this.y),this.z)}double(){const{x:t,y:e,z:n}=this,r=Ha(t*t),o=Ha(e*e),i=Ha(o*o),s=t+o,a=Ha(ua*(Ha(s*s)-r-i)),c=Ha(la*r),u=Ha(c*c),l=Ha(u-ua*a),f=Ha(c*(a-l)-fa*i),h=Ha(ua*e*n);return new Oa(l,f,h)}add(t){Ea(t);const{x:e,y:n,z:r}=this,{x:o,y:i,z:s}=t;if(o===aa||i===aa)return this;if(e===aa||n===aa)return t;const a=Ha(r*r),c=Ha(s*s),u=Ha(e*c),l=Ha(o*a),f=Ha(Ha(n*s)*c),h=Ha(Ha(i*r)*a),p=Ha(l-u),d=Ha(h-f);if(p===aa)return d===aa?this.double():Oa.ZERO;const y=Ha(p*p),g=Ha(p*y),m=Ha(u*y),v=Ha(d*d-g-ua*m),b=Ha(d*(m-v)-f*g),w=Ha(r*s*p);return new Oa(v,b,w)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=Oa.ZERO;if("bigint"==typeof t&&t===aa)return e;let n=Ga(t);if(n===ca)return this;if(!wa){let t=e,r=this;for(;n>aa;)n&ca&&(t=t.add(r)),r=r.double(),n>>=ca;return t}let{k1neg:r,k1:o,k2neg:i,k2:s}=da.splitScalar(n),a=e,c=e,u=this;for(;o>aa||s>aa;)o&ca&&(a=a.add(u)),s&ca&&(c=c.add(u)),u=u.double(),o>>=ca,s>>=ca;return r&&(a=a.negate()),i&&(c=c.negate()),c=new Oa(Ha(c.x*da.beta),c.y,c.z),a.add(c)}precomputeWindow(t){const e=wa?128/t+1:256/t+1,n=[];let r=this,o=r;for(let i=0;i<e;i++){o=r,n.push(o);for(let e=1;e<2**(t-1);e++)o=o.add(r),n.push(o);r=o.double()}return n}wNAF(t,e){!e&&this.equals(Oa.BASE)&&(e=Ca.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&ka.get(e);r||(r=this.precomputeWindow(n),e&&1!==n&&(r=Oa.normalizeZ(r),ka.set(e,r)));let o=Oa.ZERO,i=Oa.BASE;const s=1+(wa?128/n:256/n),a=2**(n-1),c=BigInt(2**n-1),u=2**n,l=BigInt(n);for(let e=0;e<s;e++){const n=e*a;let s=Number(t&c);t>>=l,s>a&&(s-=u,t+=ca);const f=n,h=n+Math.abs(s)-1,p=e%2!=0,d=s<0;0===s?i=i.add(Pa(p,r[f])):o=o.add(Pa(d,r[h]))}return{p:o,f:i}}multiply(t,e){let n,r,o=Ga(t);if(wa){const{k1neg:t,k1:i,k2neg:s,k2:a}=da.splitScalar(o);let{p:c,f:u}=this.wNAF(i,e),{p:l,f}=this.wNAF(a,e);c=Pa(t,c),l=Pa(s,l),l=new Oa(Ha(l.x*da.beta),l.y,l.z),n=c.add(l),r=u.add(f)}else{const{p:t,f:i}=this.wNAF(o,e);n=t,r=i}return Oa.normalizeZ([n,r])[0]}toAffine(t){const{x:e,y:n,z:r}=this,o=this.equals(Oa.ZERO);null==t&&(t=o?fa:Va(r));const i=t,s=Ha(i*i),a=Ha(s*i),c=Ha(e*s),u=Ha(n*a),l=Ha(r*i);if(o)return Ca.ZERO;if(l!==ca)throw new Error("invZ was invalid");return new Ca(c,u)}}function Pa(t,e){const n=e.negate();return t?n:e}Oa.BASE=new Oa(ha.Gx,ha.Gy,ca),Oa.ZERO=new Oa(aa,ca,aa);const ka=new WeakMap;class Ca{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,ka.delete(this)}hasEvenY(){return this.y%ua===aa}static fromCompressedHex(t){const e=32===t.length,n=Fa(e?t:t.subarray(1));if(!Wa(n))throw new Error("Point is not on curve");let r=function(t){const{P:e}=ha,n=BigInt(6),r=BigInt(11),o=BigInt(22),i=BigInt(23),s=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,l=za(u,la)*u%e,f=za(l,la)*u%e,h=za(f,ua)*c%e,p=za(h,r)*h%e,d=za(p,o)*p%e,y=za(d,s)*d%e,g=za(y,a)*y%e,m=za(g,s)*d%e,v=za(m,la)*u%e,b=za(v,i)*p%e,w=za(b,n)*c%e,A=za(w,ua);if(A*A%e!==t)throw new Error("Cannot find square root");return A}(ba(n));const o=(r&ca)===ca;e?o&&(r=Ha(-r)):1==(1&t[0])!==o&&(r=Ha(-r));const i=new Ca(n,r);return i.assertValidity(),i}static fromUncompressedHex(t){const e=Fa(t.subarray(1,ya+1)),n=Fa(t.subarray(ya+1,2*ya+1)),r=new Ca(e,n);return r.assertValidity(),r}static fromHex(t){const e=Ma(t),n=e.length,r=e[0];if(n===ya)return this.fromCompressedHex(e);if(n===ma&&(2===r||3===r))return this.fromCompressedHex(e);if(n===va&&4===r)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${ma} compressed bytes or ${va} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return Ca.BASE.multiply(Za(t))}static fromSignature(t,e,n){const{r,s:o}=function(t){if(t instanceof Ta)return t.assertValidity(),t;try{return Ta.fromDER(t)}catch(e){return Ta.fromCompact(t)}}(e);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const i=Qa(Ma(t)),{n:s}=ha,a=2===n||3===n?r+s:r,c=Va(a,s),u=Ha(-i*c,s),l=Ha(o*c,s),f=1&n?"03":"02",h=Ca.fromHex(f+Na(a)),p=Ca.BASE.multiplyAndAddUnsafe(h,u,l);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(t=!1){return Da(this.toHex(t))}toHex(t=!1){const e=Na(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${Na(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:n}=this;if(!Wa(e)||!Wa(n))throw new Error(t);const r=Ha(n*n);if(Ha(r-ba(e))!==aa)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new Ca(this.x,Ha(-this.y))}double(){return Oa.fromAffine(this).double().toAffine()}add(t){return Oa.fromAffine(this).add(Oa.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Oa.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,n){const r=Oa.fromAffine(this),o=e===aa||e===ca||this!==Ca.BASE?r.multiplyUnsafe(e):r.multiply(e),i=Oa.fromAffine(t).multiplyUnsafe(n),s=o.add(i);return s.equals(Oa.ZERO)?void 0:s.toAffine()}}function xa(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Sa(t){if(t.length<2||2!==t[0])throw new Error(`Invalid signature integer tag: ${Ba(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Fa(n),left:t.subarray(e+2)}}Ca.BASE=new Ca(ha.Gx,ha.Gy),Ca.ZERO=new Ca(aa,aa);class Ta{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,n="Signature.fromCompact";if("string"!=typeof t&&!e)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=e?Ba(t):t;if(128!==r.length)throw new Error(`${n}: Expected 64-byte hex`);return new Ta(Ua(r.slice(0,64)),Ua(r.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if("string"!=typeof t&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=function(t){if(t.length<2||48!=t[0])throw new Error(`Invalid signature tag: ${Ba(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=Sa(t.subarray(2)),{data:r,left:o}=Sa(n);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${Ba(o)}`);return{r:e,s:r}}(e?t:Da(t));return new Ta(n,r)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!Ya(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Ya(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=ha.n>>ca;return this.s>t}normalizeS(){return this.hasHighS()?new Ta(this.r,Ha(-this.s,ha.n)):this}toDERRawBytes(){return Da(this.toDERHex())}toDERHex(){const t=xa(_a(this.s)),e=xa(_a(this.r)),n=t.length/2,r=e.length/2,o=_a(n),i=_a(r);return`30${_a(r+n+4)}02${i}${e}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Da(this.toCompactHex())}toCompactHex(){return Na(this.r)+Na(this.s)}}function ja(...t){if(!t.every((t=>t instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const o=t[e];n.set(o,r),r+=o.length}return n}const Ra=Array.from({length:256},((t,e)=>e.toString(16).padStart(2,"0")));function Ba(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=Ra[t[n]];return e}const Ia=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Na(t){if("bigint"!=typeof t)throw new Error("Expected bigint");if(!(aa<=t&&t<Ia))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function La(t){const e=Da(Na(t));if(32!==e.length)throw new Error("Error: expected 32 bytes");return e}function _a(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Ua(t){if("string"!=typeof t)throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function Da(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n,o=t.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function Fa(t){return Ua(Ba(t))}function Ma(t){return t instanceof Uint8Array?Uint8Array.from(t):Da(t)}function Ga(t){if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if("bigint"==typeof t&&Ya(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function Ha(t,e=ha.P){const n=t%e;return n>=aa?n:e+n}function za(t,e){const{P:n}=ha;let r=t;for(;e-- >aa;)r*=r,r%=n;return r}function Va(t,e=ha.P){if(t===aa||e<=aa)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Ha(t,e),r=e,o=aa,i=ca,s=ca,a=aa;for(;n!==aa;){const t=r/n,e=r%n,c=o-s*t,u=i-a*t;r=n,n=e,o=s,i=a,s=c,a=u}if(r!==ca)throw new Error("invert: does not exist");return Ha(o,e)}function Qa(t,e=!1){const n=function(t){const e=8*t.length-8*ga,n=Fa(t);return e>0?n>>BigInt(e):n}(t);if(e)return n;const{n:r}=ha;return n>=r?n-r:n}let Ja,Ka;class qa{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,"number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return ic.hmacSha256(this.k,...t)}hmacSync(...t){return Ka(this.k,...t)}checkSync(){if("function"!=typeof Ka)throw new Aa("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),0!==t.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),0!==t.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return ja(...e)}generateSync(){this.checkSync(),this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return ja(...e)}}function Ya(t){return aa<t&&t<ha.n}function Wa(t){return aa<t&&t<ha.P}function Xa(t,e,n,r=!0){const{n:o}=ha,i=Qa(t,!0);if(!Ya(i))return;const s=Va(i,o),a=Ca.BASE.multiply(i),c=Ha(a.x,o);if(c===aa)return;const u=Ha(s*Ha(e+n*c,o),o);if(u===aa)return;let l=new Ta(c,u),f=(a.x===l.r?0:2)|Number(a.y&ca);return r&&l.hasHighS()&&(l=l.normalizeS(),f^=1),{sig:l,recovery:f}}function Za(t){let e;if("bigint"==typeof t)e=t;else if("number"==typeof t&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if("string"==typeof t){if(t.length!==2*ga)throw new Error("Expected 32 bytes of private key");e=Ua(t)}else{if(!(t instanceof Uint8Array))throw new TypeError("Expected valid private key");if(t.length!==ga)throw new Error("Expected 32 bytes of private key");e=Fa(t)}if(!Ya(e))throw new Error("Expected private key: 0 < key < n");return e}function $a(t){const e=t instanceof Uint8Array,n="string"==typeof t,r=(e||n)&&t.length;return e?r===ma||r===va:n?r===2*ma||r===2*va:t instanceof Ca}function tc(t){return Fa(t.length>ya?t.slice(0,ya):t)}function ec(t){const e=tc(t),n=Ha(e,ha.n);return nc(n<aa?e:n)}function nc(t){return La(t)}Ca.BASE._setWindowSize(8);const rc={node:sa,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},oc={},ic={bytesToHex:Ba,hexToBytes:Da,concatBytes:ja,mod:Ha,invert:Va,isValidPrivateKey(t){try{return Za(t),!0}catch(t){return!1}},_bigintTo32Bytes:La,_normalizePrivateKey:Za,hashToPrivateKey:t=>{t=Ma(t);const e=ga+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return La(Ha(Fa(t),ha.n-ca)+ca)},randomBytes:(t=32)=>{if(rc.web)return rc.web.getRandomValues(new Uint8Array(t));if(rc.node){const{randomBytes:e}=rc.node;return Uint8Array.from(e(t))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>ic.hashToPrivateKey(ic.randomBytes(ga+8)),precompute(t=8,e=Ca.BASE){const n=e===Ca.BASE?e:new Ca(e.x,e.y);return n._setWindowSize(t),n.multiply(la),n},sha256:async(...t)=>{if(rc.web){const e=await rc.web.subtle.digest("SHA-256",ja(...t));return new Uint8Array(e)}if(rc.node){const{createHash:e}=rc.node,n=e("sha256");return t.forEach((t=>n.update(t))),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(rc.web){const n=await rc.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),r=ja(...e),o=await rc.web.subtle.sign("HMAC",n,r);return new Uint8Array(o)}if(rc.node){const{createHmac:n}=rc.node,r=n("sha256",t);return e.forEach((t=>r.update(t))),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=oc[t];if(void 0===n){const e=await ic.sha256(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=ja(e,e),oc[t]=n}return ic.sha256(n,...e)},taggedHashSync:(t,...e)=>{if("function"!=typeof Ja)throw new Aa("sha256Sync is undefined, you need to set it");let n=oc[t];if(void 0===n){const e=Ja(Uint8Array.from(t,(t=>t.charCodeAt(0))));n=ja(e,e),oc[t]=n}return Ja(n,...e)},_JacobianPoint:Oa};Object.defineProperties(ic,{sha256Sync:{configurable:!1,get:()=>Ja,set(t){Ja||(Ja=t)}},hmacSha256Sync:{configurable:!1,get:()=>Ka,set(t){Ka||(Ka=t)}}});class sc extends bn{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Ke.hash(t);const n=vn(e);if(this.iHash=t.create(),!(this.iHash instanceof bn))throw new TypeError("Expected instance of class which extends utils.Hash");const r=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const o=new Uint8Array(r);o.set(n.length>this.iHash.blockLen?t.create().update(n).digest():n);for(let t=0;t<o.length;t++)o[t]^=54;this.iHash.update(o),this.oHash=t.create();for(let t=0;t<o.length;t++)o[t]^=106;this.oHash.update(o),o.fill(0)}update(t){return Ke.exists(this),this.iHash.update(t),this}digestInto(t){Ke.exists(this),Ke.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return t.finished=r,t.destroyed=o,t.blockLen=i,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ac=(t,e,n)=>new sc(t,e).update(n).digest();ac.create=(t,e)=>new sc(t,e);class cc extends bn{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gn(this.buffer)}update(t){Ke.exists(this);const{view:e,buffer:n,blockLen:r}=this,o=(t=vn(t)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=gn(t);for(;r<=o-i;i+=r)this.process(e,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ke.exists(this),Ke.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let t=i;t<r;t++)e[t]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),o),this.process(n,0);const s=gn(t);this.get().forEach(((t,e)=>s.setUint32(4*e,t,o)))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return t.length=r,t.pos=s,t.finished=o,t.destroyed=i,r%e&&t.buffer.set(n),t}}const uc=(t,e,n)=>t&e^~t&n,lc=(t,e,n)=>t&e^t&n^e&n,fc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),hc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pc=new Uint32Array(64);class dc extends cc{constructor(){super(64,32,8,!1),this.A=0|hc[0],this.B=0|hc[1],this.C=0|hc[2],this.D=0|hc[3],this.E=0|hc[4],this.F=0|hc[5],this.G=0|hc[6],this.H=0|hc[7]}get(){const{A:t,B:e,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[t,e,n,r,o,i,s,a]}set(t,e,n,r,o,i,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(t,e){for(let n=0;n<16;n++,e+=4)pc[n]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=pc[t-15],n=pc[t-2],r=mn(e,7)^mn(e,18)^e>>>3,o=mn(n,17)^mn(n,19)^n>>>10;pc[t]=o+pc[t-7]+r+pc[t-16]|0}let{A:n,B:r,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let t=0;t<64;t++){const e=u+(mn(s,6)^mn(s,11)^mn(s,25))+uc(s,a,c)+fc[t]+pc[t]|0,l=(mn(n,2)^mn(n,13)^mn(n,22))+lc(n,r,o)|0;u=c,c=a,a=s,s=i+e|0,i=o,o=r,r=n,n=e+l|0}n=n+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,o,i,s,a,c,u)}roundClean(){pc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const yc=wn((()=>new dc)),[gc,mc]=Xe(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((t=>BigInt(t)))),vc=new Uint32Array(80),bc=new Uint32Array(80);class wc extends cc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:f,Gh:h,Gl:p,Hh:d,Hl:y}=this;return[t,e,n,r,o,i,s,a,c,u,l,f,h,p,d,y]}set(t,e,n,r,o,i,s,a,c,u,l,f,h,p,d,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|f,this.Gh=0|h,this.Gl=0|p,this.Hh=0|d,this.Hl=0|y}process(t,e){for(let n=0;n<16;n++,e+=4)vc[n]=t.getUint32(e),bc[n]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|vc[t-15],n=0|bc[t-15],r=tn(e,n,1)^tn(e,n,8)^Ze(e,n,7),o=en(e,n,1)^en(e,n,8)^$e(e,n,7),i=0|vc[t-2],s=0|bc[t-2],a=tn(i,s,19)^nn(i,s,61)^Ze(i,s,6),c=en(i,s,19)^rn(i,s,61)^$e(i,s,6),u=hn(o,c,bc[t-7],bc[t-16]),l=pn(u,r,a,vc[t-7],vc[t-16]);vc[t]=0|l,bc[t]=0|u}let{Ah:n,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:f,Fh:h,Fl:p,Gh:d,Gl:y,Hh:g,Hl:m}=this;for(let t=0;t<80;t++){const e=tn(l,f,14)^tn(l,f,18)^nn(l,f,41),v=en(l,f,14)^en(l,f,18)^rn(l,f,41),b=l&h^~l&d,w=yn(m,v,f&p^~f&y,mc[t],bc[t]),A=dn(w,g,e,b,gc[t],vc[t]),E=0|w,O=tn(n,r,28)^nn(n,r,34)^nn(n,r,39),P=en(n,r,28)^rn(n,r,34)^rn(n,r,39),k=n&o^n&s^o&s,C=r&i^r&a^i&a;g=0|d,m=0|y,d=0|h,y=0|p,h=0|l,p=0|f,({h:l,l:f}=un(0|c,0|u,0|A,0|E)),c=0|s,u=0|a,s=0|o,a=0|i,o=0|n,i=0|r;const x=ln(E,P,C);n=fn(x,A,O,k),r=0|x}({h:n,l:r}=un(0|this.Ah,0|this.Al,0|n,0|r)),({h:o,l:i}=un(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=un(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=un(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:f}=un(0|this.Eh,0|this.El,0|l,0|f)),({h,l:p}=un(0|this.Fh,0|this.Fl,0|h,0|p)),({h:d,l:y}=un(0|this.Gh,0|this.Gl,0|d,0|y)),({h:g,l:m}=un(0|this.Hh,0|this.Hl,0|g,0|m)),this.set(n,r,o,i,s,a,c,u,l,f,h,p,d,y,g,m)}roundClean(){vc.fill(0),bc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Ac extends wc{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Ec extends wc{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Oc=wn((()=>new wc));wn((()=>new Ac)),wn((()=>new Ec));const Pc=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();Pc.crypto||Pc.msCrypto;let kc=!1;const Cc=function(t,e,n){return function(t,e){const n={sha256:yc,sha512:Oc}[t];return se(null!=n,"invalid hmac algorithm","algorithm",t),ac.create(n,e)}(t,e).update(n).digest()};let xc=Cc;function Sc(t,e,n){const r=fe(e,"key"),o=fe(n,"data");return ye(xc(t,r,o))}Sc._=Cc,Sc.lock=function(){kc=!0},Sc.register=function(t){if(kc)throw new Error("computeHmac is locked");xc=t},Object.freeze(Sc),ic.hmacSha256Sync=function(t,...e){return fe(Sc("sha256",t,ge(e)))};class Tc{#R;constructor(t){se(32===me(t),"invalid private key","privateKey","[REDACTED]"),this.#R=ye(t)}get privateKey(){return this.#R}get publicKey(){return Tc.computePublicKey(this.#R)}get compressedPublicKey(){return Tc.computePublicKey(this.#R,!0)}sign(t){se(32===me(t),"invalid digest length","digest",t);const[e,n]=function(t,e,n={}){const{seed:r,m:o,d:i}=function(t,e,n){if(null==t)throw new Error(`sign: expected valid message hash, not "${t}"`);const r=Ma(t),o=Za(e),i=[nc(o),ec(r)];if(null!=n){!0===n&&(n=ic.randomBytes(ya));const t=Ma(n);if(t.length!==ya)throw new Error(`sign: Expected ${ya} bytes of extra data`);i.push(t)}return{seed:ja(...i),m:tc(r),d:o}}(t,e,n.extraEntropy),s=new qa(32,ga);let a;for(s.reseedSync(r);!(a=Xa(s.generateSync(),o,i,n.canonical));)s.reseedSync();return function(t,e){const{sig:n,recovery:r}=t,{der:o,recovered:i}=Object.assign({canonical:!0,der:!0},e),s=o?n.toDERRawBytes():n.toCompactRawBytes();return i?[s,r]:s}(a,n)}(he(t),he(this.#R),{recovered:!0,canonical:!0}),r=Ta.fromHex(e);return oa.from({r:Re("0x"+r.r.toString(16),32),s:Re("0x"+r.s.toString(16),32),v:n?28:27})}computeSharedSecret(t){const e=Tc.computePublicKey(t);return ye(function(t,e,n=!1){if($a(t))throw new TypeError("getSharedSecret: first arg must be private key");if(!$a(e))throw new TypeError("getSharedSecret: second arg must be public key");const r=(o=e)instanceof Ca?(o.assertValidity(),o):Ca.fromHex(o);var o;return r.assertValidity(),r.multiply(Za(t)).toRawBytes(n)}(he(this.#R),fe(e)))}static computePublicKey(t,e){let n=fe(t,"key");if(32===n.length)return ye(function(t,e=!1){return Ca.fromPrivateKey(t).toRawBytes(e)}(n,!!e));if(64===n.length){const t=new Uint8Array(65);t[0]=4,t.set(n,1),n=t}return ye(Ca.fromHex(n).toRawBytes(e))}static recoverPublicKey(t,e){se(32===me(t),"invalid digest length","digest",t);const n=oa.from(e),r=Ta.fromCompact(he(ge([n.r,n.s]))).toDERRawBytes(),o=function(t,e,n,r=!1){return Ca.fromSignature(t,e,n).toRawBytes(r)}(he(t),r,n.yParity);return se(null!=o,"invalid signautre for digest","signature",e),ye(o)}static addPoints(t,e,n){const r=Ca.fromHex(Tc.computePublicKey(t).substring(2)),o=Ca.fromHex(Tc.computePublicKey(e).substring(2));return"0x"+r.add(o).toHex(!!n)}}function jc(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function Rc(t,e,n){let r=0;for(let o=0;o<n;o++)r=256*r+t[e+o];return r}function Bc(t,e,n,r){const o=[];for(;n<e+1+r;){const i=Ic(t,n);o.push(i.result),ie((n+=i.consumed)<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:o}}function Ic(t,e){ie(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=e=>{ie(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const o=Rc(t,e+1,r);return n(e+1+r+o),Bc(t,e,e+1+r,r+o)}if(t[e]>=192){const r=t[e]-192;return n(e+1+r),Bc(t,e,e+1,r)}if(t[e]>=184){const r=t[e]-183;n(e+1+r);const o=Rc(t,e+1,r);return n(e+1+r+o),{consumed:1+r+o,result:ye(t.slice(e+1+r,e+1+r+o))}}if(t[e]>=128){const r=t[e]-128;return n(e+1+r),{consumed:1+r,result:ye(t.slice(e+1,e+1+r))}}return{consumed:1,result:jc(t[e])}}function Nc(t){const e=fe(t,"data"),n=Ic(e,0);return se(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function Lc(t){const e=[];for(;t;)e.unshift(255&t),t>>=8;return e}function _c(t){if(Array.isArray(t)){let e=[];if(t.forEach((function(t){e=e.concat(_c(t))})),e.length<=55)return e.unshift(192+e.length),e;const n=Lc(e.length);return n.unshift(247+n.length),n.concat(e)}const e=Array.prototype.slice.call(fe(t,"object"));if(1===e.length&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=Lc(e.length);return n.unshift(183+n.length),n.concat(e)}const Uc="0123456789abcdef";function Dc(t){let e="0x";for(const n of _c(t))e+=Uc[n>>4],e+=Uc[15&n];return e}const Fc=BigInt(0),Mc=BigInt(2),Gc=BigInt(27),Hc=BigInt(28),zc=BigInt(35),Vc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Qc(t){return"0x"===t?null:qn(t)}function Jc(t,e){try{return _o(t)}catch(n){se(!1,n.message,e,t)}}function Kc(t,e){return"0x"===t?0:je(t,e)}function qc(t,e){if("0x"===t)return Fc;const n=Ce(t,e);return se(n<=Vc,"value exceeds uint size",e,n),n}function Yc(t,e){const n=Ce(t,"value"),r=Be(n);return se(r.length<=32,"value too large",`tx.${e}`,n),r}function Wc(t){return _o(t).map((t=>[t.address,t.storageKeys]))}function Xc(t,e){const n=[Yc(t.nonce||0,"nonce"),Yc(t.gasPrice||0,"gasPrice"),Yc(t.gasLimit||0,"gasLimit"),null!=t.to?qn(t.to):"0x",Yc(t.value||0,"value"),t.data||"0x"];let r=Fc;if(t.chainId!=Fc)r=Ce(t.chainId,"tx.chainId"),se(!e||null==e.networkV||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const e=t.signature.legacyChainId;null!=e&&(r=e)}if(!e)return r!==Fc&&(n.push(Be(r)),n.push("0x"),n.push("0x")),Dc(n);let o=BigInt(27+e.yParity);return r!==Fc?o=oa.getChainIdV(r,e.v):BigInt(e.v)!==o&&se(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Be(o)),n.push(Be(e.r)),n.push(Be(e.s)),Dc(n)}function Zc(t,e){let n;try{if(n=Kc(e[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(t){se(!1,"invalid yParity","yParity",e[0])}const r=we(e[1],32),o=we(e[2],32),i=oa.from({r,s:o,yParity:n});t.signature=i}function $c(t,e){const n=[Yc(t.chainId||0,"chainId"),Yc(t.nonce||0,"nonce"),Yc(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Yc(t.maxFeePerGas||0,"maxFeePerGas"),Yc(t.gasLimit||0,"gasLimit"),null!=t.to?qn(t.to):"0x",Yc(t.value||0,"value"),t.data||"0x",Wc(t.accessList||[])];return e&&(n.push(Yc(e.yParity,"yParity")),n.push(Be(e.r)),n.push(Be(e.s))),ge(["0x02",Dc(n)])}function tu(t,e){const n=[Yc(t.chainId||0,"chainId"),Yc(t.nonce||0,"nonce"),Yc(t.gasPrice||0,"gasPrice"),Yc(t.gasLimit||0,"gasLimit"),null!=t.to?qn(t.to):"0x",Yc(t.value||0,"value"),t.data||"0x",Wc(t.accessList||[])];return e&&(n.push(Yc(e.yParity,"recoveryParam")),n.push(Be(e.r)),n.push(Be(e.s))),ge(["0x01",Dc(n)])}class eu{#B;#I;#e;#N;#L;#_;#U;#D;#F;#M;#G;#H;get type(){return this.#B}set type(t){switch(t){case null:this.#B=null;break;case 0:case"legacy":this.#B=0;break;case 1:case"berlin":case"eip-2930":this.#B=1;break;case 2:case"london":case"eip-1559":this.#B=2;break;default:se(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return this.#I}set to(t){this.#I=null==t?null:qn(t)}get nonce(){return this.#N}set nonce(t){this.#N=je(t,"value")}get gasLimit(){return this.#L}set gasLimit(t){this.#L=Ce(t)}get gasPrice(){const t=this.#_;return null!=t||0!==this.type&&1!==this.type?t:Fc}set gasPrice(t){this.#_=null==t?null:Ce(t,"gasPrice")}get maxPriorityFeePerGas(){const t=this.#U;return null==t?2===this.type?Fc:null:t}set maxPriorityFeePerGas(t){this.#U=null==t?null:Ce(t,"maxPriorityFeePerGas")}get maxFeePerGas(){const t=this.#D;return null==t?2===this.type?Fc:null:t}set maxFeePerGas(t){this.#D=null==t?null:Ce(t,"maxFeePerGas")}get data(){return this.#e}set data(t){this.#e=ye(t)}get value(){return this.#F}set value(t){this.#F=Ce(t,"value")}get chainId(){return this.#M}set chainId(t){this.#M=Ce(t)}get signature(){return this.#G||null}set signature(t){this.#G=null==t?null:oa.from(t)}get accessList(){const t=this.#H||null;return null==t?1===this.type||2===this.type?[]:null:t}set accessList(t){this.#H=null==t?null:_o(t)}constructor(){this.#B=null,this.#I=null,this.#N=0,this.#L=BigInt(0),this.#_=null,this.#U=null,this.#D=null,this.#e="0x",this.#F=BigInt(0),this.#M=BigInt(0),this.#G=null,this.#H=null}get hash(){return null==this.signature?null:Gn(this.serialized)}get unsignedHash(){return Gn(this.unsignedSerialized)}get from(){return null==this.signature?null:(t=this.unsignedHash,e=this.signature,function(t){let e;return e="string"==typeof t?Tc.computePublicKey(t,!1):t.publicKey,qn(Gn("0x"+e.substring(4)).substring(26))}(Tc.recoverPublicKey(t,e)));var t,e}get fromPublicKey(){return null==this.signature?null:Tc.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){switch(ie(null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return Xc(this,this.signature);case 1:return tu(this,this.signature);case 2:return $c(this,this.signature)}ie(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return Xc(this);case 1:return tu(this);case 2:return $c(this)}ie(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const t=null!=this.gasPrice,e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&ie(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ie(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ie(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return null!=this.type?r.push(this.type):e?r.push(2):t?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(r.push(0),r.push(1),r.push(2)),r.sort(),r}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}clone(){return eu.from(this)}toJSON(){const t=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new eu;if("string"==typeof t){const e=fe(t);if(e[0]>=127)return eu.from(function(t){const e=Nc(t);se(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Kc(e[0],"nonce"),gasPrice:qc(e[1],"gasPrice"),gasLimit:qc(e[2],"gasLimit"),to:Qc(e[3]),value:qc(e[4],"value"),data:ye(e[5]),chainId:Fc};if(6===e.length)return n;const r=qc(e[6],"v"),o=qc(e[7],"r"),i=qc(e[8],"s");if(o===Fc&&i===Fc)n.chainId=r;else{let o=(r-zc)/Mc;o<Fc&&(o=Fc),n.chainId=o,se(o!==Fc||r===Gc||r===Hc,"non-canonical legacy v","v",e[6]),n.signature=oa.from({r:we(e[7],32),s:we(e[8],32),v:r}),n.hash=Gn(t)}return n}(e));switch(e[0]){case 1:return eu.from(function(t){const e=Nc(fe(t).slice(1));se(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",ye(t));const n={type:1,chainId:qc(e[0],"chainId"),nonce:Kc(e[1],"nonce"),gasPrice:qc(e[2],"gasPrice"),gasLimit:qc(e[3],"gasLimit"),to:Qc(e[4]),value:qc(e[5],"value"),data:ye(e[6]),accessList:Jc(e[7],"accessList")};return 8===e.length||(n.hash=Gn(t),Zc(n,e.slice(8))),n}(e));case 2:return eu.from(function(t){const e=Nc(fe(t).slice(1));se(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",ye(t));const n=qc(e[2],"maxPriorityFeePerGas"),r=qc(e[3],"maxFeePerGas"),o={type:2,chainId:qc(e[0],"chainId"),nonce:Kc(e[1],"nonce"),maxPriorityFeePerGas:n,maxFeePerGas:r,gasPrice:null,gasLimit:qc(e[4],"gasLimit"),to:Qc(e[5]),value:qc(e[6],"value"),data:ye(e[7]),accessList:Jc(e[8],"accessList")};return 9===e.length||(o.hash=Gn(t),Zc(o,e.slice(9))),o}(e))}ie(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new eu;return null!=t.type&&(e.type=t.type),null!=t.to&&(e.to=t.to),null!=t.nonce&&(e.nonce=t.nonce),null!=t.gasLimit&&(e.gasLimit=t.gasLimit),null!=t.gasPrice&&(e.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null!=t.data&&(e.data=t.data),null!=t.value&&(e.value=t.value),null!=t.chainId&&(e.chainId=t.chainId),null!=t.signature&&(e.signature=oa.from(t.signature)),null!=t.accessList&&(e.accessList=t.accessList),null!=t.hash&&(se(e.isSigned(),"unsigned transaction cannot define hash","tx",t),se(e.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(se(e.isSigned(),"unsigned transaction cannot define from","tx",t),se(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}let nu=async function(t,e){const n=t.url.split(":")[0].toLowerCase();let r;if(ie("http"===n||"https"===n,`unsupported protocol ${n}`,"UNSUPPORTED_OPERATION",{info:{protocol:n},operation:"request"}),ie("https"===n||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"}),e){const t=new AbortController;r=t.signal,e.addListener((()=>{t.abort()}))}const o={method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:r},i=await fetch(t.url,o),s={};i.headers.forEach(((t,e)=>{s[e.toLowerCase()]=t}));const a=await i.arrayBuffer(),c=null==a?null:new Uint8Array(a);return{statusCode:i.status,statusMessage:i.statusText,headers:s,body:c}};const ru=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),ou=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let iu=!1;async function su(t,e){try{const e=t.match(ru);if(!e)throw new Error("invalid data");return new pu(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?function(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return fe(e)}(e[3]):mr(e[3].replace(/%([0-9a-f][0-9a-f])/gi,((t,e)=>String.fromCharCode(parseInt(e,16))))))}catch(e){return new pu(599,"BAD REQUEST (invalid data: URI)",{},null,new hu(t))}}function au(t){return async function(e,n){try{const n=e.match(ou);if(!n)throw new Error("invalid link");return new hu(`${t}${n[2]}`)}catch(t){return new pu(599,"BAD REQUEST (invalid IPFS URI)",{},null,new hu(e))}}}const cu={data:su,ipfs:au("https://gateway.ipfs.io/ipfs/")},uu=new WeakMap;class lu{#z;#V;constructor(t){this.#z=[],this.#V=!1,uu.set(t,(()=>{if(!this.#V){this.#V=!0;for(const t of this.#z)setTimeout((()=>{t()}),0);this.#z=[]}}))}addListener(t){ie(!this.#V,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#z.push(t)}get cancelled(){return this.#V}checkSignal(){ie(!this.cancelled,"cancelled","CANCELLED",{})}}function fu(t){if(null==t)throw new Error("missing signal; should not happen");return t.checkSignal(),t}class hu{#Q;#J;#K;#q;#Y;#W;#X;#Z;#$;#tt;#et;#nt;#rt;#ot;get url(){return this.#W}set url(t){this.#W=String(t)}get body(){return null==this.#X?null:new Uint8Array(this.#X)}set body(t){if(null==t)this.#X=void 0,this.#Z=void 0;else if("string"==typeof t)this.#X=mr(t),this.#Z="text/plain";else if(t instanceof Uint8Array)this.#X=t,this.#Z="application/octet-stream";else{if("object"!=typeof t)throw new Error("invalid body");this.#X=mr(JSON.stringify(t)),this.#Z="application/json"}}hasBody(){return null!=this.#X}get method(){return this.#q?this.#q:this.hasBody()?"POST":"GET"}set method(t){null==t&&(t=""),this.#q=String(t).toUpperCase()}get headers(){const t=Object.assign({},this.#K);return this.#$&&(t.authorization=`Basic ${function(t){const e=fe(t);let n="";for(let t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return btoa(n)}(mr(this.#$))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),null==t["content-type"]&&this.#Z&&(t["content-type"]=this.#Z),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){this.#K[String(t).toLowerCase()]=String(e)}clearHeaders(){this.#K={}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const r=e[n++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#$||null}setCredentials(t,e){se(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#$=`${t}:${e}`}get allowGzip(){return this.#J}set allowGzip(t){this.#J=!!t}get allowInsecureAuthentication(){return!!this.#Q}set allowInsecureAuthentication(t){this.#Q=!!t}get timeout(){return this.#Y}set timeout(t){se(t>=0,"timeout must be non-zero","timeout",t),this.#Y=t}get preflightFunc(){return this.#tt||null}set preflightFunc(t){this.#tt=t}get processFunc(){return this.#et||null}set processFunc(t){this.#et=t}get retryFunc(){return this.#nt||null}set retryFunc(t){this.#nt=t}constructor(t){this.#W=String(t),this.#Q=!1,this.#J=!0,this.#K={},this.#q="",this.#Y=3e5,this.#ot={slotInterval:250,maxAttempts:12}}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#X?ye(this.#X):"null"}>`}setThrottleParams(t){null!=t.slotInterval&&(this.#ot.slotInterval=t.slotInterval),null!=t.maxAttempts&&(this.#ot.maxAttempts=t.maxAttempts)}async#it(t,e,n,r,o){if(t>=this.#ot.maxAttempts)return o.makeServerError("exceeded maximum retry limit");ie(du()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await function(t){return new Promise((e=>setTimeout(e,t)))}(n);let i=this.clone();const s=(i.url.split(":")[0]||"").toLowerCase();if(s in cu){const t=await cu[s](i.url,fu(r.#rt));if(t instanceof pu){let e=t;if(this.processFunc){fu(r.#rt);try{e=await this.processFunc(i,e)}catch(t){null!=t.throttle&&"number"==typeof t.stall||e.makeServerError("error in post-processing function",t).assertOk()}}return e}i=t}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await nu(i,fu(r.#rt));let c=new pu(a.statusCode,a.statusMessage,a.headers,a.body,r);if(301===c.statusCode||302===c.statusCode){try{const n=c.headers.location||"";return i.redirect(n).#it(t+1,e,0,r,c)}catch(t){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,t))){const n=c.headers["retry-after"];let o=this.#ot.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return"string"==typeof n&&n.match(/^[1-9][0-9]*$/)&&(o=parseInt(n)),i.clone().#it(t+1,e,o,r,c)}if(this.processFunc){fu(r.#rt);try{c=await this.processFunc(i,c)}catch(n){null!=n.throttle&&"number"==typeof n.stall||c.makeServerError("error in post-processing function",n).assertOk();let o=this.#ot.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return n.stall>=0&&(o=n.stall),i.clone().#it(t+1,e,o,r,c)}}return c}send(){return ie(null==this.#rt,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#rt=new lu(this),this.#it(0,du()+this.timeout,0,this,new pu(0,"",{},null,this))}cancel(){ie(null!=this.#rt,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=uu.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();ie("GET"===this.method&&("https"!==e||"http"!==n)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const r=new hu(t);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,r.#K=Object.assign({},this.#K),this.#X&&(r.#X=new Uint8Array(this.#X)),r.#Z=this.#Z,r}clone(){const t=new hu(this.url);return t.#q=this.#q,this.#X&&(t.#X=this.#X),t.#Z=this.#Z,t.#K=Object.assign({},this.#K),t.#$=this.#$,this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),t.#tt=this.#tt,t.#et=this.#et,t.#nt=this.#nt,t}static lockConfig(){iu=!0}static getGateway(t){return cu[t.toLowerCase()]||null}static registerGateway(t,e){if("http"===(t=t.toLowerCase())||"https"===t)throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(iu)throw new Error("gateways locked");cu[t]=e}static registerGetUrl(t){if(iu)throw new Error("gateways locked");nu=t}static createDataGateway(){return su}static createIpfsGatewayFunc(t){return au(t)}}class pu{#st;#at;#K;#X;#ct;#ut;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#X?ye(this.#X):"null"}>`}get statusCode(){return this.#st}get statusMessage(){return this.#at}get headers(){return Object.assign({},this.#K)}get body(){return null==this.#X?null:new Uint8Array(this.#X)}get bodyText(){try{return null==this.#X?"":vr(this.#X)}catch(t){ie(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(t){ie(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const r=e[n++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(t,e,n,r,o){this.#st=t,this.#at=e,this.#K=Object.keys(n).reduce(((t,e)=>(t[e.toLowerCase()]=String(n[e]),t)),{}),this.#X=null==r?null:new Uint8Array(r),this.#ct=o||null,this.#ut={message:""}}makeServerError(t,e){let n;n=t?`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:`CLIENT ESCALATED SERVER ERROR (${t=`${this.statusCode} ${this.statusMessage}`})`;const r=new pu(599,n,this.headers,this.body,this.#ct||void 0);return r.#ut={message:t,error:e},r}throwThrottleError(t,e){null==e?e=-1:se(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw te(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return null!=this.#X}get request(){return this.#ct}ok(){return""===this.#ut.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=this.#ut;""===t&&(t=`server response ${this.statusCode} ${this.statusMessage}`),ie(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e})}}function du(){return(new Date).getTime()}BigInt(0);const yu=BigInt(58);function gu(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):se(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class mu{name;constructor(t){te(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const vu=new RegExp("^(ipfs)://(.*)$","i"),bu=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),vu,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class wu{provider;address;name;#lt;#ft;constructor(t,e,n){te(this,{provider:t,address:e,name:n}),this.#lt=null,this.#ft=new Si(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t)}async supportsWildcard(){return null==this.#lt&&(this.#lt=(async()=>{try{return await this.#ft.supportsInterface("0x9061b923")}catch(t){if(ne(t,"CALL_EXCEPTION"))return!1;throw this.#lt=null,t}})()),await this.#lt}async#ht(t,e){e=(e||[]).slice();const n=this.#ft.interface;e.unshift(qs(this.name));let r=null;var o;await this.supportsWildcard()&&(r=n.getFunction(t),ie(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[(o=this.name,ye(ge(Ks(o).map((t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e}))))+"00"),n.encodeFunctionData(r,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const o=await this.#ft[t](...e);return r?n.decodeFunctionResult(r,o)[0]:o}catch(t){if(!ne(t,"CALL_EXCEPTION"))throw t}return null}async getAddress(t){if(null==t&&(t=60),60===t)try{const t=await this.#ht("addr(bytes32)");return null==t||t===Uo?null:t}catch(t){if(ne(t,"CALL_EXCEPTION"))return null;throw t}if(t>=0&&t<2147483648){let e=t+2147483648;const n=await this.#ht("addr(bytes32,uint)",[e]);if(pe(n,20))return qn(n)}let e=null;for(const n of this.provider.plugins)if(n instanceof mu&&n.supportsCoinType(t)){e=n;break}if(null==e)return null;const n=await this.#ht("addr(bytes32,uint)",[t]);if(null==n||"0x"===n)return null;const r=await e.decodeAddress(t,n);if(null!=r)return r;ie(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await this.#ht("text(bytes32,string)",[t]);return null==e||"0x"===e?null:e}async getContentHash(){const t=await this.#ht("contenthash(bytes32)");if(null==t||"0x"===t)return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const t="e3010170"===e[1]?"ipfs":"ipns",n=parseInt(e[4],16);if(e[5].length===2*n)return`${t}://${function(t){let e=Te(fe(t)),n="";for(;e;)n="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"[Number(e%yu)]+n,e/=yu;return n}("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return`bzz://${n[1]}`;ie(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(null==e)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<bu.length;n++){const r=e.match(bu[n]);if(null==r)continue;const o=r[1].toLowerCase();switch(o){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const n=gu(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:n}),{linkage:t,url:n}}case"erc721":case"erc1155":{const n="erc721"===o?"tokenURI(uint256)":"uri(uint256)";t.push({type:o,value:e});const i=await this.getAddress();if(null==i)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const s=(r[2]||"").split("/");if(2!==s.length)return t.push({type:`!${o}caip`,value:r[2]||""}),{url:null,linkage:t};const a=s[1],c=new Si(s[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===o){const e=await c.ownerOf(a);if(i!==e)return t.push({type:"!owner",value:e}),{url:null,linkage:t};t.push({type:"owner",value:e})}else if("erc1155"===o){const e=await c.balanceOf(i,a);if(!e)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:e.toString()})}let u=await c[n](a);if(null==u||"0x"===u)return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:u}),"erc1155"===o&&(u=u.replace("{id}",Re(a,32).substring(2)),t.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=gu(u)),t.push({type:"metadata-url",value:u});let l={};const f=await new hu(u).send();f.assertOk();try{l=f.bodyJson}catch(e){try{t.push({type:"!metadata",value:f.bodyText})}catch(e){const n=f.body;return n&&t.push({type:"!metadata",value:ye(n)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!l)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(l)});let h=l.image;if("string"!=typeof h)return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(h.match(/^(https:\/\/|data:)/i));else{if(null==h.match(vu))return t.push({type:"!imageUrl-ipfs",value:h}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:h}),h=gu(h)}return t.push({type:"url",value:h}),{linkage:t,url:h}}}}}catch(t){}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return ie(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async#pt(t,e){const n=await wu.getEnsAddress(t);try{const r=new Si(n,["function resolver(bytes32) view returns (address)"],t),o=await r.resolver(qs(e),{enableCcipRead:!0});return o===Uo?null:o}catch(t){throw t}return null}static async fromName(t,e){let n=e;for(;;){if(""===n||"."===n)return null;if("eth"!==e&&"eth"===n)return null;const r=await wu.#pt(t,n);if(null!=r){const o=new wu(t,r,e);return n===e||await o.supportsWildcard()?o:null}n=n.split(".").slice(1).join(".")}}}const Au=BigInt(0);function Eu(t,e){return function(n){return null==n?e:t(n)}}function Ou(t){return e=>{if(!Array.isArray(e))throw new Error("not an array");return e.map((e=>t(e)))}}function Pu(t,e){return n=>{const r={};for(const o in t){let i=o;if(e&&o in e&&!(i in n))for(const t of e[o])if(t in n){i=t;break}try{const e=t[o](n[i]);void 0!==e&&(r[o]=e)}catch(t){ie(!1,`invalid value for value.${o} (${t instanceof Error?t.message:"not-an-error"})`,"BAD_DATA",{value:n})}}return r}}function ku(t){return se(pe(t,!0),"invalid data","value",t),t}function Cu(t){return se(pe(t,32),"invalid hash","value",t),t}const xu=Pu({address:qn,blockHash:Cu,blockNumber:je,data:ku,index:je,removed:Eu((function(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}se(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}),!1),topics:Ou(Cu),transactionHash:Cu,transactionIndex:je},{index:["logIndex"]}),Su=Pu({hash:Eu(Cu),parentHash:Cu,number:je,timestamp:je,nonce:Eu(ku),difficulty:Ce,gasLimit:Ce,gasUsed:Ce,miner:Eu(qn),extraData:ku,baseFeePerGas:Eu(Ce)}),Tu=Pu({transactionIndex:je,blockNumber:je,transactionHash:Cu,address:qn,topics:Ou(Cu),data:ku,index:je,blockHash:Cu},{index:["logIndex"]}),ju=Pu({to:Eu(qn,null),from:Eu(qn,null),contractAddress:Eu(qn,null),index:je,root:Eu(ye),gasUsed:Ce,logsBloom:Eu(ku),blockHash:Cu,hash:Cu,logs:Ou((function(t){return Tu(t)})),blockNumber:je,cumulativeGasUsed:Ce,effectiveGasPrice:Eu(Ce),status:Eu(je),type:Eu(je,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Ru(t){t.to&&Ce(t.to)===Au&&(t.to="0x0000000000000000000000000000000000000000");const e=Pu({hash:Cu,type:t=>"0x"===t||null==t?0:je(t),accessList:Eu(_o,null),blockHash:Eu(Cu,null),blockNumber:Eu(je,null),transactionIndex:Eu(je,null),from:qn,gasPrice:Eu(Ce),maxPriorityFeePerGas:Eu(Ce),maxFeePerGas:Eu(Ce),gasLimit:Ce,to:Eu(qn,null),value:Ce,nonce:je,data:ku,creates:Eu(qn,null),chainId:Eu(Ce,null)},{data:["input"],gasLimit:["gas"]})(t);if(null==e.to&&null==e.creates&&(e.creates=function(t){const e=qn(t.from);let n=Ce(t.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,qn(ve(Gn(Dc([e,n])),12))}(e)),1!==t.type&&2!==t.type||null!=t.accessList||(e.accessList=[]),t.signature?e.signature=oa.from(t.signature):e.signature=oa.from(t),null==e.chainId){const t=e.signature.legacyChainId;null!=t&&(e.chainId=t)}return e.blockHash&&Ce(e.blockHash)===Au&&(e.blockHash=null),e}class Bu{name;constructor(t){te(this,{name:t})}clone(){return new Bu(this.name)}}class Iu extends Bu{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(t,e){null==t&&(t=0),super(`org.ethers.network.plugins.GasCost#${t||0}`);const n={effectiveBlock:t};function r(t,r){let o=(e||{})[t];null==o&&(o=r),se("number"==typeof o,`invalud value for ${t}`,"costs",e),n[t]=o}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),te(this,n)}clone(){return new Iu(this.effectiveBlock,this)}}class Nu extends Bu{address;targetNetwork;constructor(t,e){super("org.ethers.plugins.network.Ens"),te(this,{address:t||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==e?1:e})}clone(){return new Nu(this.address,this.targetNetwork)}}const Lu=new Map;class _u{#dt;#M;#yt;constructor(t,e){this.#dt=t,this.#M=Ce(e),this.#yt=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#dt}set name(t){this.#dt=t}get chainId(){return this.#M}set chainId(t){this.#M=Ce(t,"chainId")}matches(t){if(null==t)return!1;if("string"==typeof t){try{return this.chainId===Ce(t)}catch(t){}return this.name===t}if("number"==typeof t||"bigint"==typeof t){try{return this.chainId===Ce(t)}catch(t){}return!1}if("object"==typeof t){if(null!=t.chainId){try{return this.chainId===Ce(t.chainId)}catch(t){}return!1}return null!=t.name&&this.name===t.name}return!1}get plugins(){return Array.from(this.#yt.values())}attachPlugin(t){if(this.#yt.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#yt.set(t.name,t.clone()),this}getPlugin(t){return this.#yt.get(t)||null}getPlugins(t){return this.plugins.filter((e=>e.name.split("#")[0]===t))}clone(){const t=new _u(this.name,this.chainId);return this.plugins.forEach((e=>{t.attachPlugin(e.clone())})),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Iu;let n=e.txBase;if(null==t.to&&(n+=e.txCreate),t.data)for(let r=2;r<t.data.length;r+=2)"00"===t.data.substring(r,r+2)?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const r=_o(t.accessList);for(const t in r)n+=e.txAccessListAddress+e.txAccessListStorageKey*r[t].storageKeys.length}return n}static from(t){if(function(){function t(t,e,n){const r=function(){const r=new _u(t,e);return null!=n.ensNetwork&&r.attachPlugin(new Nu(null,n.ensNetwork)),n.priorityFee,r.attachPlugin(new Iu),r};_u.register(t,r),_u.register(e,r),n.altNames&&n.altNames.forEach((t=>{_u.register(t,r)}))}Uu||(Uu=!0,t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{}),t("classic",61,{}),t("classicKotti",6,{}),t("xdai",100,{ensNetwork:1}),t("optimism",10,{ensNetwork:1,etherscan:{url:"https://api-optimistic.etherscan.io/"}}),t("optimism-goerli",420,{etherscan:{url:"https://api-goerli-optimistic.etherscan.io/"}}),t("arbitrum",42161,{ensNetwork:1,etherscan:{url:"https://api.arbiscan.io/"}}),t("arbitrum-goerli",421613,{etherscan:{url:"https://api-goerli.arbiscan.io/"}}),t("matic",137,{ensNetwork:1,etherscan:{url:"https://api.polygonscan.com/"}}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],etherscan:{url:"https://api-testnet.polygonscan.com/"}}),t("bnb",56,{ensNetwork:1,etherscan:{url:"http://api.bscscan.com"}}),t("bnbt",97,{etherscan:{url:"http://api-testnet.bscscan.com"}}))}(),null==t)return _u.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){const e=Lu.get(t);if(e)return e();if("bigint"==typeof t)return new _u("unknown",t);se(!1,"unknown network","network",t)}if("function"==typeof t.clone)return t.clone();if("object"==typeof t){se("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);const e=new _u(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&e.attachPlugin(new Nu(t.ensAddress,t.ensNetwork)),e}se(!1,"invalid network","network",t)}static register(t,e){"number"==typeof t&&(t=BigInt(t));const n=Lu.get(t);n&&se(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),Lu.set(t,e)}}let Uu=!1;function Du(t){return JSON.parse(JSON.stringify(t))}class Fu{#gt;#mt;#vt;#bt;constructor(t){this.#gt=t,this.#mt=null,this.#vt=4e3,this.#bt=-2}get pollingInterval(){return this.#vt}set pollingInterval(t){this.#vt=t}async#wt(){try{const t=await this.#gt.getBlockNumber();if(-2===this.#bt)return void(this.#bt=t);if(t!==this.#bt){for(let e=this.#bt+1;e<=t;e++){if(null==this.#mt)return;await this.#gt.emit("block",e)}this.#bt=t}}catch(t){}null!=this.#mt&&(this.#mt=this.#gt._setTimeout(this.#wt.bind(this),this.#vt))}start(){this.#mt||(this.#mt=this.#gt._setTimeout(this.#wt.bind(this),this.#vt),this.#wt())}stop(){this.#mt&&(this.#gt._clearTimeout(this.#mt),this.#mt=null)}pause(t){this.stop(),t&&(this.#bt=-2)}resume(){this.start()}}class Mu{#gt;#wt;#At;constructor(t){this.#gt=t,this.#At=!1,this.#wt=t=>{this._poll(t,this.#gt)}}async _poll(t,e){throw new Error("sub-classes must override this")}start(){this.#At||(this.#At=!0,this.#wt(-2),this.#gt.on("block",this.#wt))}stop(){this.#At&&(this.#At=!1,this.#gt.off("block",this.#wt))}pause(t){this.stop()}resume(){this.start()}}class Gu extends Mu{#C;constructor(t,e){super(t),this.#C=Du(e)}async _poll(t,e){throw new Error("@TODO")}}class Hu extends Mu{#Et;constructor(t,e){super(t),this.#Et=e}async _poll(t,e){const n=await e.getTransactionReceipt(this.#Et);n&&e.emit(this.#Et,n)}}class zu{#gt;#C;#mt;#At;#bt;constructor(t,e){this.#gt=t,this.#C=Du(e),this.#mt=this.#wt.bind(this),this.#At=!1,this.#bt=-2}async#wt(t){if(-2===this.#bt)return;const e=Du(this.#C);e.fromBlock=this.#bt+1,e.toBlock=t;const n=await this.#gt.getLogs(e);if(0!==n.length)for(const t of n)this.#gt.emit(this.#C,t),this.#bt=t.blockNumber;else this.#bt<t-60&&(this.#bt=t-60)}start(){this.#At||(this.#At=!0,-2===this.#bt&&this.#gt.getBlockNumber().then((t=>{this.#bt=t})),this.#gt.on("block",this.#mt))}stop(){this.#At&&(this.#At=!1,this.#gt.off("block",this.#mt))}pause(t){this.stop(),t&&(this.#bt=-2)}resume(){this.start()}}const Vu=BigInt(2);function Qu(t){return t&&"function"==typeof t.then}function Ju(t,e){return t+":"+JSON.stringify(e,((t,e)=>{if(null==e)return"null";if("bigint"==typeof e)return`bigint:${e.toString()}`;if("string"==typeof e)return e.toLowerCase();if("object"==typeof e&&!Array.isArray(e)){const t=Object.keys(e);return t.sort(),t.reduce(((t,n)=>(t[n]=e[n],t)),{})}return e}))}class Ku{name;constructor(t){te(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function qu(t){return(t=Array.from(new Set(t).values())).sort(),t}async function Yu(t,e){if(null==t)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),"string"==typeof t)switch(t){case"block":case"pending":case"debug":case"error":case"network":return{type:t,tag:t}}if(pe(t,32)){const e=t.toLowerCase();return{type:"transaction",tag:Ju("tx",{hash:e}),hash:e}}if(t.orphan){const e=t;return{type:"orphan",tag:Ju("orphan",e),filter:(n=e,JSON.parse(JSON.stringify(n)))}}var n;if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map((t=>null==t?null:Array.isArray(t)?qu(t.map((t=>t.toLowerCase()))):t.toLowerCase()))};if(n.address){const t=[],o=[],i=n=>{pe(n)?t.push(n):o.push((async()=>{t.push(await wo(n,e))})())};Array.isArray(n.address)?n.address.forEach(i):i(n.address),o.length&&await Promise.all(o),r.address=qu(t.map((t=>t.toLowerCase())))}return{filter:r,tag:Ju("event",r),type:"event"}}se(!1,"unknown ProviderEvent","event",t)}function Wu(){return(new Date).getTime()}const Xu={cacheTimeout:250};class Zu{#Ot;#yt;#Pt;#kt;#Ct;#xt;#St;#Tt;#jt;#Rt;#Bt;#s;constructor(t,e){if(this.#s=Object.assign({},Xu,e||{}),"any"===t)this.#xt=!0,this.#Ct=null;else if(t){const e=_u.from(t);this.#xt=!1,this.#Ct=Promise.resolve(e),setTimeout((()=>{this.emit("network",e,null)}),0)}else this.#xt=!1,this.#Ct=null;this.#Tt=-1,this.#St=new Map,this.#Ot=new Map,this.#yt=new Map,this.#Pt=null,this.#kt=!1,this.#jt=1,this.#Rt=new Map,this.#Bt=!1}get provider(){return this}get plugins(){return Array.from(this.#yt.values())}attachPlugin(t){if(this.#yt.get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return this.#yt.set(t.name,t.connect(this)),this}getPlugin(t){return this.#yt.get(t)||null}get disableCcipRead(){return this.#Bt}set disableCcipRead(t){this.#Bt=!!t}async#It(t){const e=this.#s.cacheTimeout;if(e<0)return await this._perform(t);const n=Ju(t.method,t);let r=this.#St.get(n);return r||(r=this._perform(t),this.#St.set(n,r),setTimeout((()=>{this.#St.get(n)===r&&this.#St.delete(n)}),e)),await r}async ccipReadFetch(t,e,n){if(this.disableCcipRead||0===n.length||null==t.to)return null;const r=t.to.toLowerCase(),o=e.toLowerCase(),i=[];for(let e=0;e<n.length;e++){const s=n[e],a=s.replace("{sender}",r).replace("{data}",o),c=new hu(a);-1===s.indexOf("{data}")&&(c.body={data:o,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:e,urls:n});let u="unknown error";const l=await c.send();try{const t=l.bodyJson;if(t.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:t}),t.data;t.message&&(u=t.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:t})}catch(t){}ie(l.statusCode<400||l.statusCode>=500,`response not found during CCIP fetch: ${u}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:s,errorMessage:u}}),i.push(u)}ie(!1,`error encountered during CCIP fetch: ${i.map((t=>JSON.stringify(t))).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:i}})}_wrapBlock(t,e){return new Wo(function(t){const e=Su(t);return e.transactions=t.transactions.map((t=>"string"==typeof t?t:Ru(t))),e}(t),this)}_wrapLog(t,e){return new Xo(function(t){return xu(t)}(t),this)}_wrapTransactionReceipt(t,e){return new Zo(function(t){return ju(t)}(t),this)}_wrapTransactionResponse(t,e){return new $o(Ru(t),this)}_detectNetwork(){ie(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){ie(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=je(await this.#It({method:"getBlockNumber"}),"%response");return this.#Tt>=0&&(this.#Tt=t),t}_getAddress(t){return wo(t,this)}_getBlockTag(t){if(null==t)return"latest";switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}return pe(t)?pe(t,32)?t:Ie(t):("bigint"==typeof t&&(t=je(t,"blockTag")),"number"==typeof t?t>=0?Ie(t):this.#Tt>=0?Ie(this.#Tt+t):this.getBlockNumber().then((e=>Ie(e+t))):void se(!1,"invalid blockTag","blockTag",t))}_getFilter(t){const e=(t.topics||[]).map((t=>null==t?null:Array.isArray(t)?qu(t.map((t=>t.toLowerCase()))):t.toLowerCase())),n="blockHash"in t?t.blockHash:void 0,r=(t,r,o)=>{let i;switch(t.length){case 0:break;case 1:i=t[0];break;default:t.sort(),i=t}if(n&&(null!=r||null!=o))throw new Error("invalid filter");const s={};return i&&(s.address=i),e.length&&(s.topics=e),r&&(s.fromBlock=r),o&&(s.toBlock=o),n&&(s.blockHash=n),s};let o,i,s=[];if(t.address)if(Array.isArray(t.address))for(const e of t.address)s.push(this._getAddress(e));else s.push(this._getAddress(t.address));return"fromBlock"in t&&(o=this._getBlockTag(t.fromBlock)),"toBlock"in t&&(i=this._getBlockTag(t.toBlock)),s.filter((t=>"string"!=typeof t)).length||null!=o&&"string"!=typeof o||null!=i&&"string"!=typeof i?Promise.all([Promise.all(s),o,i]).then((t=>r(t[0],t[1],t[2]))):r(s,o,i)}_getTransactionRequest(t){const e=Yo(t),n=[];if(["to","from"].forEach((t=>{if(null==e[t])return;const r=wo(e[t]);Qu(r)?n.push(async function(){e[t]=await r}()):e[t]=r})),null!=e.blockTag){const t=this._getBlockTag(e.blockTag);Qu(t)?n.push(async function(){e.blockTag=await t}()):e.blockTag=t}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(null==this.#Ct){const t=this._detectNetwork().then((t=>(this.emit("network",t,null),t)),(e=>{throw this.#Ct===t&&(this.#Ct=null),e}));return this.#Ct=t,(await t).clone()}const t=this.#Ct,[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(this.#xt?(this.emit("network",n,e),this.#Ct===t&&(this.#Ct=Promise.resolve(n))):ie(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const{block:t,gasPrice:e}=await $t({block:this.getBlock("latest"),gasPrice:(async()=>{try{return Ce(await this.#It({method:"getGasPrice"}),"%response")}catch(t){}return null})()});let n=null,r=null;return t&&t.baseFeePerGas&&(r=BigInt("1000000000"),n=t.baseFeePerGas*Vu+r),new qo(e,n,r)}async estimateGas(t){let e=this._getTransactionRequest(t);return Qu(e)&&(e=await e),Ce(await this.#It({method:"estimateGas",transaction:e}),"%response")}async#Nt(t,e,n){ie(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const r=Yo(t);try{return ye(await this._perform({method:"call",transaction:r,blockTag:e}))}catch(t){if(!this.disableCcipRead&&re(t)&&t.data&&n>=0&&"latest"===e&&null!=r.to&&"0x556f1830"===ve(t.data,0,4)){const o=t.data,i=await wo(r.to,this);let s;try{s=function(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ie(me(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=ve(t,0,32);ie(ve(n,0,12)===ve(il,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=ve(n,12);try{const n=[],r=je(ve(t,32,64)),o=je(ve(t,r,r+32)),i=ve(t,r+32);for(let t=0;t<o;t++){const e=$u(i,32*t);if(null==e)throw new Error("abort");n.push(e)}e.urls=n}catch(t){ie(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=tl(t,64);if(null==n)throw new Error("abort");e.calldata=n}catch(t){ie(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ie(ve(t,100,128)===ve(il,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=ve(t,96,100);try{const n=tl(t,128);if(null==n)throw new Error("abort");e.extraData=n}catch(t){ie(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map((t=>e[t])),e}(ve(t.data,4))}catch(t){ie(!1,t.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:o}})}ie(s.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:s.errorArgs}});const a=await this.ccipReadFetch(r,s.calldata,s.urls);ie(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:t.data,errorArgs:s.errorArgs}});const c={to:i,data:ge([s.selector,ol([a,s.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const t=await this.#Nt(c,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:t}),t}catch(t){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:t}),t}}throw t}}async#Lt(t){const{value:e}=await $t({network:this.getNetwork(),value:t});return e}async call(t){const{tx:e,blockTag:n}=await $t({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await this.#Lt(this.#Nt(e,n,t.enableCcipRead?0:-1))}async#_t(t,e,n){let r=this._getAddress(e),o=this._getBlockTag(n);return"string"==typeof r&&"string"==typeof o||([r,o]=await Promise.all([r,o])),await this.#Lt(this.#It(Object.assign(t,{address:r,blockTag:o})))}async getBalance(t,e){return Ce(await this.#_t({method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return je(await this.#_t({method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return ye(await this.#_t({method:"getCode"},t,e))}async getStorage(t,e,n){const r=Ce(e,"position");return ye(await this.#_t({method:"getStorage",position:r},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:r}=await $t({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),o=eu.from(t);if(o.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(o,r).replaceableTransaction(e)}async#Ut(t,e){if(pe(t,32))return await this.#It({method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return"string"!=typeof n&&(n=await n),await this.#It({method:"getBlock",blockTag:n,includeTransactions:e})}async getBlock(t,e){const{network:n,params:r}=await $t({network:this.getNetwork(),params:this.#Ut(t,!!e)});return null==r?null:this._wrapBlock(r,n)}async getTransaction(t){const{network:e,params:n}=await $t({network:this.getNetwork(),params:this.#It({method:"getTransaction",hash:t})});return null==n?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await $t({network:this.getNetwork(),params:this.#It({method:"getTransactionReceipt",hash:t})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const e=await this.#It({method:"getTransaction",hash:t});if(null==e)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=e.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await $t({network:this.getNetwork(),result:this.#It({method:"getTransactionResult",hash:t})});return null==e?null:ye(e)}async getLogs(t){let e=this._getFilter(t);Qu(e)&&(e=await e);const{network:n,params:r}=await $t({network:this.getNetwork(),params:this.#It({method:"getLogs",filter:e})});return r.map((t=>this._wrapLog(t,n)))}_getProvider(t){ie(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await wu.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){const e=qs((t=qn(t)).substring(2).toLowerCase()+".addr.reverse");try{const n=await wu.getEnsAddress(this),r=new Si(n,["function resolver(bytes32) view returns (address)"],this),o=await r.resolver(e);if(null==o||o===Uo)return null;const i=new Si(o,["function name(bytes32) view returns (string)"],this),s=await i.name(e);return await this.resolveName(s)!==t?null:s}catch(t){if(ne(t,"BAD_DATA")&&"0x"===t.value)return null;if(ne(t,"CALL_EXCEPTION"))return null;throw t}return null}async waitForTransaction(t,e,n){const r=null!=e?e:1;return 0===r?this.getTransactionReceipt(t):new Promise((async(e,o)=>{let i=null;const s=async n=>{try{const o=await this.getTransactionReceipt(t);if(null!=o&&n-o.blockNumber+1>=r)return e(o),void(i&&(clearTimeout(i),i=null))}catch(t){console.log("EEE",t)}this.once("block",s)};null!=n&&(i=setTimeout((()=>{null!=i&&(i=null,this.off("block",s),o(oe("timeout","TIMEOUT",{reason:"timeout"})))}),n)),s(await this.getBlockNumber())}))}async waitForBlock(t){ie(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=this.#Rt.get(t);e&&(e.timer&&clearTimeout(e.timer),this.#Rt.delete(t))}_setTimeout(t,e){null==e&&(e=0);const n=this.#jt++,r=()=>{this.#Rt.delete(n),t()};if(this.paused)this.#Rt.set(n,{timer:null,func:r,time:e});else{const t=setTimeout(r,e);this.#Rt.set(n,{timer:t,func:r,time:Wu()})}return n}_forEachSubscriber(t){for(const e of this.#Ot.values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Ku(t.type);case"block":return new Fu(this);case"event":return new zu(this,t.filter);case"transaction":return new Hu(this,t.hash);case"orphan":return new Gu(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of this.#Ot.values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),null!=this.#Pt&&e.pause(this.#Pt);break}}async#Dt(t,e){let n=await Yu(t,this);return"event"===n.type&&e&&e.length>0&&!0===e[0].removed&&(n=await Yu({orphan:"drop-log",log:e[0]},this)),this.#Ot.get(n.tag)||null}async#Ft(t){const e=await Yu(t,this),n=e.tag;let r=this.#Ot.get(n);return r||(r={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#Ot.set(n,r)),r}async on(t,e){const n=await this.#Ft(t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Pt&&n.subscriber.pause(this.#Pt)),this}async once(t,e){const n=await this.#Ft(t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=this.#Pt&&n.subscriber.pause(this.#Pt)),this}async emit(t,...e){const n=await this.#Dt(t,e);if(!n||0===n.listeners.length)return!1;const r=n.listeners.length;return n.listeners=n.listeners.filter((({listener:n,once:r})=>{const o=new ni(this,r?null:n,t);try{n.call(this,...e,o)}catch(t){}return!r})),0===n.listeners.length&&(n.started&&n.subscriber.stop(),this.#Ot.delete(n.tag)),r>0}async listenerCount(t){if(t){const e=await this.#Dt(t);return e?e.listeners.length:0}let e=0;for(const{listeners:t}of this.#Ot.values())e+=t.length;return e}async listeners(t){if(t){const e=await this.#Dt(t);return e?e.listeners.map((({listener:t})=>t)):[]}let e=[];for(const{listeners:t}of this.#Ot.values())e=e.concat(t.map((({listener:t})=>t)));return e}async off(t,e){const n=await this.#Dt(t);if(!n)return this;if(e){const t=n.listeners.map((({listener:t})=>t)).indexOf(e);t>=0&&n.listeners.splice(t,1)}return e&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),this.#Ot.delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:r}=await this.#Ft(t);n&&r.stop(),this.#Ot.delete(e)}else for(const[t,{started:e,subscriber:n}]of this.#Ot)e&&n.stop(),this.#Ot.delete(t);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return this.#kt}destroy(){this.removeAllListeners();for(const t of this.#Rt.keys())this._clearTimeout(t);this.#kt=!0}get paused(){return null!=this.#Pt}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(this.#Tt=-1,null!=this.#Pt){if(this.#Pt==!!t)return;ie(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber((e=>e.pause(t))),this.#Pt=!!t;for(const t of this.#Rt.values())t.timer&&clearTimeout(t.timer),t.time=Wu()-t.time}resume(){if(null!=this.#Pt){this._forEachSubscriber((t=>t.resume())),this.#Pt=null;for(const t of this.#Rt.values()){let e=t.time;e<0&&(e=0),t.time=Wu(),setTimeout(t.func,e)}}}}function $u(t,e){try{const n=tl(t,e);if(n)return vr(n)}catch(t){}return null}function tl(t,e){if("0x"===t)return null;try{const n=je(ve(t,e,e+32)),r=je(ve(t,n,n+32));return ve(t,n+32,n+32+r)}catch(t){}return null}function el(t){const e=Be(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function nl(t){if(t.length%32==0)return t;const e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}const rl=new Uint8Array([]);function ol(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(rl),n+=32;for(let r=0;r<t.length;r++){const o=fe(t[r]);e[r]=el(n),e.push(el(o.length)),e.push(nl(o)),n+=32+32*Math.ceil(o.length/32)}return ge(e)}const il="0x0000000000000000000000000000000000000000000000000000000000000000";function sl(t,e){if(t.provider)return t.provider;ie(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function al(t,e){let n=Yo(e);if(null!=n.to&&(n.to=wo(n.to,t)),null!=n.from){const e=n.from;n.from=Promise.all([t.getAddress(),wo(e,t)]).then((([t,e])=>(se(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e),t)))}else n.from=t.getAddress();return await $t(n)}class cl{provider;constructor(t){te(this,{provider:t||null})}async getNonce(t){return sl(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await al(this,t)}async populateTransaction(t){const e=sl(this,"populateTransaction"),n=await al(this,t);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();null!=n.chainId?se(Ce(n.chainId)===r.chainId,"transaction chainId mismatch","tx.chainId",t.chainId):n.chainId=r.chainId;const o=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!o?0!==n.type&&1!==n.type||!o||se(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t):se(!1,"eip-1559 transaction do not support gasPrice","tx",t),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const t=await e.getFeeData();ie(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=t.gasPrice)}else{const t=await e.getFeeData();if(null==n.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(n.type=2,null!=n.gasPrice){const t=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=t,n.maxPriorityFeePerGas=t}else null==n.maxFeePerGas&&(n.maxFeePerGas=t.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(ie(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=t.gasPrice),n.type=0):ie(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=t.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}else n.type=2;return await $t(n)}async estimateGas(t){return sl(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return sl(this,"call").call(await this.populateCall(t))}async resolveName(t){const e=sl(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){const e=sl(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const r=eu.from(n);return await e.broadcastTransaction(await this.signTransaction(r))}}class ul{#gt;#Mt;#mt;#At;#Gt;#Ht;constructor(t){this.#gt=t,this.#Mt=null,this.#mt=this.#wt.bind(this),this.#At=!1,this.#Gt=null,this.#Ht=!1}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}async#wt(t){try{null==this.#Mt&&(this.#Mt=this._subscribe(this.#gt));let t=null;try{t=await this.#Mt}catch(t){if(!ne(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==t)return this.#Mt=null,void this.#gt._recoverSubscriber(this,this._recover(this.#gt));const e=await this.#gt.getNetwork();if(this.#Gt||(this.#Gt=e),this.#Gt.chainId!==e.chainId)throw new Error("chaid changed");if(this.#Ht)return;const n=await this.#gt.send("eth_getFilterChanges",[t]);await this._emitResults(this.#gt,n)}catch(t){console.log("@TODO",t)}this.#gt.once("block",this.#mt)}#zt(){const t=this.#Mt;t&&(this.#Mt=null,t.then((t=>{this.#gt.send("eth_uninstallFilter",[t])})))}start(){this.#At||(this.#At=!0,this.#wt(-2))}stop(){this.#At&&(this.#At=!1,this.#Ht=!0,this.#zt(),this.#gt.off("block",this.#mt))}pause(t){t&&this.#zt(),this.#gt.off("block",this.#mt)}resume(){this.start()}}class ll extends ul{#Vt;constructor(t,e){var n;super(t),this.#Vt=(n=e,JSON.parse(JSON.stringify(n)))}_recover(t){return new zu(t,this.#Vt)}async _subscribe(t){return await t.send("eth_newFilter",[this.#Vt])}async _emitResults(t,e){for(const n of e)t.emit(this.#Vt,t._wrapLog(n,t._network))}}class fl extends ul{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const hl="bigint,boolean,function,number,string,symbol".split(/,/g);function pl(t){if(null==t||hl.indexOf(typeof t)>=0)return t;if("function"==typeof t.getAddress)return t;if(Array.isArray(t))return t.map(pl);if("object"==typeof t)return Object.keys(t).reduce(((e,n)=>(e[n]=t[n],e)),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function dl(t){return new Promise((e=>{setTimeout(e,t)}))}function yl(t){return t?t.toLowerCase():t}function gl(t){return t&&"number"==typeof t.pollingInterval}const ml={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250};class vl extends cl{address;constructor(t,e){super(t),te(this,{address:e=qn(e)})}connect(t){ie(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const e=pl(t),n=[];if(e.from){const r=e.from;n.push((async()=>{const n=await wo(r,this.provider);se(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=n})())}else e.from=this.address;if(null==e.gasLimit&&n.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})()),null!=e.to){const t=e.to;n.push((async()=>{e.to=await wo(t,this.provider)})())}n.length&&await Promise.all(n);const r=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(t){const e=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(t);return await new Promise(((t,r)=>{const o=[1e3,100],i=async()=>{const r=await this.provider.getTransaction(n);null==r?this.provider._setTimeout((()=>{i()}),o.pop()||4e3):t(r.replaceableTransaction(e))};i()}))}async signTransaction(t){const e=pl(t);if(e.from){const n=await wo(e.from,this.provider);se(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=n}else e.from=this.address;const n=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[n])}async signMessage(t){const e="string"==typeof t?mr(t):t;return await this.provider.send("personal_sign",[ye(e),this.address.toLowerCase()])}async signTypedData(t,e,n){const r=pl(n),o=await No.resolveNames(t,e,r,(async t=>{const e=await wo(t);return se(null!=e,"TypedData does not support null address","value",t),e}));return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(No.getPayload(o.domain,e,o.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const e="string"==typeof t?mr(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ye(e)])}}class bl extends Zu{#s;#Qt;#Jt;#Kt;#qt;#Gt;#Yt(){if(this.#Kt)return;const t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#Kt=setTimeout((()=>{this.#Kt=null;const t=this.#Jt;for(this.#Jt=[];t.length;){const e=[t.shift()];for(;t.length&&e.length!==this.#s.batchMaxCount;)if(e.push(t.shift()),JSON.stringify(e.map((t=>t.payload))).length>this.#s.batchMaxSize){t.unshift(e.pop());break}(async()=>{const t=1===e.length?e[0].payload:e.map((t=>t.payload));this.emit("debug",{action:"sendRpcPayload",payload:t});try{const n=await this._send(t);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:t,reject:r,payload:o}of e){if(this.destroyed){r(oe("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:o.method}));continue}const e=n.filter((t=>t.id===o.id))[0];if(null!=e)"error"in e?r(this.getRpcError(o,e)):t(e.result);else{const t=oe("missing response for request","BAD_DATA",{value:n,info:{payload:o}});this.emit("error",t),r(t)}}}catch(t){this.emit("debug",{action:"receiveRpcError",error:t});for(const{reject:n}of e)n(t)}})()}}),t)}constructor(t,e){const n={};e&&null!=e.cacheTimeout&&(n.cacheTimeout=e.cacheTimeout),super(t,n),this.#Qt=1,this.#s=Object.assign({},ml,e||{}),this.#Jt=[],this.#Kt=null,this.#Gt=null;{let t=null;const e=new Promise((e=>{t=e}));this.#qt={promise:e,resolve:t}}const r=this._getOption("staticNetwork");r&&(se(null==t||r.matches(t),"staticNetwork MUST match network object","options",e),this.#Gt=r)}_getOption(t){return this.#s[t]}get _network(){return ie(this.#Gt,"network is not available yet","NETWORK_ERROR"),this.#Gt}async _perform(t){if("call"===t.method||"estimateGas"===t.method){let e=t.transaction;if(e&&null!=e.type&&Ce(e.type)&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},e,{type:void 0})}))}}const e=this.getRpcRequest(t);return null!=e?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)return t;if(this.ready)return _u.from(Ce(await this.send("eth_chainId",[])));const e={id:this.#Qt++,method:"eth_chainId",params:[],jsonrpc:"2.0"};let n;this.emit("debug",{action:"sendRpcPayload",payload:e});try{n=(await this._send(e))[0]}catch(t){throw this.emit("debug",{action:"receiveRpcError",error:t}),t}if(this.emit("debug",{action:"receiveRpcResult",result:n}),"result"in n)return _u.from(Ce(n.result));throw this.getRpcError(e,n)}_start(){null!=this.#qt&&null!=this.#qt.resolve&&(this.#qt.resolve(),this.#qt=null,(async()=>{for(;null==this.#Gt&&!this.destroyed;)try{this.#Gt=await this._detectNetwork()}catch(t){console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",oe("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await dl(1e3)}this.#Yt()})())}async _waitUntilReady(){if(null!=this.#qt)return await this.#qt.promise}_getSubscriber(t){return"pending"===t.type?new fl(this):"event"===t.type?this._getOption("polling")?new zu(this,t.filter):new ll(this,t.filter):"orphan"===t.type&&"drop-log"===t.filter.orphan?new Ku("orphan"):super._getSubscriber(t)}get ready(){return null==this.#qt}getRpcTransaction(t){const e={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((n=>{if(null==t[n])return;let r=n;"gasLimit"===n&&(r="gas"),e[r]=Ie(Ce(t[n],`tx.${n}`))})),["from","to","data"].forEach((n=>{null!=t[n]&&(e[n]=ye(t[n]))})),t.accessList&&(e.accessList=_o(t.accessList)),e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[yl(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[yl(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[yl(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[yl(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&null!=t.filter.address&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(yl):t.filter.address=yl(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){const{method:n}=t,{error:r}=e;if("eth_estimateGas"===n&&r.message){const e=r.message;if(!e.match(/revert/i)&&e.match(/insufficient funds/i))return oe("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:r}})}if("eth_call"===n||"eth_estimateGas"===n){const e=Al(r),o=mo.getBuiltinCallException("eth_call"===n?"call":"estimateGas",t.params[0],e?e.data:null);return o.info={error:r,payload:t},o}const o=JSON.stringify(function(t){const e=[];return El(t,e),e}(r));if("string"==typeof r.message&&r.message.match(/user denied|ethers-user-denied/i))return oe("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:t,error:r}});if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const e=t.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return oe("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e,info:{error:r}});if(o.match(/nonce/i)&&o.match(/too low/i))return oe("nonce has already been used","NONCE_EXPIRED",{transaction:e,info:{error:r}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return oe("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e,info:{error:r}});if(o.match(/only replay-protected/i))return oe("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:e,info:{error:r}}})}let i=!!o.match(/the method .* does not exist/i);return i||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(i=!0),i?oe("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:r,payload:t}}):oe("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(oe("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const n=this.#Qt++,r=new Promise(((r,o)=>{this.#Jt.push({resolve:r,reject:o,payload:{method:t,params:e,id:n,jsonrpc:"2.0"}})}));return this.#Yt(),r}async getSigner(t){null==t&&(t=0);const e=this.send("eth_accounts",[]);if("number"==typeof t){const n=await e;if(t>=n.length)throw new Error("no such account");return new vl(this,n[t])}const{accounts:n}=await $t({network:this.getNetwork(),accounts:e});t=qn(t);for(const e of n)if(qn(e)===t)return new vl(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map((t=>new vl(this,t)))}destroy(){this.#Kt&&(clearTimeout(this.#Kt),this.#Kt=null);for(const{payload:t,reject:e}of this.#Jt)e(oe("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));this.#Jt=[],super.destroy()}}class wl extends bl{#Wt;constructor(t,e){super(t,e),this.#Wt=4e3}_getSubscriber(t){const e=super._getSubscriber(t);return gl(e)&&(e.pollingInterval=this.#Wt),e}get pollingInterval(){return this.#Wt}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");this.#Wt=t,this._forEachSubscriber((t=>{gl(t)&&(t.pollingInterval=this.#Wt)}))}}function Al(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&pe(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(const e in t){const n=Al(t[e]);if(n)return n}return null}if("string"==typeof t)try{return Al(JSON.parse(t))}catch(t){}return null}function El(t,e){if(null!=t){if("string"==typeof t.message&&e.push(t.message),"object"==typeof t)for(const n in t)El(t[n],e);if("string"==typeof t)try{return El(JSON.parse(t),e)}catch(t){}}}class Ol extends wl{#ct;constructor(t,e){super(e,{batchMaxCount:1}),this.#ct=async(e,n)=>{const r={method:e,params:n};this.emit("debug",{action:"sendEip1193Request",payload:r});try{const e=await t.request(r);return this.emit("debug",{action:"receiveEip1193Result",result:e}),e}catch(t){const e=new Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=r,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){se(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const e=await this.#ct(t.method,t.params||[]);return[{id:t.id,result:e}]}catch(e){return[{id:t.id,error:{code:e.code,data:e.data,message:e.message}}]}}getRpcError(t,e){switch((e=JSON.parse(JSON.stringify(e))).error.code||-1){case 4001:e.error.message=`ethers-user-denied: ${e.error.message}`;break;case 4200:e.error.message=`ethers-unsupported: ${e.error.message}`}return super.getRpcError(t,e)}async hasSigner(t){null==t&&(t=0);const e=await this.send("eth_accounts",[]);return"number"==typeof t?e.length>t:(t=t.toLowerCase(),0!==e.filter((e=>e.toLowerCase()===t)).length)}async getSigner(t){if(null==t&&(t=0),!await this.hasSigner(t))try{await this.#ct("eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(t)}}const Pl=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"string","name":"roleName","type":"string"},{"indexed":false,"internalType":"uint8","name":"avatarId","type":"uint8"}],"name":"RoleCreated","type":"event"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"uint8","name":"_avatarId","type":"uint8"}],"name":"createRole","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getRole","outputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"uint8","name":"","type":"uint8"},{"internalType":"uint32","name":"","type":"uint32"},{"internalType":"uint8","name":"","type":"uint8"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"getRoleByName","outputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"uint8","name":"","type":"uint8"},{"internalType":"uint32","name":"","type":"uint32"},{"internalType":"uint8","name":"","type":"uint8"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_name","type":"string"}],"name":"roleExists","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"components":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"name","type":"string"},{"internalType":"uint256","name":"age","type":"uint256"}],"internalType":"struct LevelConfig.LevelCfg[]","name":"config","type":"tuple[]"}],"name":"setLevelConfig","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]');function kl(t){return kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kl(t)}function Cl(){Cl=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(o||[]);return r(s,"_invoke",{value:A(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==e&&n.call(m,i)&&(y=m);var v=d.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==kl(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function A(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function xl(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function Sl(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){xl(i,r,o,s,a,"next",t)}function a(t){xl(i,r,o,s,a,"throw",t)}s(void 0)}))}}var Tl,jl,Rl,Bl=(Tl={},jl=Bt,Rl=new Wt,(jl=function(t){var e=function(t,e){if("object"!==kl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==kl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===kl(e)?e:String(e)}(jl))in Tl?Object.defineProperty(Tl,jl,{value:Rl,enumerable:!0,configurable:!0,writable:!0}):Tl[jl]=Rl,Tl),Il=function(){return Bl[arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bt]},Nl=function(){var t=Sl(Cl().mark((function t(e,n,r,o){var i,s;return Cl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new Ol(r),t.next=3,Ll(i,o);case 3:return s=t.sent,t.abrupt("return",new Si(e,n,o?s:i));case 5:case"end":return t.stop()}}),t)})));return function(e,n,r,o){return t.apply(this,arguments)}}(),Ll=function(){var t=Sl(Cl().mark((function t(e,n){return Cl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSigner(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),_l=function(){var t=Sl(Cl().mark((function t(e,n){return Cl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Nl("0x5146eE6c8D420a09f6f81F36392474dB1ef6AB35",Pl,e,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function Ul(t){return Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(t)}function Dl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fl(r.key),r)}}function Fl(t){var e=function(t,e){if("object"!==Ul(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ul(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ul(e)?e:String(e)}function Ml(t,e){return Ml=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ml(t,e)}function Gl(t){return Gl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gl(t)}var Hl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ml(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Gl(r);if(o){var n=Gl(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ul(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"connectWalletModel",get:function(){return this.retrieveModel(Rt)}},{key:"onRegister",value:function(){var t=this;fgui.UIPackage.getByName(R)?this.initUi():this.sendEvent(k,{assets:[R],callback:function(){return t.initUi()}})}},{key:"onRemove",value:function(){this.viewComponent.btn.off(fgui.InteractiveEvents.Down,this.onConnect,this),this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null}},{key:"initUi",value:function(){this.viewComponent.initUi(R,"ConnectWallet"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.$getController("c1").setSelectedIndex(0),this.viewComponent.btn.on(fgui.InteractiveEvents.Down,this.onConnect,this),this.gameView.viewComponent.uiLayer4.addChild(this.viewComponent)}},{key:"onConnect",value:function(t){var e=this;t.stopPropagation();var n,r,o=this.viewComponent.$getController("c1");void 0!==window.ethereum?(o.setSelectedIndex(1),Il().activate(this.connectWalletModel.chainId).then((function(){e.sendEvent(C),e.destroy()})).catch((function(t){console.log(t,t.code),o.setSelectedIndex(0)}))):(r=!1,n=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4)))&&(r=!0),r?this.sendEvent(T,{msg:"如果您使用手机，请使用 MetaMask 应用程序的浏览器进行连接。"}):this.sendEvent(T,{msg:"您的浏览器没有安装 Metamask 插件，是否前往安装？",onOk:function(){window.open("https://metamask.io/download/","_blank")}}))}},{key:"destroy",value:function(){this.sendEvent(P,{viewClazz:s})}}])&&Dl(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function zl(t){return zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(t)}function Vl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ql(r.key),r)}}function Ql(t){var e=function(t,e){if("object"!==zl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==zl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===zl(e)?e:String(e)}function Jl(){return Jl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ql(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Jl.apply(this,arguments)}function Kl(t,e){return Kl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kl(t,e)}function ql(t){return ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ql(t)}var Yl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kl(t,e)}(s,fgui.GComponent);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ql(r);if(o){var n=ql(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===zl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this)).ui=null,t.on(fgui.InteractiveEvents.Down,t.onDown),t}return e=s,(n=[{key:"initUi",value:function(t,e){fgui.UIPackage.getByName(t)&&(this.ui=fgui.UIPackage.createObject(t,e),this.ui&&(this.addChild(this.ui),this.onLoaded()))}},{key:"initUiFromURL",value:function(t){this.ui=fgui.UIPackage.createObjectFromURL(t),this.ui&&(this.addChild(this.ui),this.onLoaded())}},{key:"$getChild",value:function(t){return this.ui?this.ui.getChild(t):null}},{key:"$getController",value:function(t){return this.ui?this.ui.getController(t):null}},{key:"$getTransition",value:function(t){return this.ui?this.ui.getTransition(t):null}},{key:"onLoaded",value:function(){}},{key:"onDown",value:function(t){t.stopPropagation()}},{key:"dispose",value:function(){Jl(ql(s.prototype),"dispose",this).call(this),this.ui=null,this.off(fgui.InteractiveEvents.Down,this.onDown)}}])&&Vl(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}();function Wl(t){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(t)}function Xl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zl(r.key),r)}}function Zl(t){var e=function(t,e){if("object"!==Wl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Wl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Wl(e)?e:String(e)}function $l(){return $l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ef(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},$l.apply(this,arguments)}function tf(t,e){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tf(t,e)}function ef(t){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ef(t)}var nf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tf(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ef(r);if(o){var n=ef(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.btn=this.$getChild("btn")}},{key:"dispose",value:function(){$l(ef(s.prototype),"dispose",this).call(this),this.btn=null}}])&&Xl(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function rf(t){return rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(t)}function of(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sf(r.key),r)}}function sf(t){var e=function(t,e){if("object"!==rf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===rf(e)?e:String(e)}function af(t,e){return af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},af(t,e)}function cf(t){return cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cf(t)}var uf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&af(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=cf(r);if(o){var n=cf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===rf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"onRegister",value:function(){var t=this;this.inAnime=null,this.outAnime=null,this.onOkHandler=null,this.onCancelHandler=null,fgui.UIPackage.getByName(R)?this.initUi():this.sendEvent(k,{assets:[R],callback:function(){return t.initUi()}})}},{key:"onRemove",value:function(){this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null,this.inAnime=null,this.outAnime=null,this.onOkHandler=null,this.onCancelHandler=null}},{key:"listEventInterests",value:function(){return[T]}},{key:"handleEvent",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=function(t,e,n){return(e=sf(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},T,(function(){n&&(e.viewComponent.visible=!0,e.viewComponent.msg.text=n.msg,e.onOkHandler=n.onOk,e.onCancelHandler=n.onCancel,e.inAnime&&e.inAnime.play())}));r[t]&&r[t]()}},{key:"initUi",value:function(){this.viewComponent.initUi(R,"SystemPrompt"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.visible=!1,this.inAnime=this.viewComponent.$getTransition("t0"),this.outAnime=this.viewComponent.$getTransition("t1"),this.viewComponent.closeBtn.on(fgui.InteractiveEvents.Down,this.onClose,this),this.viewComponent.cancelBtn.on(fgui.InteractiveEvents.Down,this.onCancel,this),this.viewComponent.confirmBtn.on(fgui.InteractiveEvents.Down,this.onConfirm,this),this.gameView.viewComponent.uiLayer5.addChild(this.viewComponent)}},{key:"onClose",value:function(t){var e=this;t.stopPropagation(),this.outAnime&&this.outAnime.play((function(){e.viewComponent.visible=!1})),this.onCancelHandler&&this.onCancelHandler()}},{key:"onCancel",value:function(t){var e=this;t.stopPropagation(),this.outAnime&&this.outAnime.play((function(){e.viewComponent.visible=!1})),this.onCancelHandler&&this.onCancelHandler()}},{key:"onConfirm",value:function(t){var e=this;t.stopPropagation(),this.outAnime&&this.outAnime.play((function(){e.viewComponent.visible=!1})),this.onOkHandler&&this.onOkHandler()}}],n&&of(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function lf(t){return lf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(t)}function ff(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hf(r.key),r)}}function hf(t){var e=function(t,e){if("object"!==lf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==lf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===lf(e)?e:String(e)}function pf(){return pf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yf(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},pf.apply(this,arguments)}function df(t,e){return df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},df(t,e)}function yf(t){return yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yf(t)}var gf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&df(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=yf(r);if(o){var n=yf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===lf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.closeBtn=this.$getChild("closeBtn"),this.cancelBtn=this.$getChild("cancelBtn"),this.confirmBtn=this.$getChild("confirmBtn"),this.msg=this.$getChild("msg")}},{key:"dispose",value:function(){pf(yf(s.prototype),"dispose",this).call(this),this.closeBtn=null,this.cancelBtn=null,this.confirmBtn=null,this.msg=null}}])&&ff(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function mf(t){return mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mf(t)}function vf(t,e,n){return(e=wf(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wf(r.key),r)}}function wf(t){var e=function(t,e){if("object"!==mf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==mf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===mf(e)?e:String(e)}function Af(t,e){return Af=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Af(t,e)}function Ef(t){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ef(t)}var Of=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Af(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Ef(r);if(o){var n=Ef(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"onRegister",value:function(){var t=this;fgui.UIPackage.getByName(B)?this.initUi():this.sendEvent(CMD_LOAD_ASSETS,{assets:[B],callback:function(){return t.initUi()}})}},{key:"listEventInterests",value:function(){return[x,S]}},{key:"handleEvent",value:function(t){var e,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=(vf(e={},x,(function(){n.viewComponent.visible=!0;var t=Math.max(250*r/100,n.viewComponent.bar.width);n.viewComponent.bar.width=t})),vf(e,S,(function(){n.viewComponent.visible=!1,n.viewComponent.bar.width=250})),e);o[t]&&o[t]()}},{key:"initUi",value:function(){this.viewComponent.initUi(B,"loading"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.visible=!1,this.gameView.viewComponent.uiLayer5.addChild(this.viewComponent)}}],n&&bf(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function Pf(t){return Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(t)}function kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cf(r.key),r)}}function Cf(t){var e=function(t,e){if("object"!==Pf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Pf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Pf(e)?e:String(e)}function xf(){return xf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tf(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},xf.apply(this,arguments)}function Sf(t,e){return Sf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Sf(t,e)}function Tf(t){return Tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Tf(t)}var jf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sf(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Tf(r);if(o){var n=Tf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.bar=this.$getChild("bar")}},{key:"dispose",value:function(){xf(Tf(s.prototype),"dispose",this).call(this),this.bar=null}}])&&kf(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function Rf(t){return Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(t)}function Bf(){Bf=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(o||[]);return r(s,"_invoke",{value:A(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==e&&n.call(m,i)&&(y=m);var v=d.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Rf(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function A(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function If(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function Nf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lf(r.key),r)}}function Lf(t){var e=function(t,e){if("object"!==Rf(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Rf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Rf(e)?e:String(e)}function _f(t,e){return _f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_f(t,e)}function Uf(t){return Uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uf(t)}var Df=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_f(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Uf(r);if(o){var n=Uf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Rf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"onRegister",value:function(){var t=this;this.currentBgUrl=null,fgui.UIPackage.getByName(I)?this.initUi():this.sendEvent(k,{assets:[I],callback:function(){return t.initUi()}})}},{key:"listEventInterests",value:function(){return[j]}},{key:"handleEvent",value:function(t){var e,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=function(t,e,n){return(e=Lf(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},j,(e=Bf().mark((function t(){return Bf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r.url&&n.currentBgUrl!==r.url&&(n.currentBgUrl=r.url,n.viewComponent.bg.clearContent(),n.viewComponent.bg.url=r.url,n.viewComponent.bg.updateLayout());case 1:case"end":return t.stop()}}),t)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(t){If(i,r,o,s,a,"next",t)}function a(t){If(i,r,o,s,a,"throw",t)}s(void 0)}))}));o[t]&&o[t]()}},{key:"initUi",value:function(){this.viewComponent.initUi(I,"bg"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.gameView.viewComponent.uiLayer0.addChild(this.viewComponent)}}],n&&Nf(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function Ff(t){return Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(t)}function Mf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gf(r.key),r)}}function Gf(t){var e=function(t,e){if("object"!==Ff(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ff(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ff(e)?e:String(e)}function Hf(t,e){return Hf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hf(t,e)}function zf(t){return zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zf(t)}var Vf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hf(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zf(r);if(o){var n=zf(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ff(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.bg=this.$getChild("bg")}}])&&Mf(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function Qf(t){return Qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(t)}function Jf(){Jf=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(o||[]);return r(s,"_invoke",{value:A(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==e&&n.call(m,i)&&(y=m);var v=d.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Qf(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function A(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Kf(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function qf(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){Kf(i,r,o,s,a,"next",t)}function a(t){Kf(i,r,o,s,a,"throw",t)}s(void 0)}))}}var Yf=function(){var t=qf(Jf().mark((function t(){var e;return Jf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Il(),t.next=3,_l(e.provider,e.accounts[0]);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Wf=function(){var t=qf(Jf().mark((function t(){return Jf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yf();case 2:return t.next=4,t.sent.getRole();case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Xf=function(){var t=qf(Jf().mark((function t(e){return Jf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yf();case 2:return t.next=4,t.sent.getRoleByName(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Zf=function(){var t=qf(Jf().mark((function t(e,n){return Jf().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yf();case 2:return t.next=4,t.sent.createRole(e,n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function $f(t){return $f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(t)}function th(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,eh(r.key),r)}}function eh(t){var e=function(t,e){if("object"!==$f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==$f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===$f(e)?e:String(e)}function nh(){return nh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},nh.apply(this,arguments)}function rh(t,e){return rh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rh(t,e)}function oh(t){return oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oh(t)}var ih=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rh(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=oh(r);if(o){var n=oh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===$f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).initUiFromURL(t),e}return e=s,n=[{key:"num",get:function(){return this._num},set:function(t){t!==this._num&&(this._num=t,this._updateNum())}},{key:"onLoaded",value:function(){this.n0=this.$getChild("n0"),this.n1=this.$getChild("n1"),this.n2=this.$getChild("n2"),this.n3=this.$getChild("n3"),this.n4=this.$getChild("n4"),this.c1=this.$getController("c1"),this.c2=this.$getController("c2"),this._num=0,this._updateNum()}},{key:"dispose",value:function(){nh(oh(s.prototype),"dispose",this).call(this),this.n0=null,this.n1=null,this.n2=null,this.n3=null,this.n4=null}},{key:"_updateNum",value:function(){var t=this._num;this._num>=1e4&&(t=Math.round(this._num/1e4)),this.c1.setSelectedIndex(this._num>=1e4?1:0),this.n0.visible=!0,this.n1.visible=!1,this.n2.visible=!1,this.n3.visible=!1,this.n4.visible=!1;for(var e=t.toString(),n=0,r=e.length;n<r;n++){var o=Number(e[n]),i=this["n".concat(n)];i.visible=!0,i.getController("c1").setSelectedIndex(o)}this.c2.setSelectedIndex(e.length-1)}}],n&&th(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function sh(t){return sh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sh(t)}function ah(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ch(r.key),r)}}function ch(t){var e=function(t,e){if("object"!==sh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==sh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===sh(e)?e:String(e)}function uh(t,e){return uh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uh(t,e)}function lh(t){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lh(t)}var fh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uh(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lh(r);if(o){var n=lh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===sh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"roleModel",get:function(){return this.retrieveModel(At)}},{key:"onRegister",value:function(){var t=this;this.huntNum=null,this.coinNum=null,this.couponNum=null;var e=[];fgui.UIPackage.getByName(R)||e.push(R),fgui.UIPackage.getByName(_)||e.push(_),e.length>0?this.sendEvent(k,{assets:e,callback:function(){return t.initUi()}}):this.initUi()}},{key:"onRemove",value:function(){this.huntNum.dispose(),this.huntNum=null,this.coinNum.dispose(),this.coinNum=null,this.couponNum.dispose(),this.couponNum=null,this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null}},{key:"initUi",value:function(){this.viewComponent.initUi(_,"infoCard"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height;var t=this.roleModel;this.viewComponent.avatar.url="images/avatar/avatar64x64-".concat(t.avatarId+1,".png"),this.viewComponent.nickname.text=t.nickname,this.viewComponent.level.text=t.level,this.huntNum=new ih("ui://".concat(R,"/smallNum")),this.viewComponent.huntNum.displayObject.addChild(this.huntNum.displayObject),this.coinNum=new ih("ui://".concat(R,"/smallNum")),this.coinNum.num=t.gold,this.viewComponent.coinNum.displayObject.addChild(this.coinNum.displayObject),this.couponNum=new ih("ui://".concat(R,"/smallNum")),this.viewComponent.couponNum.displayObject.addChild(this.couponNum.displayObject),this.gameView.viewComponent.uiLayer4.addChild(this.viewComponent)}}])&&ah(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function hh(t){return hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hh(t)}function ph(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dh(r.key),r)}}function dh(t){var e=function(t,e){if("object"!==hh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==hh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===hh(e)?e:String(e)}function yh(){return yh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},yh.apply(this,arguments)}function gh(t,e){return gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gh(t,e)}function mh(t){return mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mh(t)}var vh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gh(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mh(r);if(o){var n=mh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===hh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.nickname=this.$getChild("nickname"),this.level=this.$getChild("level"),this.avatar=this.$getChild("avatar"),this.huntNum=this.$getChild("huntNum"),this.coinNum=this.$getChild("coinNum"),this.couponNum=this.$getChild("couponNum")}},{key:"dispose",value:function(){yh(mh(s.prototype),"dispose",this).call(this),this.nickname=null,this.level=null,this.avatar=null,this.huntNum=null,this.coinNum=null,this.couponNum=null}}])&&ph(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function bh(t){return bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(t)}function wh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ah(r.key),r)}}function Ah(t){var e=function(t,e){if("object"!==bh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===bh(e)?e:String(e)}function Eh(t,e){return Eh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Eh(t,e)}function Oh(t){return Oh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oh(t)}var Ph=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eh(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Oh(r);if(o){var n=Oh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"huntType",get:function(){return this.data.huntType},set:function(t){this.data.huntType=t}}],n&&wh(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(V),kh=function(t,e){var n=t.replace(/{{\s*([^{}\s]*)\s*}}/g,(function(t,n){return e.hasOwnProperty(n)?e[n]:t}));return n};function Ch(t){return Ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ch(t)}function xh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Sh(r.key),r)}}function Sh(t){var e=function(t,e){if("object"!==Ch(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Ch(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ch(e)?e:String(e)}function Th(t,e){return Th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Th(t,e)}function jh(t){return jh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jh(t)}var Rh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Th(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jh(r);if(o){var n=jh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"onRegister",value:function(){var t=this;fgui.UIPackage.getByName(D)?this.initUi():this.sendEvent(k,{assets:[D],callback:function(){return t.initUi()}})}},{key:"onRemove",value:function(){this.viewComponent.switchBtn.off(fgui.InteractiveEvents.Down,this.onSwitchFriend,this),this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null}},{key:"initUi",value:function(){this.viewComponent.initUi(D,"main"),console.log(this.viewComponent,this.viewComponent.ui),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.switchBtn.on(fgui.InteractiveEvents.Down,this.onSwitchFriend,this),this.gameView.viewComponent.uiLayer4.addChild(this.viewComponent)}},{key:"onSwitchFriend",value:function(t){t.stopPropagation();var e=this.viewComponent.$getController("c1");e.setSelectedIndex(0===e.selectedIndex?1:0)}}])&&xh(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function Bh(t){return Bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bh(t)}function Ih(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nh(r.key),r)}}function Nh(t){var e=function(t,e){if("object"!==Bh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Bh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Bh(e)?e:String(e)}function Lh(){return Lh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Uh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Lh.apply(this,arguments)}function _h(t,e){return _h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_h(t,e)}function Uh(t){return Uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Uh(t)}var Dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_h(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Uh(r);if(o){var n=Uh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Bh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.switchBtn=this.$getChild("switchBtn"),this.friend=this.$getChild("friend")}},{key:"dispose",value:function(){Lh(Uh(s.prototype),"dispose",this).call(this),this.switchBtn=null,this.friend=null}}])&&Ih(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function Fh(t){return Fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fh(t)}function Mh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gh(r.key),r)}}function Gh(t){var e=function(t,e){if("object"!==Fh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Fh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Fh(e)?e:String(e)}function Hh(){return Hh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vh(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Hh.apply(this,arguments)}function zh(t,e){return zh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zh(t,e)}function Vh(t){return Vh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vh(t)}var Qh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zh(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Vh(r);if(o){var n=Vh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.rankBtn=this.$getChild("rankBtn"),this.warehouseBtn=this.$getChild("warehouseBtn"),this.mixtureBtn=this.$getChild("mixtureBtn"),this.shopBtn=this.$getChild("shopBtn"),this.allianceBtn=this.$getChild("allianceBtn"),this.battleBtn=this.$getChild("battleBtn"),this.gardenBtn=this.$getChild("gardenBtn"),this.territoryBtn=this.$getChild("territoryBtn"),this.taskBtn=this.$getChild("taskBtn"),this.manualBtn=this.$getChild("manualBtn"),this.mineBtn=this.$getChild("mineBtn"),this.nightHunt=this.$getChild("nightHunt"),this.zombieHuntBtn=this.$getChild("zombieHuntBtn"),this.personalHunt=this.$getChild("personalHunt")}},{key:"dispose",value:function(){Hh(Vh(s.prototype),"dispose",this).call(this),this.rankBtn=null,this.warehouseBtn=null,this.mixtureBtn=null,this.shopBtn=null,this.allianceBtn=null,this.battleBtn=null,this.gardenBtn=null,this.territoryBtn=null,this.taskBtn=null,this.manualBtn=null,this.mineBtn=null,this.nightHunt=null,this.zombieHuntBtn=null,this.personalHunt=null}}])&&Mh(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function Jh(t){return Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(t)}function Kh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qh(r.key),r)}}function qh(t){var e=function(t,e){if("object"!==Jh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Jh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Jh(e)?e:String(e)}function Yh(t,e){return Yh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yh(t,e)}function Wh(t){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wh(t)}var Xh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yh(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Wh(r);if(o){var n=Wh(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Jh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"huntModel",get:function(){return this.retrieveModel(Ph)}},{key:"onRegister",value:function(){var t=this;this.sendEvent(j,{url:"images/bg/huntbg1.jpg"}),fgui.UIPackage.getByName(U)?this.initUi():this.sendEvent(k,{assets:[U],callback:function(){return t.initUi()}})}},{key:"onRemove",value:function(){this.viewComponent.backBtn.off(fgui.InteractiveEvents.Down,this.onBackToHall,this),this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null}},{key:"initUi",value:function(){this.viewComponent.initUi(U,"main"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.backBtn.on(fgui.InteractiveEvents.Down,this.onBackToHall,this),this.gameView.viewComponent.uiLayer4.addChild(this.viewComponent),this.sendEvent(O,{viewClazz:fh,vcClazz:vh}),2!==this.huntModel.huntType?(this.viewComponent.nextPageBtn.visible=!1,this.viewComponent.prevPageBtn.visible=!1):this.sendEvent(O,{viewClazz:Rh,vcClazz:Dh})}},{key:"onBackToHall",value:function(t){t.stopPropagation(),this.sendEvent(P,{viewClazz:Rh}),this.sendEvent(P,{viewClazz:fh}),this.sendEvent(P,{viewClazz:s}),this.sendEvent(O,{viewClazz:lp,vcClazz:Qh})}}])&&Kh(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function Zh(t){return Zh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zh(t)}function $h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tp(r.key),r)}}function tp(t){var e=function(t,e){if("object"!==Zh(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Zh(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Zh(e)?e:String(e)}function ep(){return ep="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rp(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},ep.apply(this,arguments)}function np(t,e){return np=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},np(t,e)}function rp(t){return rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rp(t)}var op=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&np(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=rp(r);if(o){var n=rp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Zh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.backBtn=this.$getChild("backBtn"),this.nextHuntBtn=this.$getChild("nextHuntBtn"),this.nextPageBtn=this.$getChild("nextPageBtn"),this.prevPageBtn=this.$getChild("prevPageBtn"),this.hole0=this.$getChild("hole0"),this.hole1=this.$getChild("hole1"),this.hole2=this.$getChild("hole2"),this.hole3=this.$getChild("hole3"),this.hole4=this.$getChild("hole4"),this.hole5=this.$getChild("hole5"),this.hole6=this.$getChild("hole6"),this.hole7=this.$getChild("hole7"),this.hole8=this.$getChild("hole8"),this.hole9=this.$getChild("hole9"),this.hole10=this.$getChild("hole10"),this.hole11=this.$getChild("hole11")}},{key:"dispose",value:function(){ep(rp(s.prototype),"dispose",this).call(this),this.backBtn=null,this.nextHuntBtn=null,this.nextPageBtn=null,this.prevPageBtn=null,this.hole0=null,this.hole1=null,this.hole2=null,this.hole3=null,this.hole4=null,this.hole5=null,this.hole6=null,this.hole7=null,this.hole8=null,this.hole9=null,this.hole10=null,this.hole11=null}}])&&$h(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function ip(t){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(t)}function sp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ap(r.key),r)}}function ap(t){var e=function(t,e){if("object"!==ip(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ip(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ip(e)?e:String(e)}function cp(t,e){return cp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cp(t,e)}function up(t){return up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},up(t)}var lp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cp(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=up(r);if(o){var n=up(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"gameModel",get:function(){return this.retrieveModel(gt)}},{key:"roleModel",get:function(){return this.retrieveModel(At)}},{key:"langModel",get:function(){return this.retrieveModel(Ct)}},{key:"huntModel",get:function(){return this.retrieveModel(Ph)}},{key:"onRegister",value:function(){var t=this;fgui.UIPackage.getByName(L)?this.initUi():this.sendEvent(k,{assets:[L],callback:function(){return t.initUi()}})}},{key:"onRemove",value:function(){this.viewComponent.rankBtn.off(fgui.InteractiveEvents.Down,this.onOpenRank,this),this.viewComponent.warehouseBtn.off(fgui.InteractiveEvents.Down,this.onOpenWarehouse,this),this.viewComponent.mixtureBtn.off(fgui.InteractiveEvents.Down,this.onOpenMixture,this),this.viewComponent.shopBtn.off(fgui.InteractiveEvents.Down,this.onOpenShop,this),this.viewComponent.allianceBtn.off(fgui.InteractiveEvents.Down,this.onOpenAlliance,this),this.viewComponent.battleBtn.off(fgui.InteractiveEvents.Down,this.onOpenBattle,this),this.viewComponent.gardenBtn.off(fgui.InteractiveEvents.Down,this.onOpenGarden,this),this.viewComponent.territoryBtn.off(fgui.InteractiveEvents.Down,this.onOpenTerritory,this),this.viewComponent.taskBtn.off(fgui.InteractiveEvents.Down,this.onOpenTask,this),this.viewComponent.manualBtn.off(fgui.InteractiveEvents.Down,this.onOpenManual,this),this.viewComponent.mineBtn.off(fgui.InteractiveEvents.Down,this.onOpenMine,this),this.viewComponent.nightHunt.off(fgui.InteractiveEvents.Down,this.onOpenNightHunt,this),this.viewComponent.zombieHuntBtn.off(fgui.InteractiveEvents.Down,this.onOpenZombieHunt,this),this.viewComponent.personalHunt.off(fgui.InteractiveEvents.Down,this.onOpenPersionalHunt,this),this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null}},{key:"initUi",value:function(){this.viewComponent.initUi(L,"hall"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.rankBtn.on(fgui.InteractiveEvents.Down,this.onOpenRank,this),this.viewComponent.warehouseBtn.on(fgui.InteractiveEvents.Down,this.onOpenWarehouse,this),this.viewComponent.mixtureBtn.on(fgui.InteractiveEvents.Down,this.onOpenMixture,this),this.viewComponent.shopBtn.on(fgui.InteractiveEvents.Down,this.onOpenShop,this),this.viewComponent.allianceBtn.on(fgui.InteractiveEvents.Down,this.onOpenAlliance,this),this.viewComponent.battleBtn.on(fgui.InteractiveEvents.Down,this.onOpenBattle,this),this.viewComponent.gardenBtn.on(fgui.InteractiveEvents.Down,this.onOpenGarden,this),this.viewComponent.territoryBtn.on(fgui.InteractiveEvents.Down,this.onOpenTerritory,this),this.viewComponent.taskBtn.on(fgui.InteractiveEvents.Down,this.onOpenTask,this),this.viewComponent.manualBtn.on(fgui.InteractiveEvents.Down,this.onOpenManual,this),this.viewComponent.mineBtn.on(fgui.InteractiveEvents.Down,this.onOpenMine,this),this.viewComponent.nightHunt.on(fgui.InteractiveEvents.Down,this.onOpenNightHunt,this),this.viewComponent.zombieHuntBtn.on(fgui.InteractiveEvents.Down,this.onOpenZombieHunt,this),this.viewComponent.personalHunt.on(fgui.InteractiveEvents.Down,this.onOpenPersionalHunt,this),this.gameView.viewComponent.uiLayer4.addChild(this.viewComponent),this.sendEvent(O,{viewClazz:fh,vcClazz:vh})}},{key:"exitHall",value:function(){this.sendEvent(P,{viewClazz:fh}),this.sendEvent(P,{viewClazz:s})}},{key:"onOpenRank",value:function(){}},{key:"onOpenWarehouse",value:function(){}},{key:"onOpenMixture",value:function(){}},{key:"onOpenShop",value:function(){}},{key:"onOpenAlliance",value:function(){}},{key:"onOpenBattle",value:function(){}},{key:"onOpenGarden",value:function(){}},{key:"onOpenTerritory",value:function(){}},{key:"onOpenTask",value:function(){}},{key:"onOpenManual",value:function(){}},{key:"onOpenMine",value:function(){}},{key:"onOpenNightHunt",value:function(){this.roleModel.level<8?this.sendEvent(T,{msg:kh(E(501,this.langModel.lang),{level:8})}):this.huntModel.huntType=1}},{key:"onOpenZombieHunt",value:function(){this.huntModel.huntType=2,this.exitHall(),this.sendEvent(O,{viewClazz:Xh,vcClazz:op})}},{key:"onOpenPersionalHunt",value:function(){this.roleModel.level<5?this.sendEvent(T,{msg:kh(E(501,this.langModel.lang),{level:5})}):this.huntModel.huntType=3}}])&&sp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function fp(t){return fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(t)}function hp(){hp=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(o||[]);return r(s,"_invoke",{value:A(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==e&&n.call(m,i)&&(y=m);var v=d.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==fp(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function A(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function pp(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function dp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yp(r.key),r)}}function yp(t){var e=function(t,e){if("object"!==fp(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==fp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===fp(e)?e:String(e)}function gp(t,e){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gp(t,e)}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mp(t)}var vp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gp(t,e)}(c,t);var e,n,r,o,i,s,a=(i=c,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=mp(i);if(s){var n=mp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function c(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),a.call(this,t)}return e=c,n=[{key:"gameView",get:function(){return this.retrieveView(Ip)}},{key:"roleModel",get:function(){return this.retrieveModel(At)}},{key:"onRegister",value:function(){var t=this;this.currentAvatarId=0,this.avatarC1=null;var e=[];fgui.UIPackage.getByName(R)||e.push(R),fgui.UIPackage.getByName(N)||e.push(N),e.length>0?this.sendEvent(k,{assets:e,callback:function(){return t.initUi()}}):this.initUi()}},{key:"onRemove",value:function(){this.viewComponent.preBtn.off(fgui.InteractiveEvents.Down,this.onPreAvatar,this),this.viewComponent.nextBtn.off(fgui.InteractiveEvents.Down,this.onNextAvatar,this),this.viewComponent.startBtn.off(fgui.InteractiveEvents.Down,this.onStartGame,this),this.viewComponent.dispose(),this.viewComponent=null,this.eventList=null,this.avatarC1=null}},{key:"initUi",value:function(){this.viewComponent.initUi(N,"createRole"),this.viewComponent.ui.width=this.gameView.viewComponent.renderer.width,this.viewComponent.ui.height=this.gameView.viewComponent.renderer.height,this.viewComponent.avatar.url="images/avatar/avatar64x64-".concat(this.currentAvatarId+1,".png"),this.viewComponent.$getTransition("t0").play(),this.viewComponent.preBtn.on(fgui.InteractiveEvents.Down,this.onPreAvatar,this),this.viewComponent.nextBtn.on(fgui.InteractiveEvents.Down,this.onNextAvatar,this),this.viewComponent.startBtn.on(fgui.InteractiveEvents.Down,this.onStartGame,this),this.gameView.viewComponent.uiLayer4.addChild(this.viewComponent)}},{key:"updateAvatar",value:function(){this.viewComponent.avatar.clearContent(),this.viewComponent.avatar.url="images/avatar/avatar64x64-".concat(this.currentAvatarId+1,".png"),this.viewComponent.avatar.updateLayout()}},{key:"onPreAvatar",value:function(t){t.stopPropagation(),this.currentAvatarId--,this.currentAvatarId<0&&(this.currentAvatarId=25),this.updateAvatar()}},{key:"onNextAvatar",value:function(t){t.stopPropagation(),this.currentAvatarId++,this.currentAvatarId>25&&(this.currentAvatarId=0),this.updateAvatar()}},{key:"onStartGame",value:(r=hp().mark((function t(e){var n,r,o,i;return hp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),n=this.viewComponent.nickname.text){t.next=5;break}return this.sendEvent(T,{msg:E(101)}),t.abrupt("return");case 5:return t.next=7,Xf(n);case 7:if(""!=t.sent[0]){t.next=24;break}return this.sendEvent(x,100),t.next=12,Zf(n,this.currentAvatarId);case 12:if(!(r=t.sent).wait){t.next=16;break}return t.next=16,r.wait();case 16:if(this.sendEvent(S),0!=r.value){t.next=22;break}return t.next=20,Wf();case 20:(o=t.sent)[0]&&((i=this.roleModel).data.nickname=o[0],i.avatarId=je(o[1]),i.level=je(o[2]),i.warGridNum=je(o[3]),i.gold=je(o[4]),i.createTime=je(o[5]),this.sendEvent(P,{viewClazz:c}),this.sendEvent(O,{viewClazz:lp,vcClazz:Qh}));case 22:t.next=25;break;case 24:this.sendEvent(T,{msg:E(102)});case 25:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function s(t){pp(i,n,o,s,a,"next",t)}function a(t){pp(i,n,o,s,a,"throw",t)}s(void 0)}))},function(t){return o.apply(this,arguments)})}],n&&dp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(Z);function bp(t){return bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bp(t)}function wp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ap(r.key),r)}}function Ap(t){var e=function(t,e){if("object"!==bp(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==bp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===bp(e)?e:String(e)}function Ep(){return Ep="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Pp(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},Ep.apply(this,arguments)}function Op(t,e){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Op(t,e)}function Pp(t){return Pp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pp(t)}var kp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Op(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Pp(r);if(o){var n=Pp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this)}return e=s,(n=[{key:"onLoaded",value:function(){this.nickname=this.$getChild("nickname"),this.preBtn=this.$getChild("preBtn"),this.nextBtn=this.$getChild("nextBtn"),this.startBtn=this.$getChild("startBtn"),this.avatar=this.$getChild("avatar")}},{key:"dispose",value:function(){Ep(Pp(s.prototype),"dispose",this).call(this),this.nickname=null,this.preBtn=null,this.nextBtn=null,this.startBtn=null,this.avatar=null}}])&&wp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Yl);function Cp(t){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(t)}function xp(){xp=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var i=e&&e.prototype instanceof h?e:h,s=Object.create(i.prototype),a=new k(o||[]);return r(s,"_invoke",{value:A(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function h(){}function p(){}function d(){}var y={};c(y,i,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(C([])));m&&m!==e&&n.call(m,i)&&(y=m);var v=d.prototype=h.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==Cp(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(f).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return i=i?i.then(r,r):r()}})}function A(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=E(s,n);if(a){if(a===f)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function E(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=d,r(v,"constructor",{value:d,configurable:!0}),r(d,"constructor",{value:p,configurable:!0}),p.displayName=c(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),c(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new w(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(v),c(v,a,"Generator"),c(v,i,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=C,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function Sp(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function Tp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jp(r.key),r)}}function jp(t){var e=function(t,e){if("object"!==Cp(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Cp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Cp(e)?e:String(e)}function Rp(t,e){return Rp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rp(t,e)}function Bp(t){return Bp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bp(t)}var Ip=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rp(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Bp(r);if(o){var n=Bp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Cp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,n=[{key:"gameModel",get:function(){return this.retrieveModel(gt)}},{key:"roleModel",get:function(){return this.retrieveModel(At)}},{key:"connectWalletModel",get:function(){return this.retrieveModel(Rt)}},{key:"onRegister",value:function(){var t=this;this.sendEvent(k,{assets:[B],callback:function(){t.sendEvent(O,{viewClazz:Of,vcClazz:jf}),t.sendEvent(k,{assets:[R,I],callback:function(){t.sendEvent(O,{viewClazz:Df,vcClazz:Vf}),t.sendEvent(O,{viewClazz:uf,vcClazz:gf}),setTimeout((function(){var e=(new Date).getHours()>=19?"hallbg2":"hallbg0";t.sendEvent(j,{url:"images/bg/".concat(e,".jpg")}),t.gotoConnectWallet()}))}})}})}},{key:"onRemove",value:function(){}},{key:"handleEvent",value:function(t){var e,n=this,r=function(t,e,n){return(e=jp(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},C,(e=xp().mark((function t(){var e,r;return xp().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Wf();case 3:e=t.sent,console.log(e),""===e[0]?n.sendEvent(O,{viewClazz:vp,vcClazz:kp}):((r=n.roleModel).data.nickname=e[0],r.avatarId=je(e[1]),r.level=je(e[2]),r.warGridNum=je(e[3]),r.gold=je(e[4]),r.createTime=je(e[5]),n.sendEvent(O,{viewClazz:lp,vcClazz:Qh})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n.sendEvent(T,{msg:E(502),onOk:function(){return n.gotoConnectWallet()},onCancel:function(){return n.gotoConnectWallet()}});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(t){Sp(i,r,o,s,a,"next",t)}function a(t){Sp(i,r,o,s,a,"throw",t)}s(void 0)}))}));r[t]&&r[t]()}},{key:"listEventInterests",value:function(){return[C]}},{key:"gotoConnectWallet",value:function(){this.sendEvent(O,{viewClazz:Hl,vcClazz:nf})}}],n&&Tp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(Z);function Np(t){return Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(t)}function Lp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_p(r.key),r)}}function _p(t){var e=function(t,e){if("object"!==Np(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Np(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Np(e)?e:String(e)}var Up=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{engine:PIXI,renderer:void 0,root:void 0,update:void 0,interpolate:!0,fps:60,renderFps:void 0,properties:{position:!0,rotation:!0,size:!1,scale:!1,alpha:!1,tile:!1}};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===e.engine)throw new Error("Please assign a rendering engine as Smoothie's engine option");if(this.engine="",e.engine.ParticleContainer&&e.engine.Sprite&&(this.renderingEngine="pixi",this.Container=e.engine.Container,this.Sprite=e.engine.Sprite,this.MovieClip=e.engine.extras.MovieClip),void 0===e.renderer)throw new Error("Please assign a renderer object as Smoothie's renderer option");if(this.renderer=e.renderer,void 0===e.root)throw new Error("Please assign a root container object (the stage) as Smoothie's rootr option");if(this.stage=e.root,void 0===e.update)throw new Error("Please assign a function that you want to update on each frame as Smoothie's update option");this.update=e.update,void 0===e.properties?this.properties={position:!0,rotation:!0}:this.properties=e.properties,void 0!==e.fps?this._fps=e.fps:this._fps=void 0,void 0!==e.renderFps?this._renderFps=e.renderFps:this._renderFps=void 0,!1===e.interpolate?this.interpolate=!1:this.interpolate=!0,this.paused=!1,this._startTime=Date.now(),this._frameDuration=1e3/this._fps,this._lag=0,this._lagOffset=0,this._renderStartTime=0,void 0!==this._renderFps&&(this._renderDuration=1e3/this._renderFps)}var e,n;return e=t,n=[{key:"fps",get:function(){return this._fps},set:function(t){this._fps=t,this._frameDuration=1e3/this._fps}},{key:"renderFps",get:function(){return this._renderFps},set:function(t){this._renderFps=t,this._renderDuration=1e3/this._renderFps}},{key:"dt",get:function(){return this._lagOffset}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1}},{key:"start",value:function(){this.gameLoop()}},{key:"gameLoop",value:function(t){var e=this;if(requestAnimationFrame(this.gameLoop.bind(this)),!this.paused){var n=function(){var t=Date.now(),n=t-e._startTime;for(n>1e3&&(n=e._frameDuration),e._startTime=t,e._lag+=n;e._lag>=e._frameDuration;)e.capturePreviousSpriteProperties(),e.update(),e._lag-=e._frameDuration;e._lagOffset=e._lag/e._frameDuration,e.render(e._lagOffset)};void 0===this._fps?(this.update(),this.render()):void 0===this._renderFps?n():t>=this._renderStartTime&&(n(),this._renderStartTime=t+this._renderDuration)}}},{key:"capturePreviousSpriteProperties",value:function(){for(var t=this,e=function e(n){if(t.properties.position&&(n._previousX=n.x,n._previousY=n.y),t.properties.rotation&&(n._previousRotation=n.rotation),t.properties.size&&(n._previousWidth=n.width,n._previousHeight=n.height),t.properties.scale&&(n._previousScaleX=n.scale.x,n._previousScaleY=n.scale.y),t.properties.alpha&&(n._previousAlpha=n.alpha),t.properties.tile&&(void 0!==n.tilePosition&&(n._previousTilePositionX=n.tilePosition.x,n._previousTilePositionY=n.tilePosition.y),void 0!==n.tileScale&&(n._previousTileScaleX=n.tileScale.x,n._previousTileScaleY=n.tileScale.y)),n.children&&n.children.length>0)for(var r=0;r<n.children.length;r++)e(n.children[r])},n=0;n<this.stage.children.length;n++)e(this.stage.children[n])}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.interpolate)for(var n=function n(r){if(t.properties.position&&(r._currentX=r.x,r._currentY=r.y,void 0!==r._previousX&&(r.x=(r.x-r._previousX)*e+r._previousX),void 0!==r._previousY&&(r.y=(r.y-r._previousY)*e+r._previousY)),t.properties.rotation&&(r._currentRotation=r.rotation,void 0!==r._previousRotation&&(r.rotation=(r.rotation-r._previousRotation)*e+r._previousRotation)),t.properties.size&&(r instanceof t.Sprite||r instanceof t.MovieClip)&&(r._currentWidth=r.width,r._currentHeight=r.height,void 0!==r._previousWidth&&(r.width=(r.width-r._previousWidth)*e+r._previousWidth),void 0!==r._previousHeight&&(r.height=(r.height-r._previousHeight)*e+r._previousHeight)),t.properties.scale&&(r._currentScaleX=r.scale.x,r._currentScaleY=r.scale.y,void 0!==r._previousScaleX&&(r.scale.x=(r.scale.x-r._previousScaleX)*e+r._previousScaleX),void 0!==r._previousScaleY&&(r.scale.y=(r.scale.y-r._previousScaleY)*e+r._previousScaleY)),t.properties.alpha&&(r._currentAlpha=r.alpha,void 0!==r._previousAlpha&&(r.alpha=(r.alpha-r._previousAlpha)*e+r._previousAlpha)),t.properties.tile&&(void 0!==r.tilePosition&&(r._currentTilePositionX=r.tilePosition.x,r._currentTilePositionY=r.tilePosition.y,void 0!==r._previousTilePositionX&&(r.tilePosition.x=(r.tilePosition.x-r._previousTilePositionX)*e+r._previousTilePositionX),void 0!==r._previousTilePositionY&&(r.tilePosition.y=(r.tilePosition.y-r._previousTilePositionY)*e+r._previousTilePositionY)),void 0!==r.tileScale&&(r._currentTileScaleX=r.tileScale.x,r._currentTileScaleY=r.tileScale.y,void 0!==r._previousTileScaleX&&(r.tileScale.x=(r.tileScale.x-r._previousTileScaleX)*e+r._previousTileScaleX),void 0!==r._previousTileScaleY&&(r.tileScale.y=(r.tileScale.y-r._previousTileScaleY)*e+r._previousTileScaleY))),0!==r.children.length)for(var o=0;o<r.children.length;o++)n(r.children[o])},r=0;r<this.stage.children.length;r++)n(this.stage.children[r]);if(this.renderer.render(this.stage),this.interpolate)for(var o=function e(n){if(t.properties.position&&(n.x=n._currentX,n.y=n._currentY),t.properties.rotation&&(n.rotation=n._currentRotation),t.properties.size&&(n instanceof t.Sprite||n instanceof t.MovieClip)&&(n.width=n._currentWidth,n.height=n._currentHeight),t.properties.scale&&(n.scale.x=n._currentScaleX,n.scale.y=n._currentScaleY),t.properties.alpha&&(n.alpha=n._currentAlpha),t.properties.tile&&(void 0!==n.tilePosition&&(n.tilePosition.x=n._currentTilePositionX,n.tilePosition.y=n._currentTilePositionY),void 0!==n.tileScale&&(n.tileScale.x=n._currentTileScaleX,n.tileScale.y=n._currentTileScaleY)),0!==n.children.length)for(var r=0;r<n.children.length;r++)e(n.children[r])},i=0;i<this.stage.children.length;i++)o(this.stage.children[i])}}],n&&Lp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fp(t){return Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fp(t)}function Mp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Gp(r.key),r)}}function Gp(t){var e=function(t,e){if("object"!==Fp(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Fp(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Fp(e)?e:String(e)}function Hp(t,e){return Hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hp(t,e)}function zp(t){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zp(t)}var Vp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hp(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=zp(r);if(o){var n=zp(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Fp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this)).loadErrorAssets=[],t.retryTimes=0,t.maxRetryTimes=10,t._assets=[],t._afterMiddlewares=[],t._beforeMiddlewares=[],t}return e=s,n=[{key:"assets",get:function(){return this._assets}},{key:"beforeMiddlewares",get:function(){return this._beforeMiddlewares}},{key:"afterMiddlewares",get:function(){return this._afterMiddlewares}},{key:"add",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this._checkExist(t)||(e=encodeURI(e),this._assets.push({name:t,url:e,options:n,cb:r})),this}},{key:"addBeforeMiddleware",value:function(t){t instanceof Function&&this._beforeMiddlewares.push(t)}},{key:"addAfterMiddleware",value:function(t){t instanceof Function&&this._afterMiddlewares.push(t)}},{key:"onDispose",value:function(){this.progress=0,this.loadErrorAssets=[],this.retryTimes=0,this.removeAllListeners(),this._assets=[],this._afterMiddlewares=[],this._beforeMiddlewares=[]}},{key:"reset",value:function(){this.progress=0,this._assets=[],this._afterMiddlewares=[],this._beforeMiddlewares=[]}},{key:"_checkExist",value:function(t){for(var e=0,n=this._assets.length;e<n;++e)if(t===this._assets[e].name)return!0;return!1}}],n&&Mp(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(f),Qp="error",Jp="progress",Kp="complete",qp=new PIXI.Loader("",6);qp.onProgress.add((function(t,e){Wp&&Wp.emit(Jp,t.progress)}));var Yp=[],Wp=null,Xp=!0;function Zp(){if(Xp&&(Wp=Yp.shift())){Xp=!1,qp.progress=0,qp.loading=!1;var t=0;if(Wp.assets.map((function(e){qp.resources[e.name]&&qp.resources[e.name].isComplete||(qp.add(e.name,e.url,e.options,e.cb),t++)})),t>0){qp.onError.once($p),qp.onComplete.once(td);var e=Wp.beforeMiddlewares;e&&e.forEach((function(t){qp.pre(t)}));var n=Wp.afterMiddlewares;n&&n.forEach((function(t){qp.use(t)})),qp.load()}else td(qp,qp.resources)}}function $p(t,e,n){Wp&&(Wp.loadErrorAssets.push(n.name),Wp.emit(Qp,{name:n.name,url:n.url}))}function td(t,e){if(Wp){var n=!1;if(Wp.loadErrorAssets.length>0){var r=Wp.loadErrorAssets;if(Wp.loadErrorAssets=[],Wp.retryTimes++,Wp.retryTimes<Wp.maxRetryTimes)return Wp.assets.map((function(e){if(-1!==r.indexOf(e.name)){var n=function(t){t=t||window.location.href;var e={},n=t.split("?")[1];return n&&n.split("&").forEach((function(t){var n,r,o=(n=t.split("="),r=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){u=!0,o=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}}(n,r)||function(t,e){if(t){if("string"==typeof t)return Dp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dp(t,e):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],s=o[1];e[i]=decodeURIComponent(s)})),e}(e.url);n.r=Wp.retryTimes,e.url=e.url.split("?")[0]+"?"+function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o=encodeURIComponent(n),i=encodeURIComponent(r);e.push("".concat(o,"=").concat(i))}return e.join("&")}(n);var o=t.resources[e.name];o&&(o.texture&&o.texture.destroy(!0),delete t.resources[o.name],o=null)}})),Xp=!0,void ed(Wp);n=!0}else n=!0;n&&(Wp.progress=1,Wp.emit(Kp,e))}Xp=!0,Zp()}function ed(t){-1===Yp.indexOf(t)&&Yp.push(t),Zp()}function nd(t){return nd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(t)}function rd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function od(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,id(r.key),r)}}function id(t){var e=function(t,e){if("object"!==nd(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==nd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===nd(e)?e:String(e)}function sd(t,e){return sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sd(t,e)}function ad(t){return ad=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ad(t)}var cd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sd(t,e)}(a,t);var e,n,r,i,s=(r=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ad(r);if(i){var n=ad(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===nd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,t)}return e=a,n=[{key:"execute",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e)throw new Error("参数错误！");var n=[];e.assets&&e.assets.length>0&&e.assets.forEach((function(t){var e,r;F[t]&&(n=(e=n).concat.apply(e,function(t){if(Array.isArray(t))return rd(t)}(r=F[t])||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return rd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rd(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))})),n.length>0?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&t.length>0){var r=o.create(Vp);r.on(Jp,(function(t){e&&e(t)}),this),r.on(Kp,(function(t){r.removeAllListeners(),r.dispose(),r=null,n&&n(t)}),this),t.map((function(t){r.add(t.name,t.url,t.options)})),ed(r)}else n&&n(null)}(n,(function(e){t.sendEvent(x,e)}),(function(n){fgui.utils.AssetLoader.addResources(n),e.assets.forEach((function(t){fgui.UIPackage.addPackage(t)})),t.sendEvent(S),e.callback&&"function"==typeof e.callback&&e.callback()})):e.callback&&"function"==typeof e.callback&&e.callback()}}],n&&od(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(nt);function ud(t){return ud="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(t)}function ld(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fd(r.key),r)}}function fd(t){var e=function(t,e){if("object"!==ud(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==ud(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ud(e)?e:String(e)}function hd(t,e){return hd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hd(t,e)}function pd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dd(t){return dd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dd(t)}new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hd(t,e)}(s,t);var e,n,r,o,i=(r=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dd(r);if(o){var n=dd(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ud(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pd(t)}(this,t)});function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=i.call(this),PIXI.settings.GC_MAX_IDLE=480,PIXI.settings.GC_MAX_CHECK_COUNT=120,PIXI.settings.MIPMAP_TEXTURES=!1,n=n||{},e.renderer=PIXI.autoDetectRenderer({width:void 0!==n.width?n.width:760,height:void 0!==n.height?n.height:500,transparent:void 0===n.transparent||n.transparent,antialias:void 0===n.antialias||n.antialias,resolution:void 0!==n.resolution?n.resolution:1,preserveDrawingBuffer:void 0===n.preserveDrawingBuffer||n.preserveDrawingBuffer,clearBeforeRender:void 0===n.clearBeforeRender||n.clearBeforeRender,forceCanvas:void 0!==n.forceCanvas&&n.forceCanvas,backgroundColor:void 0!==n.backgroundColor?n.backgroundColor:0,powerPreference:void 0!==n.powerPreference?n.powerPreference:"high-performance",autoDensity:!0}),e.element=t,e.element?e.element.appendChild(e.renderer.view):document.body&&document.body.appendChild(e.renderer.view),e.stage=new PIXI.Container;var r=n.fps||30,o=n.renderFps||30;return e.ticker=n.sharedTicker?PIXI.Ticker.shared:new PIXI.Ticker,e.smoothie=new Up({engine:PIXI,renderer:e.renderer,root:e.stage,fps:r,ticker:e.ticker,renderFps:o,update:e.update.bind(pd(e))}),fgui.GRoot.inst.attachTo(pd(e),{designWidth:void 0!==n.designWidth?n.designWidth:760,designHeight:void 0!==n.designHeight?n.designHeight:500,scaleMode:void 0!==n.scaleMode?n.scaleMode:"noBorder",orientation:void 0!==n.orientation?n.orientation:"auto",alignV:4,alignH:1}),e.uiLayer0=new fgui.GComponent,fgui.GRoot.inst.addChild(e.uiLayer0),e.layer1=new PIXI.Container,e.stage.addChild(e.layer1),e.layer2=new PIXI.Container,e.stage.addChild(e.layer2),e.layer3=new PIXI.Container,e.stage.addChild(e.layer3),e.uiLayer4=new fgui.GComponent,fgui.GRoot.inst.addChild(e.uiLayer4),e.uiLayer5=new fgui.GComponent,fgui.GRoot.inst.addChild(e.uiLayer5),(void 0===n.autoStart||n.autoStart)&&e.smoothie.start(),e}return e=s,(n=[{key:"view",get:function(){return this.renderer.view}},{key:"update",value:function(){}},{key:"startup",value:function(){PIXI.settings.TARGET_FPMS=.03,this.registerController(O,at),this.registerController(P,ht),this.registerController(k,cd),this.registerModel(gt),this.registerModel(At),this.registerModel(Ct),this.registerModel(Ph),this.registerModel(Rt),this.registerView(Ip,this)}}])&&ld(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(v))(document.getElementById("app")).startup()})()})();